{"version":3,"sources":["webpack:///./node_modules/react-oni-duplicant/assets/duplicant/body sync \\.png$","webpack:///./src/services/oni-save/components/AbstractBehaviorEditor/AbstractBehaviorEditor.tsx","webpack:///./src/services/oni-save/components/AbstractBehaviorEditor/state-props.ts","webpack:///./src/services/oni-save/components/AbstractBehaviorEditor/dispatch-props.ts","webpack:///./src/pages/DuplicantsPage/components/DuplicantListItem/components/DuplicantName.tsx","webpack:///./src/pages/DuplicantsPage/components/DuplicantListItem/components/DuplicantTraits.tsx","webpack:///./src/pages/DuplicantsPage/components/DuplicantListItem/components/DuplicantAttributes/index.ts","webpack:///./src/pages/DuplicantsPage/components/DuplicantListItem/components/DuplicantAttributes/DuplicantAttributes.tsx","webpack:///./src/pages/DuplicantsPage/components/DuplicantListItem/components/DuplicantAttributes/components/Attribute.tsx","webpack:///./src/pages/DuplicantsPage/components/DuplicantListItem/components/EditButton.tsx","webpack:///./src/components/ButtonLink.tsx","webpack:///./src/pages/DuplicantEditorPage/index.ts","webpack:///./src/pages/DuplicantEditorPage/DuplicantEditorPage.tsx","webpack:///./src/services/oni-save/components/AbstractGameObject/index.ts","webpack:///./src/services/oni-save/components/AbstractGameObject/AbstractGameObject.tsx","webpack:///./src/services/oni-save/components/AbstractGameObject/state-props.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/index.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/DuplicantEditor.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/DuplicantName.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Traits/index.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Traits/Traits.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Traits/components/AddTraitButton.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Interests/index.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Interests/Interests.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Interests/components/AddAptitudeButton.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Attributes/index.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Attributes/Attributes.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Attributes/components/AttributeName.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Attributes/components/AttributeField.tsx","webpack:///./src/components/CommitTextField/component.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Appearance/index.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Appearance/Appearance.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Appearance/components/HeadPortrait.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Appearance/components/Portrait.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Skills/index.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Skills/Skills.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Skills/components/Experience/index.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Skills/components/Experience/component.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Skills/components/Experience/connector.ts","webpack:///./src/services/oni-save/selectors/behaviors.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Skills/components/Masteries.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Effects/index.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Effects/Effects.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Effects/components/AddEffectButton.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Effects/components/AddEffectDialog.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Health/index.ts","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Health/Health.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantEditor/components/Health/components/Value.tsx","webpack:///./src/pages/DuplicantEditorPage/components/DuplicantNotFound.tsx","webpack:///./src/pages/GeysersPage/index.ts","webpack:///./src/pages/GeysersPage/GeysersPage.tsx","webpack:///./src/pages/GeysersPage/components/GeyserListItem.tsx","webpack:///./src/services/oni-save/components/AbstractGeyserEditor/index.ts","webpack:///./src/services/oni-save/components/AbstractGeyserEditor/AbstractGeyserEditor.tsx","webpack:///./src/services/oni-save/components/AbstractGeyserEditor/state-props.ts","webpack:///./src/services/oni-save/components/AbstractGeyserEditor/dispatch-props.ts","webpack:///./src/pages/PlanetsPage/index.ts","webpack:///./src/pages/PlanetsPage/PlanetsPage.tsx","webpack:///./src/pages/PlanetsPage/components/PlanetList.tsx","webpack:///./src/services/oni-save/components/AbstractPlanetList/index.ts","webpack:///./src/services/oni-save/components/AbstractPlanetList/AbstractPlanetList.tsx","webpack:///./src/services/oni-save/components/AbstractPlanetList/state-props.ts","webpack:///./src/pages/PlanetsPage/components/PlanetListItem/index.ts","webpack:///./src/pages/PlanetsPage/components/PlanetListItem/PlanetListItem.tsx","webpack:///./src/services/oni-save/components/AbstractPlanet/index.ts","webpack:///./src/services/oni-save/components/AbstractPlanet/AbstractPlanet.tsx","webpack:///./src/services/oni-save/components/AbstractPlanet/state-props.ts","webpack:///./src/services/oni-save/components/AbstractPlanet/dispatch-props.ts","webpack:///./src/services/oni-save/actions/modify-planet.ts","webpack:///./src/pages/PlanetsPage/components/PlanetListItem/components/RecoverableElement.tsx","webpack:///./src/pages/MaterialsPage/index.ts","webpack:///./src/pages/MaterialsPage/MaterialsPage.tsx","webpack:///./src/pages/MaterialsPage/components/MaterialsTable.tsx","webpack:///./src/services/oni-save/components/AbstractMaterialList/index.ts","webpack:///./src/services/oni-save/components/AbstractMaterialList/AbstractMaterialList.tsx","webpack:///./src/services/oni-save/components/AbstractMaterialList/state-props.ts","webpack:///./src/services/oni-save/components/AbstractMaterialList/dispatch-props.ts","webpack:///./src/pages/MaterialsPage/components/DeleteLooseButton.tsx","webpack:///./src/components/ConfirmationDialog.tsx","webpack:///./src/pages/RawEditorPage/index.ts","webpack:///./src/pages/RawEditorPage/RawEditorPage.tsx","webpack:///./src/components/ControlledMonaco.tsx","webpack:///./src/services/oni-save/components/AbstractRawEditor/index.ts","webpack:///./src/services/oni-save/components/AbstractRawEditor/AbstractRawEditor.tsx","webpack:///./src/services/oni-save/components/AbstractRawEditor/state-props.ts","webpack:///./src/services/oni-save/components/AbstractRawEditor/dispatch-props.ts","webpack:///./src/pages/RawEditorPage/components/PathSelector/index.ts","webpack:///./src/pages/RawEditorPage/components/PathSelector/component.tsx","webpack:///./src/pages/RawEditorPage/components/PathSelector/connector.ts","webpack:///./src/pages/RawEditorPage/components/PathSelector/logic.tsx","webpack:///./src/pages/RawEditorPage/components/PathSelector/path-settings.ts","webpack:///./src/pages/SettingsPage/index.ts","webpack:///./src/pages/SettingsPage/SettingsPage.tsx","webpack:///./src/pages/SettingsPage/components/Language/index.ts","webpack:///./src/pages/SettingsPage/components/Language/component.tsx","webpack:///./src/pages/SettingsPage/components/Language/connector.ts","webpack:///./src/services/oni-save/components/AbstractBehaviorEditor/index.ts","webpack:///./src/services/oni-save/selectors/save-game.ts","webpack:///./src/services/oni-save/selectors/game-objects.ts","webpack:///./src/components/PageContainer.tsx","webpack:///./src/services/oni-save/reducer/utils.ts","webpack:///./src/utils.ts","webpack:///./src/components/RedirectIfNoSave/index.ts","webpack:///./src/services/oni-save/selectors/utils.ts","webpack:///./src/services/oni-save/actions/receive-onisave.ts","webpack:///./src/services/oni-save/selectors/loading-status.ts","webpack:///./src/services/oni-save/actions/import-behaviors.ts","webpack:///./src/services/oni-save/actions/modify-behavior.ts","webpack:///./src/services/oni-save/actions/parse-progress.ts","webpack:///./src/runtime-env.ts","webpack:///./src/history.ts","webpack:///./src/services/i18n/i18n.ts","webpack:///./src/services/oni-save/actions/load-onisave.ts","webpack:///./src/store/store.ts","webpack:///./src/services/i18n/state.ts","webpack:///./src/services/i18n/actions/set-language.ts","webpack:///./src/services/oni-save/actions/change-geyser-type.ts","webpack:///./src/services/oni-save/utils.ts","webpack:///./src/services/oni-save/actions/clone-duplicant.ts","webpack:///./src/services/oni-save/actions/copy-behaviors.ts","webpack:///./src/services/oni-save/actions/delete-loose-material.ts","webpack:///./src/services/oni-save/actions/load-example.ts","webpack:///./src/services/oni-save/actions/merge-behaviors.ts","webpack:///./src/services/oni-save/actions/modify-behavior-path.ts","webpack:///./src/services/oni-save/actions/modify-difficulty.ts","webpack:///./src/services/oni-save/actions/modify-raw.ts","webpack:///./src/services/oni-save/actions/paste-behaviors.ts","webpack:///./src/services/oni-save/actions/export-behaviors.ts","webpack:///./src/services/oni-save/worker-instance.ts","webpack:///./src/services/oni-save/actions/save-onisave.ts","webpack:///./src/services/i18n/selectors/language.ts","webpack:///./src/components/utils.ts","webpack:///./src/components/AbstractLoadButton/index.ts","webpack:///./src/services/oni-save/components/AbstractGameObjectList/index.ts","webpack:///./src/exportable-behaviors.ts","webpack:///./src/components/BehaviorChooserDialog.tsx","webpack:///./src/components/DuplicantPortrait.tsx","webpack:///./src/components/CommitTextField/index.ts","webpack:///./src/services/oni-save/selectors/space-manager.ts","webpack:///./src/index.tsx","webpack:///./src/style.css?9819","webpack:///./src/style.css","webpack:///./src/debug.ts","webpack:///./src/state/utils.ts","webpack:///./src/store/reducer.ts","webpack:///./src/services/i18n/reducer/index.ts","webpack:///./src/services/i18n/reducer/set-language.ts","webpack:///./src/services/oni-save/reducer/index.ts","webpack:///./src/services/oni-save/reducer/change-geyser-type.ts","webpack:///./src/services/oni-save/reducer/clone-duplicant.ts","webpack:///./src/services/oni-save/reducer/copy-behaviors.ts","webpack:///./src/services/oni-save/reducer/delete-looe-material.ts","webpack:///./src/services/oni-save/reducer/import-warn-checksum.ts","webpack:///./src/services/oni-save/reducer/load-example.ts","webpack:///./src/services/oni-save/reducer/merge-behaviors.ts","webpack:///./src/services/oni-save/reducer/modify-behavior-path.ts","webpack:///./src/services/oni-save/reducer/modify-behavior.ts","webpack:///./src/services/oni-save/reducer/modify-difficulty.ts","webpack:///./src/services/oni-save/reducer/modify-raw.ts","webpack:///./src/services/oni-save/reducer/parse-progress.ts","webpack:///./src/services/oni-save/reducer/paste-behaviors.ts","webpack:///./src/services/oni-save/reducer/receive-onisave.ts","webpack:///./src/store/saga.ts","webpack:///./src/services/oni-save/saga/index.ts","webpack:///./src/services/oni-save/saga/export-behaviors.ts","webpack:///./src/services/oni-save/saga/import-behaviors.ts","webpack:///./src/services/oni-save/saga/load-onisave.ts","webpack:///./src/services/oni-save/worker-messages.ts","webpack:///./src/services/oni-save/save-serializer.worker.ts","webpack:///./src/services/oni-save/saga/save-onisave.ts","webpack:///./src/store/persist.ts","webpack:///./src/services/i18n/persist.ts","webpack:///./src/store/devtool-sanitizer.ts","webpack:///./src/root.tsx","webpack:///./src/theme.ts","webpack:///./src/store/components/StoreProvider.tsx","webpack:///./src/services/i18n/components/I18NProvider.tsx","webpack:///./src/components/LoadingDialog/index.ts","webpack:///./src/components/LoadingDialog/component.tsx","webpack:///./src/components/LoadingDialog/connector.ts","webpack:///./src/components/ImportWarningDialog/index.ts","webpack:///./src/components/ImportWarningDialog/component.tsx","webpack:///./src/components/ImportWarningDialog/connector.ts","webpack:///./src/services/oni-save/selectors/ui-state.ts","webpack:///./src/routes.tsx","webpack:///./src/pages/OverviewPage/index.ts","webpack:///./src/pages/OverviewPage/component.tsx","webpack:///./src/pages/OverviewPage/components/NoSave.tsx","webpack:///./src/components/Sidebar.tsx","webpack:///./src/components/Nav/index.ts","webpack:///./src/components/Nav/component.tsx","webpack:///./src/components/ListItemLink.tsx","webpack:///./src/components/Nav/nav-links.ts","webpack:///./src/components/Nav/connector.ts","webpack:///./src/components/GithubButton.tsx","webpack:///./src/components/Appbar.tsx","webpack:///./src/components/SettingsButton.tsx","webpack:///./src/components/SaveIconButton/index.ts","webpack:///./src/components/SaveIconButton/component.tsx","webpack:///./src/components/SaveIconButton/connector.ts","webpack:///./src/components/LoadIconButton/index.ts","webpack:///./src/components/LoadIconButton/component.tsx","webpack:///./src/components/AbstractLoadButton/component.tsx","webpack:///./src/components/AbstractLoadButton/connector.ts","webpack:///./src/components/BackButton/index.ts","webpack:///./src/components/BackButton/component.tsx","webpack:///./src/components/BackButton/connector.ts","webpack:///./src/components/ModifiedChip/index.ts","webpack:///./src/components/ModifiedChip/component.tsx","webpack:///./src/components/ModifiedChip/connector.ts","webpack:///./src/components/ExampleChip/index.ts","webpack:///./src/components/ExampleChip/component.tsx","webpack:///./src/components/ExampleChip/connector.ts","webpack:///./src/components/LoadButton/index.ts","webpack:///./src/components/LoadButton/component.tsx","webpack:///./src/components/LoadExampleButton/index.ts","webpack:///./src/components/LoadExampleButton/component.tsx","webpack:///./src/components/LoadExampleButton/connector.ts","webpack:///./src/pages/OverviewPage/components/SaveOverview/index.ts","webpack:///./src/pages/OverviewPage/components/SaveOverview/SaveOverview.tsx","webpack:///./src/pages/OverviewPage/components/SaveOverview/components/Difficulty.tsx","webpack:///./src/services/oni-save/components/AbstractDifficulty.tsx","webpack:///./src/services/oni-save/components/connectRenderComponent.tsx","webpack:///./src/pages/OverviewPage/components/SaveOverview/state-props.ts","webpack:///./src/pages/OverviewPage/components/SaveError/index.ts","webpack:///./src/pages/OverviewPage/components/SaveError/component.tsx","webpack:///./src/pages/OverviewPage/components/SaveError/connector.ts","webpack:///./src/pages/OverviewPage/connector.ts","webpack:///./src/pages/DuplicantsPage/index.ts","webpack:///./src/pages/DuplicantsPage/DuplicantsPage.tsx","webpack:///./src/components/RedirectIfNoSave/component.tsx","webpack:///./src/components/RedirectIfNoSave/connector.ts","webpack:///./src/pages/DuplicantsPage/components/DuplicantList.tsx","webpack:///./src/services/oni-save/components/AbstractGameObjectList/AbstractGameObjectList.tsx","webpack:///./src/services/oni-save/components/AbstractGameObjectList/state-props.ts","webpack:///./src/pages/DuplicantsPage/components/DuplicantListItem/index.ts","webpack:///./src/pages/DuplicantsPage/components/DuplicantListItem/DuplicantListItem.tsx","webpack:///./src/components/DuplicantMenu/index.ts","webpack:///./src/components/DuplicantMenu/component.tsx","webpack:///./src/components/DuplicantMenu/components/CopyMenuItem/index.ts","webpack:///./src/components/DuplicantMenu/components/CopyMenuItem/component.tsx","webpack:///./src/components/DuplicantMenu/components/CopyMenuItem/connector.ts","webpack:///./src/components/DuplicantMenu/components/ImportMenuItem/index.ts","webpack:///./src/components/DuplicantMenu/components/ImportMenuItem/component.tsx","webpack:///./src/components/DuplicantMenu/components/ImportMenuItem/connector.ts","webpack:///./src/components/DuplicantMenu/components/ExportMenuItem/index.ts","webpack:///./src/components/DuplicantMenu/components/ExportMenuItem/component.tsx","webpack:///./src/components/DuplicantMenu/components/ExportMenuItem/connector.ts","webpack:///./src/components/DuplicantMenu/components/PasteMenuItem/index.ts","webpack:///./src/components/DuplicantMenu/components/PasteMenuItem/component.tsx","webpack:///./src/components/DuplicantMenu/components/PasteMenuItem/connector.ts","webpack:///./src/services/oni-save/selectors/copy-paste.ts","webpack:///./src/components/DuplicantMenu/components/CloneMenuItem/index.ts","webpack:///./src/components/DuplicantMenu/components/CloneMenuItem/component.tsx","webpack:///./src/components/DuplicantMenu/components/CloneMenuItem/connector.ts","webpack:///./node_modules/react-oni-duplicant/assets/duplicant/hair sync \\.png$","webpack:///./node_modules/react-oni-duplicant/assets/duplicant/headshape sync \\.png$","webpack:///./node_modules/react-oni-duplicant/assets/duplicant/eyes sync \\.png$","webpack:///./src/state/index.ts","webpack:///./src/services/oni-save/state.ts"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","_onTemplateDataModify","data","gameObjectId","gameObjectBehavior","onModifyBehavior","BehaviorDataTarget","Template","_onExtraDataModify","Extra","ofType","behavior","props","ConnectedAbstractBehaviorEditor","render","children","templateData","extraData","React","Children","only","onTemplateDataModify","this","onExtraDataModify","Component","attachProps","connect","AbstractBehaviorEditor","behaviorSelector","_","gameObjectsByIdSelector","behaviorName","gameObjectsById","gameObject","getBehavior","mapStateToProps","createStructuredSelector","state","mapDispatchToProps","modifyBehavior","MinionIdentityEditor","MinionIdentityBehavior","variant","name","TraitsEditor","AITraitsBehavior","withStyles","theme","createStyles","root","display","flexDirection","trait","textAlign","whiteSpace","withTranslation","classes","t","className","TraitIds","key","component","title","toUpperCase","defaultValue","flexWrap","width","spacing","height","marginLeft","marginRight","item","attributeId","AttributeEditor","AIAttributeLevelsBehavior","attribute","find","saveLoadLevels","x","String","signPrefix","level","Trans","i18nKey","to","size","_onClick","onLinkClick","bind","history","disabled","href","createHref","pathname","onClick","withRouter","ButtonLink","Number","gameObjectType","Fragment","AbstractGameObject","gameObjectTypeSelector","type","gameObjectTypesByIdSelector","paddingLeft","paddingTop","divider","marginTop","marginBottom","nameRow","flexGrow","flexShrink","portraitRow","portraitRowColumn","portraitRowTweakables","row","tabRow","tabContent","overflow","tab","setTab","back","scale","square","textColor","value","onChange","label","CANDIDATE_TRAITS","AI_TRAIT_IDS","filter","chip","margin","availableTraits","difference","i","onDelete","newTraitIds","splice","onAddTrait","isOpen","setIsOpen","chipRef","useRef","ref","color","clickable","open","anchorEl","current","onClose","sort","ResumeEditor","MinionResumeBehavior","AptitudeBySkillGroup","availableAptitudes","MinionSkillGroupNames","aptitudeName","aptitudes","hash","getHashedString","aptitude","aptitudeValue","selectedAptitudes","removeAptitude","hashStr","index","findIndex","slice","onAddAptitude","addAptitude","AttributesEditor","PRIMARY_ATTRIBUTES","header","attributeList","padding","attributeItem","attributeInput","attributes","indexOf","attrIndex","attr","onCommit","newLevels","_onChange","setState","target","_onKeyPress","onKeyPress","_commit","_onBlur","onBlur","editValue","prevValue","CommitTextField","AccessorizerEditor","AccessorizerBehavior","getOrdinalOfType","accessories","accessory","getAccessoryOfType","guid","getAccessoryName","parts","split","length","ordinalFromAccessory","Guid","ordinalRange","Array","from","partList","partContainer","part","cursor","hairOrdinal","headOrdinal","eyesOrdinal","makeSetAccessory","ordinal","preventDefault","stopPropagation","getIndexOfAccessoryType","accessoryMod","Accessory","padStart","hatHair","hairAlways","merge","setAccessory","bodyOrdinal","styles","portraitContainer","position","portrait","top","left","transform","transformOrigin","DuplicantContainer","Head","Eyes","Hair","Body","experience","setExperience","onSetExperience","useCallback","experienceSelector","createSelector","getBehaviorSelector","resume","totalExperienceGained","dispatch","ownProps","action","modifyBehaviorPath","gameObjectIdSelector","behaviorSelectorCache","has","getMastery","masteries","mastery","entry","MasteryBySkillID","MinionSkillNames","skillName","checked","onChangeMastery","EffectsEditor","AIEffectsBehavior","align","saveLoadEffects","timeRemaining","scope","colSpan","isAddingEffect","setIsAddingEffect","currentEffects","availableEffects","AI_EFFECT_IDS","onAddEffect","cycleTime","selectedEffect","setSelectedEffect","setTimeRemaining","htmlFor","inputProps","effect","group","modifier","max","ModifierBehaviorEditor","MinionModifiersBehavior","valueLabel","amounts","amount","min","setAmount","text","GeyserTypeNames","gameObjectIds","titleBar","titleControls","sliderSection","geyserType","emitRate","onChangeEmitRate","onChangeGeyserType","keysOfType","GeyserType","typeName","geyserConfigSelector","geyserBehavior","GeyserBehavior","configuration","config","typeId","rateRoll","changeGeyserType","planetIds","planetId","planetIdsSelector","spaceManagerSelector","spaceManager","destinations","contentLayout","planetContainer","planetImg","planet","viewBox","cx","cy","r","fill","recoverableElements","chance","onPlanetModify","planetIdSelector","planetSelector","modifyPlanet","ACTION_ONISAVE_MODIFY_PLANET","payload","RecoverableElement","SimHashes","Math","round","formatWeight","weight","abs","g","toFixed","count","kg","materials","onDeleteLooseMaterial","materialName","looseGrams","looseCount","storedGrams","storedCount","MaterialGameObjectTypes","SimHashNames","materialsSelector","gameObjectGroupsSelector","groups","rowsByMaterial","countMaterialGroup","rows","values","orderBy","isMaterialGameObject","gameObjects","addMaterialObject","countLooseMaterialGroup","storedObjects","flatMap","getStoredObjects","storedObject","countStorageGroup","storage","StorageBehavior","loose","elementBehavior","PrimaryElementBehavior","Units","getMaterialRow","deleteLooseMaterial","message","onConfirm","onCancel","setOpen","onCancelClick","onConfirmClick","selectorContainer","editorContainer","minHeight","buttonContainer","path","setPath","valid","hasChanges","onReset","onApply","language","_editor","_monaco","_editorDidMount","editor","monaco","_updateEditor","editorDidMount","getValue","setValue","componentDidUpdate","isValid","JSON","parse","transientValue","_onApply","onModifySave","parsed","_onReset","objectDepth","obj","limit","depth","keyDepth","stringify","AbstractRawEditor","valueSelector","saveGameSelector","saveGame","get","join","modifyRaw","pathMenu","nextItemMenu","generatePathMenu","onSelectPath","pathMenuItems","subPath","push","getPathName","generateNextMenu","settings","getPathSettings","getLabel","last","WrappedComponent","idBehavior","KPrefabIDBehavior","InstanceID","pattern","segment","match","matchPath","languages","en","zh","ru","currentLanguage","onChangeLanguage","entries","currentLanguageSelector","setLanguage","createServiceSelector","isMockSelector","isMock","hasSaveSelector","isSaveModifiedSelector","isModified","local","gameObjectTypesById","getGameObjectId","isNotNull","keyBy","sidebar","appRoot","content","anchor","getGameObjectLocationById","gameObjectIndex","groupIndex","gameObjectGroups","getGameObjectIndexById","ModifySaveError","replace","array","dataKey","behaviorIndex","behaviors","newData","applyModifier","prop","arrayDict","subComponents","c","forEach","isArray","selector","rootSelector","services","oniSave","ACTION_RECEIVE_ONISAVE_BEGIN","receiveOniSaveBegin","operation","clearExisting","meta","ACTION_RECEIVE_ONISAVE_ERROR","receiveOniSaveError","error","ACTION_RECEIVE_ONISAVE_SUCCESS","receiveOniSaveSuccess","types","loadingStatusSelector","loadingStatus","loadingStatusMessageSelector","loadingProgressMessage","loadingErrorSelector","loadError","loadingErrorMessageSelector","ACTION_ONISAVE_IMPORT_BEHAVIORS","importBehaviors","file","ACTION_ONISAVE_IMPORT_WARN_CHECKSUM","importWarnChecksum","ACTION_ONISAVE_IMPORT_CONFIRM","importConfirm","doImport","ACTION_ONISAVE_MODIFY_BEHAVIOR","behaviorId","ACTION_ONISAVE_PARSE_PROGRESS","parseProgress","osPlatform","os","family","OSType","test","isProd","createHashHistory","use","initReactI18next","init","fallbackLng","ns","defaultNS","resources","common","oni","debug","interpolation","escapeValue","react","wait","ACTION_ONISAVE_LOAD","loadOniSave","store","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","actionSanitizer","stateSanitizer","actionsBlacklist","compose","sagaMiddleware","initialState","loadPersistedState","defaultAppState","applyMiddleware","routerMiddleware","run","subscribe","savePersistedState","getState","createStore","defaultI18NState","freeze","ACTION_SET_LANGUAGE","ACTION_ONISAVE_CHANGE_GEYSER_TYPE","ACTION_ONISAVE_CLONE_DUPLICANT","cloneDuplicant","ACTION_ONISAVE_COPY_BEHAVIORS","copyBehaviors","ACTION_ONISAVE_DELETE_LOOSE_MATERIAL","materialType","ACTION_ONISAVE_LOAD_EXAMPLE","loadExampleSave","ACTION_ONISAVE_MERGE_BEHAVIORS","mergeBehaviors","ACTION_MODIFY_BEHAVIOR_PATH","behaviorPath","ACTION_ONISAVE_MODIFY_DIFFICULTY","modifyDifficulty","difficultyType","ACTION_ONISAVE_MODIFY_RAW","ACTION_ONISAVE_PASTE_BEHAVIORS","pasteBehaviors","ACTION_ONISAVE_EXPORT_BEHAVIORS","exportBehaviors","worker","onProgress","promise","Promise","accept","reject","unhook","onerror","onmessage","RESPONSE_PROGRESS","RESPONSE_PARSE_SUCCESS","RESPONSE_PARSE_ERROR","jsonToError","postMessage","parseSave","RESPONSE_WRITE_SUCCESS","RESPONSE_WRITE_ERROR","writeSave","ACTION_ONISAVE_SAVE","saveOniSave","fileName","i18n","event","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey","isModifierPressed","MinionExportableBehaviors","applyText","choices","selectedTargets","setSelectedTargets","onCheckboxChange","onApplyClick","control","autoFocus","style","saveGameGroup","saveGameObject","spaceBehavior","SpacecraftManagerBehavior","rootEl","document","getElementById","ReactDOM","options","locals","loadMockSave","mockSaveGame","LoadingStatus","Loading","loadMockError","selectors","routerReducer","connectRouter","servicesReducer","combineReducers","defaultOniSaveState","router","lang","changeLanguage","isChangeGeyserTypeAction","tryModifySaveGame","requireGameObject","changeStateBehaviorData","HashedString","removeGameObject","addGameObject","isCloneDuplicantAction","oldIdentity","requireBehavior","newMinion","shouldCloneBehavior","newPrefabId","nextUniqueID","assignableProxy","performCloneDuplicant","BEHAVIOR_BLACKLIST","isCopyBehaviorsAction","typesById","copyPasteData","isDeleteLooseMaterialAction","materialsToRemove","isImportWarnChecksumAction","warnInputChecksum","isImportConfirmAction","isLoadExampleSaveAction","Ready","isMergeBehaviorsAction","replaceGameObject","performMergeBehaviors","isModifyBehaviorPathAction","set","performModifyBehaviorPath","isModifyBehaviorAction","mergeData","performMerge","original","performModifyBehavior","isModifyDifficultyAction","gameData","customGameSettings","CurrentQualityLevelsBySetting","setArrayDict","isModifyRawAction","draftSave","performModifyRaw","isParseProgressAction","copyBehavior","isPasteBehaviorsAction","performPasteBehaviors","isReceiveOniSaveAction","Saving","fork","handleExportBehaviorsActionSaga","select","identity","exportObject","targetBehaviors","exportBehavior","algorithm","$sha1","buildExportObject","blob","Blob","saveAs","takeEvery","handleImportBehaviorsSaga","onError","console","call","readFile","contentStr","sha1","contentSha1","warnImportChecksumSaga","put","reader","FileReader","onload","result","readAsText","take","handleOniSaveLoad","loadChannel","eventChannel","emitter","then","END","catch","createLoadChannel","msg","readAsArrayBuffer","sendProgress","parseSaveSuccess","parseSaveError","errorToJson","stack","writeSaveSuccess","writeSaveError","Worker","handleOniSaveWrite","saveName","gameInfo","baseName","saveChannel","createSaveChannel","persistedState","stateJson","localStorage","getItem","PERSISTED_STATE_KEY","getStoredState","lastPersistedState","buildPersistedState","setItem","setStoredState","persistState","persisted","sanitizeSave","save","world","streamed","hot","ConnectedRouter","createMuiTheme","palette","Provider","I18nextProvider","verticalAlign","loadingText","isLoading","isSaving","description","warnInputChecksumSelector","Switch","Route","exact","Redirect","SaveFilePaths","windows","mac","linux","unknown","saveFilePath","toolbar","mixins","alignItems","ghButton","hasSave","saveRequired","autoselect","location","selected","pathStartsWith","startsWith","substr","ListItemLink","FontAwesomeIcon","icon","faGithub","onSave","disabledSelector","loadStatus","onLoadSave","inputRef","click","onFileChange","files","status","isBusy","goBack","isExample","onLoadExampleSave","difficulty","cycleCount","table","gridTemplateColumns","onModifyDifficulty","QualityLevelSettingValues","gameSettingsSelector","difficultySelector","gameSettings","setting","connectRenderComponent","game","numberOfCycles","errorMessage","duplicantList","AbstractGameObjectList","gameObjectIdsSelector","typeProp","gameObjectsGroups","maybeArray","portraitColumn","editButton","setAnchorEl","onOpen","currentTarget","undefined","Boolean","onCopyBehaviors","isDialogOpen","setDialogOpen","onDialogApply","copyText","onImportDuplicant","onMenuItemClick","onExportBehaviors","exportText","onPasteBehaviors","copyPasteGameObjectTypeSelect","copyPasteDataSelector","copyPasteAvailableBehaviorsSelector","onCloneDuplicant","Idle"],"mappings":"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6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,IAC9B,4BAA6B,IAC7B,6BAA8B,IAC9B,6BAA8B,IAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,4BAA6B,KAC7B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,KAC7B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,4BAA6B,KAC7B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,4BAA6B,KAC7B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,6BAA8B,KAC9B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,KAC7B,4BAA6B,MAI9B,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,iFCjNpB,aACA,S,4DAEA,SAUa,EAAAmkB,gBAAsC,CACjD6F,YAAQyM,EACRxW,SAAU,CACRuH,KAAM,EAAA7C,iBACNzE,QAAS,EAAA6J,sBAGbvpB,OAAOokB,OAAO,EAAAT,kB,gCCpBd,IAAYoF,E,iDAAZ,SAAYA,GACV,cACA,oBACA,kBACA,gBACA,gBALF,CAAYA,EAAA,EAAAA,gBAAA,EAAAA,cAAa,KA4BZ,EAAAQ,oBAA8C,CACzDhJ,cAAewI,EAAckO,KAC7BxW,uBAAwB,KACxBE,UAAW,KACXxF,SAAU,KACVoC,QAAQ,EACRG,YAAY,EACZoN,cAAe,KACfI,mBAAmB,GAErBlrB,OAAOokB,OAAO,EAAAmF,uB","file":"client.e565e30ac9a2f5ccf8ea.bundle.js","sourcesContent":["var map = {\n\t\"./body_001/body_001_0.png\": 1063,\n\t\"./body_001/body_001_1.png\": 1064,\n\t\"./body_001/body_001_10.png\": 1065,\n\t\"./body_001/body_001_11.png\": 1066,\n\t\"./body_001/body_001_12.png\": 1067,\n\t\"./body_001/body_001_2.png\": 1068,\n\t\"./body_001/body_001_20.png\": 1069,\n\t\"./body_001/body_001_21.png\": 1070,\n\t\"./body_001/body_001_22.png\": 1071,\n\t\"./body_001/body_001_23.png\": 1072,\n\t\"./body_001/body_001_24.png\": 1073,\n\t\"./body_001/body_001_3.png\": 1074,\n\t\"./body_001/body_001_4.png\": 1075,\n\t\"./body_001/body_001_5.png\": 1076,\n\t\"./body_002/body_002_0.png\": 1077,\n\t\"./body_002/body_002_1.png\": 1078,\n\t\"./body_002/body_002_10.png\": 1079,\n\t\"./body_002/body_002_11.png\": 1080,\n\t\"./body_002/body_002_12.png\": 1081,\n\t\"./body_002/body_002_2.png\": 1082,\n\t\"./body_002/body_002_20.png\": 1083,\n\t\"./body_002/body_002_21.png\": 1084,\n\t\"./body_002/body_002_22.png\": 1085,\n\t\"./body_002/body_002_23.png\": 1086,\n\t\"./body_002/body_002_24.png\": 1087,\n\t\"./body_002/body_002_3.png\": 1088,\n\t\"./body_002/body_002_4.png\": 1089,\n\t\"./body_002/body_002_5.png\": 1090,\n\t\"./body_003/body_003_0.png\": 1091,\n\t\"./body_003/body_003_1.png\": 1092,\n\t\"./body_003/body_003_10.png\": 1093,\n\t\"./body_003/body_003_11.png\": 1094,\n\t\"./body_003/body_003_12.png\": 1095,\n\t\"./body_003/body_003_2.png\": 1096,\n\t\"./body_003/body_003_20.png\": 1097,\n\t\"./body_003/body_003_21.png\": 1098,\n\t\"./body_003/body_003_22.png\": 1099,\n\t\"./body_003/body_003_23.png\": 1100,\n\t\"./body_003/body_003_24.png\": 1101,\n\t\"./body_003/body_003_3.png\": 1102,\n\t\"./body_003/body_003_4.png\": 1103,\n\t\"./body_003/body_003_5.png\": 1104,\n\t\"./body_004/body_004_0.png\": 1105,\n\t\"./body_004/body_004_1.png\": 1106,\n\t\"./body_004/body_004_10.png\": 1107,\n\t\"./body_004/body_004_11.png\": 1108,\n\t\"./body_004/body_004_12.png\": 1109,\n\t\"./body_004/body_004_2.png\": 1110,\n\t\"./body_004/body_004_20.png\": 1111,\n\t\"./body_004/body_004_21.png\": 1112,\n\t\"./body_004/body_004_22.png\": 1113,\n\t\"./body_004/body_004_23.png\": 1114,\n\t\"./body_004/body_004_24.png\": 1115,\n\t\"./body_004/body_004_3.png\": 1116,\n\t\"./body_004/body_004_4.png\": 1117,\n\t\"./body_004/body_004_5.png\": 1118\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1062;","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { BehaviorName, GameObjectBehavior } from \"oni-save-parser\";\r\n\r\nimport { attachProps } from \"@/utils\";\r\n\r\nimport { AbstractBehaviorEditorProps } from \"./props\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./state-props\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch-props\";\r\nimport { BehaviorDataTarget } from \"../../actions/modify-behavior\";\r\n\r\ntype Props = AbstractBehaviorEditorProps<any> & StateProps & DispatchProps;\r\nclass AbstractBehaviorEditor extends React.Component<Props> {\r\n  static ofType<T extends GameObjectBehavior>(\r\n    behavior: BehaviorName<T>\r\n  ): React.ComponentType<\r\n    Omit<AbstractBehaviorEditorProps<T>, \"gameObjectBehavior\">\r\n  > {\r\n    return (\r\n      props: Omit<AbstractBehaviorEditorProps<T>, \"gameObjectBehavior\">\r\n    ) => (\r\n      <ConnectedAbstractBehaviorEditor\r\n        {...props}\r\n        gameObjectBehavior={behavior}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { children, templateData, extraData } = this.props;\r\n    return React.Children.only(\r\n      children({\r\n        templateData,\r\n        extraData,\r\n        onTemplateDataModify: this._onTemplateDataModify,\r\n        onExtraDataModify: this._onExtraDataModify\r\n      })\r\n    );\r\n  }\r\n\r\n  private _onTemplateDataModify = (data: any) => {\r\n    const { gameObjectId, gameObjectBehavior, onModifyBehavior } = this.props;\r\n    onModifyBehavior(\r\n      gameObjectId,\r\n      gameObjectBehavior,\r\n      BehaviorDataTarget.Template,\r\n      data\r\n    );\r\n  };\r\n  private _onExtraDataModify = (data: any) => {\r\n    const { gameObjectId, gameObjectBehavior, onModifyBehavior } = this.props;\r\n    onModifyBehavior(\r\n      gameObjectId,\r\n      gameObjectBehavior,\r\n      BehaviorDataTarget.Extra,\r\n      data\r\n    );\r\n  };\r\n}\r\nconst ConnectedAbstractBehaviorEditor = attachProps(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(AbstractBehaviorEditor),\r\n  {\r\n    ofType: AbstractBehaviorEditor.ofType\r\n  }\r\n);\r\nexport default ConnectedAbstractBehaviorEditor;\r\n","import createCachedSelector from \"re-reselect\";\r\nimport { getBehavior } from \"oni-save-parser\";\r\n\r\nimport { AppState, createStructuredSelector } from \"@/state\";\r\n\r\nimport { gameObjectsByIdSelector } from \"../../selectors/game-objects\";\r\n\r\nimport { AbstractBehaviorEditorProps } from \"./props\";\r\n\r\nconst gameObjectIdSelector = (\r\n  _: any,\r\n  props: AbstractBehaviorEditorProps<any>\r\n) => props.gameObjectId;\r\nconst gameObjectBehaviorSelector = (\r\n  _: any,\r\n  props: AbstractBehaviorEditorProps<any>\r\n) => props.gameObjectBehavior;\r\n\r\nconst behaviorSelector = createCachedSelector(\r\n  gameObjectIdSelector,\r\n  gameObjectBehaviorSelector,\r\n  gameObjectsByIdSelector,\r\n  (id, behaviorName, gameObjectsById) => {\r\n    const gameObject = gameObjectsById[id];\r\n    if (!gameObject) {\r\n      return null;\r\n    }\r\n    const behavior = getBehavior(gameObject, behaviorName);\r\n    if (!behavior) {\r\n      return null;\r\n    }\r\n\r\n    return behavior;\r\n  }\r\n)(\r\n  (_: any, props: AbstractBehaviorEditorProps<any>) =>\r\n    `${props.gameObjectId}:${props.gameObjectBehavior}`\r\n);\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  templateData: (state: AppState, props: AbstractBehaviorEditorProps<any>) => {\r\n    const behavior = behaviorSelector(state, props);\r\n    if (!behavior) return null;\r\n    return behavior.templateData;\r\n  },\r\n  extraData: (state: AppState, props: AbstractBehaviorEditorProps<any>) => {\r\n    const behavior = behaviorSelector(state, props);\r\n    if (!behavior) return null;\r\n    return behavior.extraData;\r\n  }\r\n});\r\n\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import { modifyBehavior } from \"../../actions/modify-behavior\";\r\n\r\nconst mapDispatchToProps = {\r\n  onModifyBehavior: modifyBehavior\r\n};\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import * as React from \"react\";\r\nimport { MinionIdentityBehavior } from \"oni-save-parser\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nconst MinionIdentityEditor = AbstractBehaviorEditor.ofType(\r\n  MinionIdentityBehavior\r\n);\r\n\r\nexport interface DuplicantNameProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst DuplicantName: React.FC<DuplicantNameProps> = ({ gameObjectId }) => (\r\n  <MinionIdentityEditor gameObjectId={gameObjectId}>\r\n    {({ templateData }) => (\r\n      <Typography variant=\"h5\">{templateData.name}</Typography>\r\n    )}\r\n  </MinionIdentityEditor>\r\n);\r\nexport default DuplicantName;\r\n","import * as React from \"react\";\r\nimport { AITraitsBehavior } from \"oni-save-parser\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nconst TraitsEditor = AbstractBehaviorEditor.ofType(AITraitsBehavior);\r\n\r\nexport interface DuplicantTraitsProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\"\r\n    },\r\n    trait: {\r\n      textAlign: \"center\",\r\n      whiteSpace: \"nowrap\"\r\n    }\r\n  });\r\n\r\ntype Props = DuplicantTraitsProps & WithStyles<typeof styles> & WithTranslation;\r\n\r\nconst DuplicantTraits: React.FC<Props> = ({ classes, gameObjectId, t }) => (\r\n  <TraitsEditor gameObjectId={gameObjectId}>\r\n    {({ templateData }) => (\r\n      <div className={classes.root}>\r\n        {(templateData || { TraitIds: [] }).TraitIds.map(trait => (\r\n          <Typography\r\n            key={trait}\r\n            className={classes.trait}\r\n            variant=\"body2\"\r\n            component=\"div\"\r\n            title={t(`oni:DUPLICANTS.TRAITS.${trait.toUpperCase()}.DESC`, {\r\n              defaultValue: \"\"\r\n            })}\r\n          >\r\n            {t(`oni:DUPLICANTS.TRAITS.${trait.toUpperCase()}.NAME`, {\r\n              defaultValue: trait\r\n            })}\r\n          </Typography>\r\n        ))}\r\n      </div>\r\n    )}\r\n  </TraitsEditor>\r\n);\r\n\r\nexport default withStyles(styles)(withTranslation()(DuplicantTraits));\r\n","import DuplicantAttributes from \"./DuplicantAttributes\";\r\nexport default DuplicantAttributes;\r\n","import * as React from \"react\";\r\nimport classnames from \"classnames\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport Attribute from \"./components/Attribute\";\r\n\r\nexport interface DuplicantAttributesProps {\r\n  className?: string;\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      flexWrap: \"wrap\",\r\n      width: theme.spacing(30),\r\n      height: theme.spacing(20),\r\n      marginLeft: -theme.spacing(0.5),\r\n      marginRight: -theme.spacing(0.5)\r\n    },\r\n    item: {\r\n      marginLeft: theme.spacing(0.5),\r\n      marginRight: theme.spacing(0.5)\r\n    }\r\n  });\r\n\r\ntype Props = DuplicantAttributesProps & WithStyles<typeof styles>;\r\n\r\nconst DuplicantAttributes: React.FC<Props> = ({\r\n  className,\r\n  classes,\r\n  gameObjectId\r\n}) => (\r\n  <div className={classnames(className, classes.root)}>\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Athletics\" />\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Cooking\" />\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Digging\" />\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Caring\" />\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Ranching\" />\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Machinery\" />\r\n\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Construction\" />\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Art\" />\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Botanist\" />\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Learning\" />\r\n    <Attribute gameObjectId={gameObjectId} attributeId=\"Strength\" />\r\n  </div>\r\n);\r\n\r\nexport default withStyles(styles)(DuplicantAttributes);\r\n","import * as React from \"react\";\r\nimport { AIAttributeLevelsBehavior } from \"oni-save-parser\";\r\nimport { find } from \"lodash-es\";\r\n\r\nimport { Trans, WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ErrorIcon from \"@material-ui/icons/Error\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nconst AttributeEditor = AbstractBehaviorEditor.ofType(\r\n  AIAttributeLevelsBehavior\r\n);\r\n\r\nexport interface AttributeNameProps {\r\n  gameObjectId: number;\r\n  attributeId: string;\r\n}\r\n\r\ntype Props = AttributeNameProps & WithTranslation;\r\nconst AttributeName: React.FC<Props> = ({ gameObjectId, attributeId, t }) => (\r\n  <AttributeEditor gameObjectId={gameObjectId}>\r\n    {({ templateData }) => {\r\n      if (!templateData) {\r\n        return <div>Error: No Data</div>;\r\n      }\r\n      let attribute = find(\r\n        templateData.saveLoadLevels,\r\n        x => x.attributeId === attributeId\r\n      );\r\n      return (\r\n        <Typography\r\n          component=\"span\"\r\n          variant=\"body2\"\r\n          title={t(`oni:DUPLICANTS.ATTRIBUTES.${attributeId}.DESC`, {\r\n            defaultValue: \"\"\r\n          })}\r\n        >\r\n          {attribute && signPrefix(attribute.level)}\r\n          {!attribute && <ErrorIcon />}{\" \"}\r\n          <Trans i18nKey={`oni:DUPLICANTS.ATTRIBUTES.${attributeId}.NAME`}>\r\n            {attributeId}\r\n          </Trans>\r\n        </Typography>\r\n      );\r\n    }}\r\n  </AttributeEditor>\r\n);\r\n\r\nexport default withTranslation()(AttributeName);\r\n\r\nfunction signPrefix(x: number): string {\r\n  if (x > 0) {\r\n    return `+${x}`;\r\n  } else if (x < 0) {\r\n    return `-${x}`;\r\n  }\r\n  return String(x);\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport ButtonLink from \"@/components/ButtonLink\";\r\n\r\nexport interface EditButtonProps {\r\n  className?: string;\r\n  gameObjectId: number;\r\n}\r\ntype Props = EditButtonProps & WithTranslation;\r\nconst EditButton: React.FC<Props> = ({ className, gameObjectId, t }) => (\r\n  <ButtonLink\r\n    className={className}\r\n    to={`/duplicants/${gameObjectId}`}\r\n    size=\"small\"\r\n    title={t(\"duplicant.verbs.edit_titlecase\")}\r\n  >\r\n    <EditIcon />\r\n  </ButtonLink>\r\n);\r\nexport default withTranslation()(EditButton);\r\n","import * as React from \"react\";\r\n\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\n\r\nimport Button, { ButtonProps } from \"@material-ui/core/Button\";\r\n\r\nimport { onLinkClick } from \"./utils\";\r\n\r\nexport interface ButtonLinkProps {\r\n  className?: string;\r\n  size?: ButtonProps[\"size\"];\r\n  title?: string;\r\n  to: string;\r\n  disabled?: boolean;\r\n}\r\n\r\ntype Props = ButtonLinkProps & RouteComponentProps;\r\n\r\nclass ButtonLink extends React.Component<Props> {\r\n  private _onClick = onLinkClick.bind(this);\r\n\r\n  render() {\r\n    const {\r\n      className,\r\n      size,\r\n      title,\r\n      history,\r\n      to,\r\n      disabled,\r\n      children\r\n    } = this.props;\r\n    return (\r\n      <Button\r\n        className={className}\r\n        size={size}\r\n        title={title}\r\n        component=\"a\"\r\n        href={history.createHref({ pathname: to })}\r\n        disabled={disabled}\r\n        onClick={this._onClick}\r\n      >\r\n        {children}\r\n      </Button>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(ButtonLink);\r\n","import DuplicantEditorPage from \"./DuplicantEditorPage\";\r\nexport default DuplicantEditorPage;\r\n","import * as React from \"react\";\r\n\r\nimport { RouteComponentProps } from \"react-router\";\r\n\r\nimport AbstractGameObject from \"@/services/oni-save/components/AbstractGameObject\";\r\n\r\nimport RedirectIfNoSave from \"@/components/RedirectIfNoSave\";\r\n\r\nimport DuplicantEditor from \"./components/DuplicantEditor\";\r\nimport DuplicantNotFound from \"./components/DuplicantNotFound\";\r\n\r\nexport interface DuplicantEditorRouteParams {\r\n  gameObjectId: string;\r\n}\r\n\r\nexport interface DuplicantEditorProps\r\n  extends RouteComponentProps<DuplicantEditorRouteParams> {}\r\n\r\ntype Props = DuplicantEditorProps;\r\nconst DuplicantEditorPage: React.FC<Props> = ({\r\n  match: {\r\n    params: { gameObjectId }\r\n  }\r\n}) => (\r\n  <AbstractGameObject gameObjectId={Number(gameObjectId)}>\r\n    {({ gameObjectType }) => (\r\n      <React.Fragment>\r\n        <RedirectIfNoSave />\r\n\r\n        {gameObjectType === \"Minion\" && (\r\n          <DuplicantEditor gameObjectId={Number(gameObjectId)} />\r\n        )}\r\n        {gameObjectType !== \"Minion\" && <DuplicantNotFound />}\r\n      </React.Fragment>\r\n    )}\r\n  </AbstractGameObject>\r\n);\r\nexport default DuplicantEditorPage;\r\n","import AbstractGameObject from \"./AbstractGameObject\";\r\nexport default AbstractGameObject;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AbstractGameObjectProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./state-props\";\r\n\r\ntype Props = AbstractGameObjectProps & StateProps;\r\nclass AbstractGameObject extends React.Component<Props> {\r\n  render() {\r\n    const { children, gameObjectType } = this.props;\r\n    return React.Children.only(children({ gameObjectType }));\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(AbstractGameObject);\r\n","import { AppState } from \"@/state\";\r\n\r\nimport { gameObjectTypesByIdSelector } from \"../../selectors/game-objects\";\r\n\r\nimport { AbstractGameObjectProps } from \"./props\";\r\n\r\nconst gameObjectTypeSelector = (\r\n  state: AppState,\r\n  props: AbstractGameObjectProps\r\n) => {\r\n  const typesById = gameObjectTypesByIdSelector(state);\r\n  const type = typesById[props.gameObjectId];\r\n  if (!type) {\r\n    return null;\r\n  }\r\n  return type;\r\n};\r\n\r\nfunction mapStateToProps(state: AppState, props: AbstractGameObjectProps) {\r\n  return {\r\n    gameObjectType: gameObjectTypeSelector(state, props)\r\n  };\r\n}\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import DuplicantEditor from \"./DuplicantEditor\";\r\nexport default DuplicantEditor;\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation, Trans } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\nimport DuplicantPortrait from \"@/components/DuplicantPortrait\";\r\n\r\nimport DuplicantName from \"./components/DuplicantName\";\r\nimport Traits from \"./components/Traits\";\r\nimport Aptitudes from \"./components/Interests\";\r\nimport Attributes from \"./components/Attributes\";\r\nimport Appearance from \"./components/Appearance\";\r\nimport Skills from \"./components/Skills\";\r\nimport Effects from \"./components/Effects\";\r\nimport Health from \"./components/Health\";\r\n\r\nexport interface DuplicantEditorProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      paddingLeft: theme.spacing(),\r\n      paddingTop: theme.spacing(),\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      width: \"100%\",\r\n      height: \"100%\"\r\n    },\r\n    divider: {\r\n      marginTop: theme.spacing(),\r\n      marginBottom: theme.spacing()\r\n    },\r\n    nameRow: {\r\n      flexGrow: 0,\r\n      flexShrink: 0\r\n    },\r\n    portraitRow: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      marginBottom: theme.spacing(),\r\n      flexGrow: 0,\r\n      flexShrink: 0\r\n    },\r\n    portraitRowColumn: {\r\n      marginRight: theme.spacing()\r\n    },\r\n    portraitRowTweakables: {\r\n      width: \"100%\"\r\n    },\r\n    row: {\r\n      marginBottom: theme.spacing(),\r\n      flexGrow: 0,\r\n      flexShrink: 0\r\n    },\r\n    tabRow: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      marginLeft: -theme.spacing(),\r\n      height: \"100%\"\r\n    },\r\n    tabContent: {\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      overflow: \"auto\"\r\n    }\r\n  });\r\n\r\ntype Props = DuplicantEditorProps & WithTranslation & WithStyles<typeof styles>;\r\n\r\nconst DuplicantEditor: React.FC<Props> = ({ classes, gameObjectId, t }) => {\r\n  const [tab, setTab] = React.useState(0);\r\n  return (\r\n    <PageContainer title={t(\"duplicant.verbs.edit_titlecase\")} back>\r\n      <div className={classes.root}>\r\n        <div className={classes.nameRow}>\r\n          <DuplicantName gameObjectId={gameObjectId} />\r\n        </div>\r\n        <Divider className={classes.divider} />\r\n        <div className={classes.portraitRow}>\r\n          <div className={classes.portraitRowColumn}>\r\n            <Paper>\r\n              <DuplicantPortrait gameObjectId={gameObjectId} scale={0.6} />\r\n            </Paper>\r\n          </div>\r\n          <div className={classes.portraitRowTweakables}>\r\n            <div className={classes.row}>\r\n              <Typography variant=\"h6\">\r\n                <Trans i18nKey=\"duplicant_trait.noun_titlecase\">Traits</Trans>\r\n              </Typography>\r\n              <Divider className={classes.divider} />\r\n              <Traits gameObjectId={gameObjectId} />\r\n            </div>\r\n            <div className={classes.row}>\r\n              <Typography variant=\"h6\">\r\n                <Trans i18nKey=\"duplicant_interest.noun_titlecase\">\r\n                  Interests\r\n                </Trans>\r\n              </Typography>\r\n              <Divider className={classes.divider} />\r\n              <Aptitudes gameObjectId={gameObjectId} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={classes.tabRow}>\r\n          <Paper square>\r\n            <Tabs\r\n              textColor=\"secondary\"\r\n              value={tab}\r\n              onChange={(_, value) => setTab(value)}\r\n            >\r\n              <Tab\r\n                label={t(\"duplicant_attribute.noun_titlecase_plural\", {\r\n                  defaultValue: \"Attributes\"\r\n                })}\r\n              />\r\n              <Tab\r\n                label={t(\"duplicant_appearance.noun_titlecase\", {\r\n                  defaultValue: \"Appearance\"\r\n                })}\r\n              />\r\n              <Tab\r\n                label={t(\"duplicant_health.noun_titlecase\", {\r\n                  defaultValue: \"Health\"\r\n                })}\r\n              />\r\n              <Tab\r\n                label={t(\"duplicant_skills.noun_titlecase_plural\", {\r\n                  defaultValue: \"Skills\"\r\n                })}\r\n              />\r\n              <Tab\r\n                label={t(\"duplicant_effect.noun_titlecase\", {\r\n                  defaultValue: \"Effects\"\r\n                })}\r\n              />\r\n            </Tabs>\r\n          </Paper>\r\n          <div className={classes.tabContent}>\r\n            {tab === 0 && <Attributes gameObjectId={gameObjectId} />}\r\n            {tab === 1 && <Appearance gameObjectId={gameObjectId} />}\r\n            {tab === 2 && <Health gameObjectId={gameObjectId} />}\r\n            {tab === 3 && <Skills gameObjectId={gameObjectId} />}\r\n            {tab === 4 && <Effects gameObjectId={gameObjectId} />}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(withTranslation()(DuplicantEditor));\r\n","import * as React from \"react\";\r\nimport { MinionIdentityBehavior } from \"oni-save-parser\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nconst MinionIdentityEditor = AbstractBehaviorEditor.ofType(\r\n  MinionIdentityBehavior\r\n);\r\n\r\nexport interface DuplicantNameProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst DuplicantName: React.FC<DuplicantNameProps> = ({ gameObjectId }) => (\r\n  <MinionIdentityEditor gameObjectId={gameObjectId}>\r\n    {({ templateData }) => (\r\n      <Typography variant=\"h5\">{templateData.name}</Typography>\r\n    )}\r\n  </MinionIdentityEditor>\r\n);\r\nexport default DuplicantName;\r\n","import Traits from \"./Traits\";\r\nexport default Traits;\r\n","import * as React from \"react\";\r\nimport { AI_TRAIT_IDS, AITraitsBehavior } from \"oni-save-parser\";\r\nimport { difference } from \"lodash-es\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nimport AddTraitButton from \"./components/AddTraitButton\";\r\n\r\nconst TraitsEditor = AbstractBehaviorEditor.ofType(AITraitsBehavior);\r\n\r\nconst CANDIDATE_TRAITS = AI_TRAIT_IDS.filter(x => x !== \"None\");\r\n\r\nexport interface TraitsProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      flexWrap: \"wrap\"\r\n    },\r\n    chip: {\r\n      margin: theme.spacing(0.5)\r\n    }\r\n  });\r\n\r\ntype Props = TraitsProps & WithStyles<typeof styles> & WithTranslation;\r\n\r\nconst Traits: React.FC<Props> = ({ classes, gameObjectId, t }) => {\r\n  return (\r\n    <TraitsEditor gameObjectId={gameObjectId}>\r\n      {({ templateData, onTemplateDataModify }) => {\r\n        const { TraitIds } = templateData;\r\n        const availableTraits = difference(CANDIDATE_TRAITS, TraitIds);\r\n        return (\r\n          <div className={classes.root}>\r\n            {TraitIds.map((trait, i) => (\r\n              <Chip\r\n                key={trait}\r\n                className={classes.chip}\r\n                label={t(`oni:DUPLICANTS.TRAITS.${trait.toUpperCase()}.NAME`, {\r\n                  defaultValue: trait\r\n                })}\r\n                title={t(`oni:DUPLICANTS.TRAITS.${trait.toUpperCase()}.DESC`, {\r\n                  defaultValue: \"\"\r\n                })}\r\n                onDelete={() => {\r\n                  const newTraitIds = [...TraitIds];\r\n                  newTraitIds.splice(i, 1);\r\n                  onTemplateDataModify({\r\n                    TraitIds: newTraitIds\r\n                  });\r\n                }}\r\n              />\r\n            ))}\r\n            <AddTraitButton\r\n              className={classes.chip}\r\n              availableTraits={availableTraits}\r\n              onAddTrait={trait =>\r\n                onTemplateDataModify({ TraitIds: [...TraitIds, trait] })\r\n              }\r\n            />\r\n          </div>\r\n        );\r\n      }}\r\n    </TraitsEditor>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(withTranslation()(Traits));\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation, Trans } from \"react-i18next\";\r\n\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nexport interface AddTraitButtonProps {\r\n  availableTraits: string[];\r\n  className?: string;\r\n  onAddTrait(trait: string): void;\r\n}\r\n\r\ntype Props = AddTraitButtonProps & WithTranslation;\r\n\r\nconst AddTraitButton: React.FC<Props> = ({\r\n  className,\r\n  availableTraits,\r\n  onAddTrait,\r\n  t\r\n}) => {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const chipRef = React.useRef<HTMLDivElement | null>(null);\r\n  return (\r\n    <div className={className}>\r\n      <div ref={chipRef}>\r\n        <Chip\r\n          color=\"primary\"\r\n          label={t(`duplicant_trait.verbs.add_titlecase`)}\r\n          clickable\r\n          onClick={() => setIsOpen(true)}\r\n        />\r\n      </div>\r\n      <Menu\r\n        open={isOpen}\r\n        anchorEl={chipRef.current}\r\n        onClose={() => setIsOpen(false)}\r\n      >\r\n        {isOpen &&\r\n          [...availableTraits].sort().map(trait => (\r\n            <MenuItem\r\n              key={trait}\r\n              value={trait}\r\n              title={t(`oni:DUPLICANTS.TRAITS.${trait.toUpperCase()}.DESC`, {\r\n                defaultValue: \"\"\r\n              })}\r\n              onClick={() => {\r\n                setIsOpen(false);\r\n                onAddTrait(trait);\r\n              }}\r\n            >\r\n              <Trans\r\n                i18nKey={`oni:DUPLICANTS.TRAITS.${trait.toUpperCase()}.NAME`}\r\n              >\r\n                {trait}\r\n              </Trans>\r\n            </MenuItem>\r\n          ))}\r\n      </Menu>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withTranslation()(AddTraitButton);\r\n","import Interests from \"./Interests\";\r\nexport default Interests;\r\n","import * as React from \"react\";\r\nimport {\r\n  MinionSkillGroupNames,\r\n  MinionResumeBehavior,\r\n  getHashedString,\r\n  HashedString\r\n} from \"oni-save-parser\";\r\nimport { findIndex, find, difference } from \"lodash-es\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nimport AddAptitudeButton from \"./components/AddAptitudeButton\";\r\n\r\nconst ResumeEditor = AbstractBehaviorEditor.ofType(MinionResumeBehavior);\r\n\r\nexport interface InterestsProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      flexWrap: \"wrap\"\r\n    },\r\n    chip: {\r\n      margin: theme.spacing(0.5)\r\n    }\r\n  });\r\n\r\ntype Props = InterestsProps & WithStyles<typeof styles> & WithTranslation;\r\n\r\nconst Interests: React.FC<Props> = ({ classes, gameObjectId, t }) => {\r\n  return (\r\n    <ResumeEditor gameObjectId={gameObjectId}>\r\n      {({ templateData: { AptitudeBySkillGroup }, onTemplateDataModify }) => {\r\n        const availableAptitudes = MinionSkillGroupNames.filter(\r\n          aptitudeName =>\r\n            aptitudeValue(AptitudeBySkillGroup, aptitudeName) === 0\r\n        );\r\n\r\n        const selectedAptitudes = difference(\r\n          MinionSkillGroupNames,\r\n          availableAptitudes\r\n        );\r\n\r\n        function removeAptitude(aptitudeName: string) {\r\n          const hashStr = getHashedString(aptitudeName);\r\n          const index = findIndex(\r\n            AptitudeBySkillGroup,\r\n            x => x[0].hash === hashStr.hash\r\n          );\r\n          if (index === -1) {\r\n            return;\r\n          }\r\n          onTemplateDataModify({\r\n            AptitudeBySkillGroup: [\r\n              ...AptitudeBySkillGroup.slice(0, index),\r\n              ...AptitudeBySkillGroup.slice(index + 1)\r\n            ]\r\n          });\r\n        }\r\n\r\n        function addAptitude(aptitudeName: string) {\r\n          const hashStr = getHashedString(aptitudeName);\r\n          const index = findIndex(\r\n            AptitudeBySkillGroup,\r\n            x => x[0].hash === hashStr.hash\r\n          );\r\n          if (index === -1) {\r\n            onTemplateDataModify({\r\n              AptitudeBySkillGroup: [...AptitudeBySkillGroup, [hashStr, 1]]\r\n            });\r\n          } else {\r\n            onTemplateDataModify({\r\n              AptitudeBySkillGroup: [\r\n                ...AptitudeBySkillGroup.slice(0, index),\r\n                [hashStr, 1],\r\n                ...AptitudeBySkillGroup.slice(index + 1)\r\n              ]\r\n            });\r\n          }\r\n        }\r\n\r\n        return (\r\n          <div className={classes.root}>\r\n            {selectedAptitudes.map((aptitudeName, i) => (\r\n              <Chip\r\n                key={i}\r\n                className={classes.chip}\r\n                label={t(`oni:todo-trans.aptitudes.${aptitudeName}`, {\r\n                  defaultValue: aptitudeName\r\n                })}\r\n                onDelete={removeAptitude.bind(null, aptitudeName)}\r\n              />\r\n            ))}\r\n            <AddAptitudeButton\r\n              className={classes.chip}\r\n              availableAptitudes={availableAptitudes}\r\n              onAddAptitude={aptitudeName => addAptitude(aptitudeName)}\r\n            />\r\n          </div>\r\n        );\r\n      }}\r\n    </ResumeEditor>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(withTranslation()(Interests));\r\n\r\nfunction aptitudeValue(\r\n  aptitudes: [HashedString, number][],\r\n  aptitudeName: string\r\n): number {\r\n  const hash = getHashedString(aptitudeName).hash;\r\n  const aptitude = find(aptitudes, x => x[0].hash === hash);\r\n  if (!aptitude) {\r\n    return 0;\r\n  }\r\n  return aptitude[1];\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation, Trans } from \"react-i18next\";\r\n\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nexport interface AddAptitudeButtonProps {\r\n  availableAptitudes: string[];\r\n  className?: string;\r\n  onAddAptitude(aptitude: string): void;\r\n}\r\n\r\ntype Props = AddAptitudeButtonProps & WithTranslation;\r\n\r\nconst AddAptitudeButton: React.FC<Props> = ({\r\n  className,\r\n  availableAptitudes,\r\n  onAddAptitude,\r\n  t\r\n}) => {\r\n  const [isOpen, setIsOpen] = React.useState(false);\r\n  const chipRef = React.useRef<HTMLDivElement | null>(null);\r\n  return (\r\n    <div className={className}>\r\n      <div ref={chipRef}>\r\n        <Chip\r\n          color=\"primary\"\r\n          label={t(`duplicant_interest.verbs.add_titlecase`)}\r\n          clickable\r\n          onClick={() => setIsOpen(true)}\r\n        />\r\n      </div>\r\n      <Menu\r\n        open={isOpen}\r\n        anchorEl={chipRef.current}\r\n        onClose={() => setIsOpen(false)}\r\n      >\r\n        {isOpen &&\r\n          [...availableAptitudes].sort().map(trait => (\r\n            <MenuItem\r\n              key={trait}\r\n              value={trait}\r\n              title={t(`oni:DUPLICANTS.APTITUDES.${trait.toUpperCase()}.DESC`, {\r\n                defaultValue: \"\"\r\n              })}\r\n              onClick={() => {\r\n                setIsOpen(false);\r\n                onAddAptitude(trait);\r\n              }}\r\n            >\r\n              <Trans\r\n                i18nKey={`oni:DUPLICANTS.APTITUDES.${trait.toUpperCase()}.NAME`}\r\n              >\r\n                {trait}\r\n              </Trans>\r\n            </MenuItem>\r\n          ))}\r\n      </Menu>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withTranslation()(AddAptitudeButton);\r\n","import Attributes from \"./Attributes\";\r\nexport default Attributes;\r\n","import * as React from \"react\";\r\nimport { AIAttributeLevelsBehavior, AttributeLevel } from \"oni-save-parser\";\r\nimport { findIndex, merge } from \"lodash-es\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nimport AttributeName from \"./components/AttributeName\";\r\nimport AttributeField from \"./components/AttributeField\";\r\n\r\nconst AttributesEditor = AbstractBehaviorEditor.ofType(\r\n  AIAttributeLevelsBehavior\r\n);\r\n\r\nconst PRIMARY_ATTRIBUTES = [\r\n  \"Athletics\",\r\n  \"Cooking\",\r\n  \"Digging\",\r\n  \"Caring\",\r\n  \"Ranching\",\r\n  \"Machinery\",\r\n  \"Construction\",\r\n  \"Art\",\r\n  \"Botanist\",\r\n  \"Learning\",\r\n  \"Strength\"\r\n];\r\n\r\nexport interface AttributesProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      width: \"100%\",\r\n      height: \"100%\"\r\n    },\r\n    header: {\r\n      marginTop: theme.spacing(),\r\n      marginLeft: theme.spacing()\r\n    },\r\n    divider: {\r\n      marginTop: theme.spacing(),\r\n      marginBottom: theme.spacing()\r\n    },\r\n    attributeList: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      flexWrap: \"wrap\",\r\n      height: theme.spacing(20),\r\n      padding: theme.spacing()\r\n    },\r\n    attributeItem: {\r\n      margin: theme.spacing(0.5),\r\n      display: \"flex\",\r\n      flexDirection: \"row\"\r\n    },\r\n    attributeInput: {\r\n      width: 50,\r\n      marginRight: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = AttributesProps & WithStyles<typeof styles>;\r\n\r\nconst Attributes: React.FC<Props> = ({ classes, gameObjectId }) => (\r\n  <AttributesEditor gameObjectId={gameObjectId}>\r\n    {({ templateData: { saveLoadLevels } }) => (\r\n      <div className={classes.root}>\r\n        <Typography className={classes.header} variant=\"h6\">\r\n          <Trans i18nKey=\"duplicant_attribute.primary_titlecase\">Primary</Trans>\r\n        </Typography>\r\n        <Divider className={classes.divider} />\r\n        <div className={classes.attributeList}>\r\n          {PRIMARY_ATTRIBUTES.map(attributeId => (\r\n            <div key={attributeId} className={classes.attributeItem}>\r\n              <AttributeField\r\n                className={classes.attributeInput}\r\n                gameObjectId={gameObjectId}\r\n                attributeId={attributeId}\r\n              />\r\n              <AttributeName attributeId={attributeId} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <Typography className={classes.header} variant=\"h6\">\r\n          <Trans i18nKey=\"duplicant_attribute.secondary_titlecase\">\r\n            Secondary\r\n          </Trans>\r\n        </Typography>\r\n        <Divider className={classes.divider} />\r\n        <div className={classes.attributeList}>\r\n          {nonPrimaryAttributeIds(saveLoadLevels).map(attributeId => (\r\n            <div key={attributeId} className={classes.attributeItem}>\r\n              <AttributeField\r\n                className={classes.attributeInput}\r\n                gameObjectId={gameObjectId}\r\n                attributeId={attributeId}\r\n              />\r\n              <AttributeName attributeId={attributeId} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    )}\r\n  </AttributesEditor>\r\n);\r\n\r\nexport default withStyles(styles)(Attributes);\r\n\r\nfunction nonPrimaryAttributeIds(attributes: AttributeLevel[]): string[] {\r\n  return attributes\r\n    .map(x => x.attributeId)\r\n    .filter(x => PRIMARY_ATTRIBUTES.indexOf(x) === -1);\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport interface AttributeNameProps {\r\n  attributeId: string;\r\n}\r\n\r\ntype Props = AttributeNameProps & WithTranslation;\r\nconst AttributeName: React.FC<Props> = ({ attributeId, t }) => (\r\n  <Typography\r\n    component=\"span\"\r\n    variant=\"body1\"\r\n    title={t(`oni:DUPLICANTS.ATTRIBUTES.${attributeId}.DESC`, {\r\n      defaultValue: \"\"\r\n    })}\r\n  >\r\n    {t(`oni:DUPLICANTS.ATTRIBUTES.${attributeId}.NAME`, {\r\n      defaultValue: attributeId\r\n    })}\r\n  </Typography>\r\n);\r\n\r\nexport default withTranslation()(AttributeName);\r\n","import * as React from \"react\";\r\nimport { AIAttributeLevelsBehavior } from \"oni-save-parser\";\r\nimport { findIndex } from \"lodash-es\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nimport CommitTextField from \"@/components/CommitTextField\";\r\n\r\nconst AttributesEditor = AbstractBehaviorEditor.ofType(\r\n  AIAttributeLevelsBehavior\r\n);\r\n\r\nexport interface AttributeFieldProps {\r\n  className?: string;\r\n  gameObjectId: number;\r\n  attributeId: string;\r\n}\r\n\r\ntype Props = AttributeFieldProps;\r\nconst AttributeField: React.FC<Props> = ({\r\n  className,\r\n  gameObjectId,\r\n  attributeId\r\n}) => {\r\n  return (\r\n    <AttributesEditor gameObjectId={gameObjectId}>\r\n      {({ templateData: { saveLoadLevels }, onTemplateDataModify }) => {\r\n        const attrIndex = findIndex(\r\n          saveLoadLevels,\r\n          x => x.attributeId === attributeId\r\n        );\r\n        if (attrIndex === -1) {\r\n          return <Typography>Attribute Not Found</Typography>;\r\n        }\r\n        const attr = saveLoadLevels[attrIndex];\r\n        const { level } = attr;\r\n        return (\r\n          <CommitTextField\r\n            className={className}\r\n            type=\"number\"\r\n            value={level}\r\n            onCommit={value => {\r\n              const newLevels = [...saveLoadLevels];\r\n              newLevels[attrIndex] = { ...attr, level: Number(value) };\r\n              onTemplateDataModify({\r\n                saveLoadLevels: newLevels\r\n              });\r\n            }}\r\n          />\r\n        );\r\n      }}\r\n    </AttributesEditor>\r\n  );\r\n};\r\n\r\nexport default AttributeField;\r\n","import * as React from \"react\";\r\n\r\nimport TextField, { TextFieldProps } from \"@material-ui/core/TextField\";\r\n\r\nexport type CommitTextFieldProps = TextFieldProps & {\r\n  onCommit?(value: string): void;\r\n};\r\n\r\ninterface State {\r\n  value: string | null;\r\n}\r\nclass CommitTextField extends React.Component<CommitTextFieldProps, State> {\r\n  constructor(props: CommitTextFieldProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      value: null\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      onCommit,\r\n      onChange,\r\n      onBlur,\r\n      onKeyPress,\r\n      value: prevValue,\r\n      ...props\r\n    } = this.props;\r\n    const { value: editValue } = this.state;\r\n    return (\r\n      <TextField\r\n        {...props}\r\n        value={editValue || prevValue}\r\n        onChange={this._onChange}\r\n        onBlur={this._onBlur}\r\n        onKeyPress={this._onKeyPress}\r\n      />\r\n    );\r\n  }\r\n\r\n  private _onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { onChange } = this.props;\r\n    if (onChange) {\r\n      onChange(e);\r\n    }\r\n\r\n    this.setState({ value: e.target.value });\r\n  };\r\n\r\n  private _onKeyPress = (e: React.KeyboardEvent<HTMLDivElement>) => {\r\n    const { onKeyPress } = this.props;\r\n    if (onKeyPress) {\r\n      onKeyPress(e);\r\n    }\r\n\r\n    if (e.key === \"Enter\") {\r\n      this._commit();\r\n    }\r\n  };\r\n\r\n  private _onBlur = (e: React.FocusEvent) => {\r\n    const { onBlur } = this.props;\r\n    if (onBlur) {\r\n      onBlur(e);\r\n    }\r\n\r\n    this._commit();\r\n  };\r\n\r\n  private _commit() {\r\n    const { value: prevValue, onCommit } = this.props;\r\n    const { value } = this.state;\r\n    if (onCommit && value && value !== prevValue) {\r\n      onCommit(value);\r\n    }\r\n\r\n    this.setState({\r\n      value: null\r\n    });\r\n  }\r\n}\r\n\r\nexport default CommitTextField;\r\n","import Appearance from \"./Appearance\";\r\nexport default Appearance;\r\n","import * as React from \"react\";\r\nimport {\r\n  AccessorizerBehavior,\r\n  getAccessoryOfType,\r\n  Accessory,\r\n  AccessoryType,\r\n  getAccessoryName,\r\n  getIndexOfAccessoryType\r\n} from \"oni-save-parser\";\r\nimport { merge, padStart } from \"lodash-es\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nconst AccessorizerEditor = AbstractBehaviorEditor.ofType(AccessorizerBehavior);\r\n\r\nimport HeadPortrait from \"./components/HeadPortrait\";\r\nimport Portrait from \"./components/Portrait\";\r\n\r\nexport interface AppearanceProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      width: \"100%\",\r\n      height: \"100%\"\r\n    },\r\n    tabContent: {\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      overflow: \"auto\"\r\n    },\r\n    partList: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      flexWrap: \"wrap\"\r\n    },\r\n    partContainer: {\r\n      margin: theme.spacing(0.5)\r\n    },\r\n    part: {\r\n      cursor: \"pointer\"\r\n    }\r\n  });\r\n\r\ntype Props = AppearanceProps & WithStyles<typeof styles>;\r\n\r\nconst Appearance: React.FC<Props> = ({ classes, gameObjectId }) => {\r\n  const [tab, setTab] = React.useState(0);\r\n\r\n  return (\r\n    <AccessorizerEditor gameObjectId={gameObjectId}>\r\n      {({ templateData: { accessories }, onTemplateDataModify }) => {\r\n        const hairOrdinal = getOrdinalOfType(accessories, \"hair\");\r\n        const headOrdinal = getOrdinalOfType(accessories, \"headshape\");\r\n        const eyesOrdinal = getOrdinalOfType(accessories, \"eyes\");\r\n\r\n        function setAccessory(type: AccessoryType, ordinal: number) {\r\n          const index = getIndexOfAccessoryType(accessories, type);\r\n          if (index === -1) {\r\n            return;\r\n          }\r\n          const accessoryMod: Record<number, Accessory> = {\r\n            [index]: Accessory(`${type}_${padStart(String(ordinal), 3, \"0\")}`)\r\n          };\r\n          if (type === \"hair\") {\r\n            const hatHair = getIndexOfAccessoryType(accessories, \"hat_hair\");\r\n            if (hatHair !== -1) {\r\n              accessoryMod[hatHair] = Accessory(\r\n                `hat_hair_${padStart(String(ordinal), 3, \"0\")}`\r\n              );\r\n            }\r\n            const hairAlways = getIndexOfAccessoryType(\r\n              accessories,\r\n              \"hair_always\"\r\n            );\r\n            if (hairAlways !== -1) {\r\n              accessoryMod[hairAlways] = Accessory(\r\n                `hair_always_${padStart(String(ordinal), 3, \"0\")}`\r\n              );\r\n            }\r\n          }\r\n          if (type === \"body\") {\r\n            const arm = getIndexOfAccessoryType(accessories, \"arm\");\r\n            accessoryMod[arm] = Accessory(\r\n              `arm_${padStart(String(ordinal), 3, \"0\")}`\r\n            );\r\n          }\r\n          onTemplateDataModify({\r\n            accessories: merge([], accessories, accessoryMod)\r\n          });\r\n        }\r\n\r\n        function makeSetAccessory(type: AccessoryType, ordinal: number) {\r\n          return (e: React.MouseEvent<HTMLDivElement>) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            setAccessory(type, ordinal);\r\n          };\r\n        }\r\n\r\n        return (\r\n          <div className={classes.root}>\r\n            <Paper square>\r\n              <Tabs\r\n                textColor=\"secondary\"\r\n                value={tab}\r\n                onChange={(_, value) => setTab(value)}\r\n              >\r\n                <Tab label=\"Hair\" />\r\n                <Tab label=\"Head\" />\r\n                <Tab label=\"Eyes\" />\r\n                <Tab label=\"Body\" />\r\n              </Tabs>\r\n            </Paper>\r\n            <div className={classes.tabContent}>\r\n              {tab === 0 && (\r\n                <div className={classes.partList}>\r\n                  {ordinalRange(33).map(ordinal => (\r\n                    <HeadPortrait\r\n                      key={ordinal}\r\n                      className={classes.partContainer}\r\n                      hairOrdinal={ordinal}\r\n                      headOrdinal={headOrdinal}\r\n                      eyesOrdinal={eyesOrdinal}\r\n                      clickable\r\n                      onClick={makeSetAccessory(\"hair\", ordinal)}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n              {tab === 1 && (\r\n                <div className={classes.partList}>\r\n                  {ordinalRange(4).map(ordinal => (\r\n                    <HeadPortrait\r\n                      key={ordinal}\r\n                      className={classes.partContainer}\r\n                      hairOrdinal={hairOrdinal}\r\n                      headOrdinal={ordinal}\r\n                      eyesOrdinal={eyesOrdinal}\r\n                      clickable\r\n                      onClick={makeSetAccessory(\"headshape\", ordinal)}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n              {tab === 2 && (\r\n                <div className={classes.partList}>\r\n                  {ordinalRange(5).map(ordinal => (\r\n                    <HeadPortrait\r\n                      key={ordinal}\r\n                      className={classes.partContainer}\r\n                      hairOrdinal={hairOrdinal}\r\n                      headOrdinal={headOrdinal}\r\n                      eyesOrdinal={ordinal}\r\n                      clickable\r\n                      onClick={makeSetAccessory(\"eyes\", ordinal)}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n              {tab === 3 && (\r\n                <div className={classes.partList}>\r\n                  {ordinalRange(4).map(ordinal => (\r\n                    <Portrait\r\n                      key={ordinal}\r\n                      className={classes.partContainer}\r\n                      hairOrdinal={hairOrdinal}\r\n                      headOrdinal={headOrdinal}\r\n                      eyesOrdinal={eyesOrdinal}\r\n                      bodyOrdinal={ordinal}\r\n                      clickable\r\n                      onClick={makeSetAccessory(\"body\", ordinal)}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      }}\r\n    </AccessorizerEditor>\r\n  );\r\n};\r\nexport default withStyles(styles)(Appearance);\r\n\r\nfunction getOrdinalOfType(\r\n  accessories: Accessory[],\r\n  type: AccessoryType\r\n): number {\r\n  const accessory = getAccessoryOfType(accessories, type);\r\n  if (accessory == null) {\r\n    return 1;\r\n  }\r\n\r\n  return ordinalFromAccessory(accessory.guid.Guid);\r\n}\r\n\r\nfunction ordinalFromAccessory(guid: string) {\r\n  const name = getAccessoryName(guid);\r\n  if (!name) {\r\n    return 1;\r\n  }\r\n  const parts = name.split(\"_\");\r\n  return Number(parts[parts.length - 1]);\r\n}\r\n\r\nfunction ordinalRange(length: number): number[] {\r\n  return Array.from({ length }, (_, i) => i + 1);\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport classnames from \"classnames\";\r\n\r\nimport { DuplicantContainer, Hair, Head, Eyes } from \"react-oni-duplicant\";\r\n\r\nimport { createStyles, withStyles, WithStyles } from \"@material-ui/core/styles\";\r\n\r\nexport interface HeadPortraitProps {\r\n  className?: string;\r\n  clickable?: boolean;\r\n  hairOrdinal: number;\r\n  headOrdinal: number;\r\n  eyesOrdinal: number;\r\n  onClick?(e: React.MouseEvent<HTMLDivElement>): void;\r\n}\r\n\r\nconst styles = createStyles({\r\n  portraitContainer: {\r\n    position: \"relative\",\r\n    width: 110,\r\n    height: 100\r\n  },\r\n  portrait: {\r\n    position: \"absolute\",\r\n    top: 85,\r\n    left: 56,\r\n    width: 250,\r\n    height: 250,\r\n    transform: \"scale(.4)\",\r\n    transformOrigin: \"top left\"\r\n  },\r\n  clickable: {\r\n    cursor: \"pointer\"\r\n  }\r\n});\r\n\r\ntype Props = HeadPortraitProps & WithStyles<typeof styles>;\r\n\r\nconst HeadPortrait: React.FC<Props> = ({\r\n  className,\r\n  classes,\r\n  hairOrdinal,\r\n  headOrdinal,\r\n  eyesOrdinal,\r\n  clickable,\r\n  onClick\r\n}) => (\r\n  <div\r\n    className={classnames(className, classes.portraitContainer)}\r\n    onClick={onClick}\r\n  >\r\n    <div className={classes.portrait}>\r\n      <DuplicantContainer>\r\n        <Head\r\n          className={classnames(clickable && classes.clickable)}\r\n          ordinal={headOrdinal}\r\n        />\r\n        <Eyes\r\n          className={classnames(clickable && classes.clickable)}\r\n          ordinal={eyesOrdinal}\r\n        />\r\n        <Hair\r\n          className={classnames(clickable && classes.clickable)}\r\n          ordinal={hairOrdinal}\r\n        />\r\n      </DuplicantContainer>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default withStyles(styles)(HeadPortrait);\r\n","import * as React from \"react\";\r\n\r\nimport classnames from \"classnames\";\r\n\r\nimport {\r\n  DuplicantContainer,\r\n  Hair,\r\n  Head,\r\n  Eyes,\r\n  Body\r\n} from \"react-oni-duplicant\";\r\n\r\nimport { createStyles, withStyles, WithStyles } from \"@material-ui/core/styles\";\r\n\r\nexport interface PortraitProps {\r\n  className?: string;\r\n  clickable?: boolean;\r\n  hairOrdinal: number;\r\n  headOrdinal: number;\r\n  eyesOrdinal: number;\r\n  bodyOrdinal: number;\r\n  onClick?(e: React.MouseEvent<HTMLDivElement>): void;\r\n}\r\n\r\nconst styles = createStyles({\r\n  portraitContainer: {\r\n    position: \"relative\",\r\n    width: 110,\r\n    height: 140\r\n  },\r\n  portrait: {\r\n    position: \"absolute\",\r\n    top: 85,\r\n    left: 56,\r\n    width: 250,\r\n    height: 250,\r\n    transform: \"scale(.4)\",\r\n    transformOrigin: \"top left\"\r\n  },\r\n  clickable: {\r\n    cursor: \"pointer\"\r\n  }\r\n});\r\n\r\ntype Props = PortraitProps & WithStyles<typeof styles>;\r\n\r\nconst Portrait: React.FC<Props> = ({\r\n  className,\r\n  classes,\r\n  hairOrdinal,\r\n  headOrdinal,\r\n  eyesOrdinal,\r\n  bodyOrdinal,\r\n  clickable,\r\n  onClick\r\n}) => (\r\n  <div\r\n    className={classnames(className, classes.portraitContainer)}\r\n    onClick={onClick}\r\n  >\r\n    <div className={classes.portrait}>\r\n      <DuplicantContainer>\r\n        <Body\r\n          className={classnames(clickable && classes.clickable)}\r\n          ordinal={bodyOrdinal}\r\n        />\r\n        <Head\r\n          className={classnames(clickable && classes.clickable)}\r\n          ordinal={headOrdinal}\r\n        />\r\n        <Eyes\r\n          className={classnames(clickable && classes.clickable)}\r\n          ordinal={eyesOrdinal}\r\n        />\r\n        <Hair\r\n          className={classnames(clickable && classes.clickable)}\r\n          ordinal={hairOrdinal}\r\n        />\r\n      </DuplicantContainer>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default withStyles(styles)(Portrait);\r\n","import Skills from \"./Skills\";\r\nexport default Skills;\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport Experience from \"./components/Experience\";\r\nimport Masteries from \"./components/Masteries\";\r\n\r\nexport interface SkillsProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      padding: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = SkillsProps & WithStyles<typeof styles>;\r\n\r\nconst Skills: React.FC<Props> = ({ gameObjectId, classes }) => (\r\n  <div className={classes.root}>\r\n    <Experience gameObjectId={gameObjectId} />\r\n    <Masteries gameObjectId={gameObjectId} />\r\n  </div>\r\n);\r\n\r\nexport default withStyles(styles)(Skills);\r\n","import Experience from \"./component\";\r\nimport connectExperience from \"./connector\";\r\nexport default connectExperience(Experience);\r\n","import * as React from \"react\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nexport interface ExperienceProps {\r\n  experience: number;\r\n  setExperience(experience: number): void;\r\n}\r\n\r\nconst Experience: React.FC<ExperienceProps> = ({\r\n  experience,\r\n  setExperience\r\n}) => {\r\n  const onSetExperience = React.useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      setExperience(Number(e.target.value));\r\n    },\r\n    [setExperience]\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Typography>\r\n        <Trans i18nKey=\"duplicant_skills.experience_titlecase\">\r\n          Experience\r\n        </Trans>\r\n      </Typography>\r\n      <TextField type=\"number\" value={experience} onChange={onSetExperience} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Experience;\r\n","import { MinionResumeBehavior } from \"oni-save-parser\";\r\nimport { createSelector } from \"reselect\";\r\nimport { Dispatch } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\nimport { getBehaviorSelector } from \"@/services/oni-save/selectors/behaviors\";\r\nimport { modifyBehaviorPath } from \"@/services/oni-save/actions/modify-behavior-path\";\r\n\r\nexport interface ExperienceConnectorProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst experienceSelector = createSelector(\r\n  getBehaviorSelector(MinionResumeBehavior),\r\n  resume => {\r\n    if (!resume) {\r\n      return 0;\r\n    }\r\n    return resume.templateData.totalExperienceGained;\r\n  }\r\n);\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  experience: experienceSelector\r\n});\r\n\r\nfunction mapDispatchToProps(\r\n  dispatch: Dispatch,\r\n  ownProps: ExperienceConnectorProps\r\n) {\r\n  const { gameObjectId } = ownProps;\r\n  return {\r\n    setExperience(experience: number) {\r\n      if (experience < 0) {\r\n        experience = 0;\r\n      }\r\n\r\n      const action = modifyBehaviorPath(\r\n        gameObjectId,\r\n        MinionResumeBehavior,\r\n        [\"templateData\", \"totalExperienceGained\"],\r\n        experience\r\n      );\r\n\r\n      dispatch(action);\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n);\r\n","import createCachedSelector, { ParametricSelector } from \"re-reselect\";\r\nimport { has } from \"lodash-es\";\r\nimport { getBehavior, GameObjectBehavior, BehaviorName } from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport { gameObjectsByIdSelector } from \"./game-objects\";\r\n\r\nexport interface BehaviorSelectorProps {\r\n  gameObjectId: number;\r\n}\r\nconst gameObjectIdSelector = (_: any, props: BehaviorSelectorProps) =>\r\n  props.gameObjectId;\r\nconst behaviorSelectorCache: Record<\r\n  string,\r\n  ParametricSelector<AppState, BehaviorSelectorProps, any>\r\n> = {};\r\nexport function getBehaviorSelector<T extends GameObjectBehavior>(\r\n  behaviorName: BehaviorName<T>\r\n): ParametricSelector<AppState, BehaviorSelectorProps, T | null> {\r\n  if (!has(behaviorSelectorCache, behaviorName)) {\r\n    behaviorSelectorCache[behaviorName] = createCachedSelector(\r\n      gameObjectsByIdSelector,\r\n      gameObjectIdSelector,\r\n      (gameObjectsById, gameObjectId) => {\r\n        const gameObject = gameObjectsById[gameObjectId];\r\n        if (!gameObject) {\r\n          return null;\r\n        }\r\n\r\n        return getBehavior(gameObject, behaviorName);\r\n      }\r\n    )(gameObjectIdSelector);\r\n  }\r\n\r\n  return behaviorSelectorCache[behaviorName];\r\n}\r\n","import * as React from \"react\";\r\nimport { MinionResumeBehavior, MinionSkillNames } from \"oni-save-parser\";\r\nimport { find, findIndex } from \"lodash-es\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\nconst ResumeEditor = AbstractBehaviorEditor.ofType<MinionResumeBehavior>(\r\n  MinionResumeBehavior\r\n);\r\n\r\nexport interface MasteriesProps {\r\n  gameObjectId: number;\r\n}\r\n\r\ntype Props = MasteriesProps;\r\nconst Masteries: React.FC<Props> = ({ gameObjectId }) => (\r\n  <ResumeEditor gameObjectId={gameObjectId}>\r\n    {({ templateData: { MasteryBySkillID }, onTemplateDataModify }) => {\r\n      function onChangeMastery(skillName: string, value: boolean) {\r\n        const index = findIndex(MasteryBySkillID, x => x[0] === skillName);\r\n        if (value) {\r\n          if (index !== -1) {\r\n            onTemplateDataModify({\r\n              MasteryBySkillID: [\r\n                ...MasteryBySkillID.slice(0, index),\r\n                [skillName, true],\r\n                ...MasteryBySkillID.slice(index + 1)\r\n              ]\r\n            });\r\n          } else {\r\n            onTemplateDataModify({\r\n              MasteryBySkillID: [...MasteryBySkillID, [skillName, true]]\r\n            });\r\n          }\r\n        } else if (index !== -1) {\r\n          onTemplateDataModify({\r\n            MasteryBySkillID: [\r\n              ...MasteryBySkillID.slice(0, index),\r\n              ...MasteryBySkillID.slice(index + 1)\r\n            ]\r\n          });\r\n        }\r\n      }\r\n      return (\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>\r\n                <Trans i18nKey=\"duplicant_skills.noun_titlecase\">Skill</Trans>\r\n              </TableCell>\r\n              <TableCell>\r\n                <Trans i18nKey=\"duplicant_skills.mastery_titlecase\">\r\n                  Mastery\r\n                </Trans>\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {MinionSkillNames.map(skillName => (\r\n              <TableRow key={skillName}>\r\n                <TableCell>{skillName}</TableCell>\r\n                <TableCell>\r\n                  <Checkbox\r\n                    checked={getMastery(MasteryBySkillID, skillName)}\r\n                    onChange={(_, value) => onChangeMastery(skillName, value)}\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      );\r\n    }}\r\n  </ResumeEditor>\r\n);\r\n\r\nexport default Masteries;\r\n\r\nfunction getMastery(masteries: [string, boolean][], mastery: string): boolean {\r\n  const entry = find(masteries, x => x[0] === mastery);\r\n  if (!entry) {\r\n    return false;\r\n  }\r\n  return entry[1];\r\n}\r\n","import Effects from \"./Effects\";\r\nexport default Effects;\r\n","import * as React from \"react\";\r\nimport { AIEffectsBehavior } from \"oni-save-parser\";\r\nimport { merge } from \"lodash-es\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nimport CommitTextField from \"@/components/CommitTextField\";\r\n\r\nimport AddEffectButton from \"./components/AddEffectButton\";\r\n\r\nconst EffectsEditor = AbstractBehaviorEditor.ofType(AIEffectsBehavior);\r\n\r\nexport interface EffectsProps {\r\n  gameObjectId: number;\r\n}\r\n\r\ntype Props = EffectsProps;\r\nconst Effects: React.FC<Props> = ({ gameObjectId }) => {\r\n  return (\r\n    <EffectsEditor gameObjectId={gameObjectId}>\r\n      {({ templateData, onTemplateDataModify }) => (\r\n        <Table>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>\r\n                <Trans i18nKey=\"duplicant_effect.noun_titlecase\">Effect</Trans>\r\n              </TableCell>\r\n              <TableCell align=\"right\">\r\n                <Trans i18nKey=\"time_cycles.noun_titlecase\">\r\n                  Time (cycles)\r\n                </Trans>\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {templateData.saveLoadEffects.map(({ id, timeRemaining }, i) => (\r\n              <TableRow key={id}>\r\n                <TableCell component=\"th\" scope=\"row\">\r\n                  <Trans i18nKey={`oni:todo-trans.effects.${id}`}>{id}</Trans>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  <CommitTextField\r\n                    type=\"number\"\r\n                    value={timeRemaining / 200}\r\n                    onCommit={value =>\r\n                      onTemplateDataModify({\r\n                        saveLoadEffects: merge(\r\n                          [],\r\n                          templateData.saveLoadEffects,\r\n                          {\r\n                            [i]: { id, timeRemaining: Number(value) * 200 }\r\n                          }\r\n                        )\r\n                      })\r\n                    }\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n            <TableRow>\r\n              <TableCell colSpan={2} align=\"right\">\r\n                <AddEffectButton gameObjectId={gameObjectId} />\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      )}\r\n    </EffectsEditor>\r\n  );\r\n};\r\n\r\nexport default Effects;\r\n","import * as React from \"react\";\r\nimport { AI_EFFECT_IDS, AIEffectsBehavior } from \"oni-save-parser\";\r\nimport { difference } from \"lodash-es\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\nimport AddEffectDialog from \"./AddEffectDialog\";\r\n\r\nconst EffectsEditor = AbstractBehaviorEditor.ofType(AIEffectsBehavior);\r\n\r\nexport interface AddEffectButtonProps {\r\n  gameObjectId: number;\r\n}\r\n\r\ntype Props = AddEffectButtonProps;\r\nconst AddEffectButton: React.FC<Props> = ({ gameObjectId }) => {\r\n  const [isAddingEffect, setIsAddingEffect] = React.useState(false);\r\n  return (\r\n    <EffectsEditor gameObjectId={gameObjectId}>\r\n      {({ templateData, onTemplateDataModify }) => {\r\n        const currentEffects = templateData.saveLoadEffects.map(x => x.id);\r\n        const availableEffects = difference(AI_EFFECT_IDS, currentEffects);\r\n        return (\r\n          <React.Fragment>\r\n            <Button color=\"primary\" onClick={() => setIsAddingEffect(true)}>\r\n              <Trans i18nKey=\"duplicant_effects.verbs.add_titlecase\">\r\n                Add Effect\r\n              </Trans>\r\n            </Button>\r\n            <AddEffectDialog\r\n              open={isAddingEffect}\r\n              availableEffects={availableEffects}\r\n              onClose={() => setIsAddingEffect(false)}\r\n              onAddEffect={(id, timeRemaining) => {\r\n                setIsAddingEffect(false);\r\n                onTemplateDataModify({\r\n                  saveLoadEffects: [\r\n                    ...templateData.saveLoadEffects,\r\n                    { id, timeRemaining }\r\n                  ]\r\n                });\r\n              }}\r\n            />\r\n          </React.Fragment>\r\n        );\r\n      }}\r\n    </EffectsEditor>\r\n  );\r\n};\r\n\r\nexport default AddEffectButton;\r\n","import * as React from \"react\";\r\n\r\nimport { Trans, WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\n\r\nexport interface AddEffectDialogProps {\r\n  open: boolean;\r\n  availableEffects: string[];\r\n  onClose(): void;\r\n  onAddEffect(effect: string, time: number): void;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    cycleTime: {\r\n      marginTop: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = AddEffectDialogProps & WithTranslation & WithStyles<typeof styles>;\r\n\r\nconst AddEffectDialog: React.FC<Props> = ({\r\n  classes,\r\n  open,\r\n  availableEffects,\r\n  onClose,\r\n  onAddEffect,\r\n  t\r\n}) => {\r\n  const [selectedEffect, setSelectedEffect] = React.useState(\"\");\r\n  const [timeRemaining, setTimeRemaining] = React.useState(5);\r\n  return (\r\n    <Dialog open={open} aria-labelledby=\"form-dialog-title\">\r\n      <DialogTitle id=\"form-dialog-title\">\r\n        <Trans i18nKey=\"duplicant_effects.verbs.add_titlecase\">\r\n          Add Effect\r\n        </Trans>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <FormGroup>\r\n          <FormControl>\r\n            <InputLabel htmlFor=\"duplicant-effect\">\r\n              <Trans i18nKey=\"duplicant_effect.noun_titlecase\">Effect</Trans>\r\n            </InputLabel>\r\n            <Select\r\n              value={selectedEffect}\r\n              onChange={e => setSelectedEffect(e.target.value as string)}\r\n              inputProps={{ id: \"duplicant-effect\" }}\r\n            >\r\n              {availableEffects.map(effect => (\r\n                <MenuItem key={effect} value={effect}>\r\n                  <Trans i18nKey={`oni:todo-trans.effects.${effect}`}>\r\n                    {effect}\r\n                  </Trans>\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          <TextField\r\n            className={classes.cycleTime}\r\n            label={t(\"time_cycles.noun_titlecase\")}\r\n            type=\"number\"\r\n            value={timeRemaining}\r\n            onChange={e => setTimeRemaining(Number(e.target.value))}\r\n          />\r\n        </FormGroup>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={() => onClose()}>\r\n          <Trans i18nKey=\"dialog.verbs.cancel_titlecase\">Cancel</Trans>\r\n        </Button>\r\n        <Button\r\n          disabled={selectedEffect === \"\" || timeRemaining <= 0}\r\n          onClick={() => {\r\n            setSelectedEffect(\"\");\r\n            onAddEffect(selectedEffect, timeRemaining * 200);\r\n          }}\r\n        >\r\n          <Trans i18nKey=\"duplicant_effects.verbs.add_titlecase\">\r\n            Add Effect\r\n          </Trans>\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(withTranslation()(AddEffectDialog));\r\n","import Health from \"./Health\";\r\nexport default Health;\r\n","import * as React from \"react\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport Value from \"./components/Value\";\r\n\r\nexport interface HealthProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      width: \"100%\",\r\n      height: \"100%\"\r\n    },\r\n    header: {\r\n      marginTop: theme.spacing(),\r\n      marginLeft: theme.spacing()\r\n    },\r\n    divider: {\r\n      marginTop: theme.spacing(),\r\n      marginBottom: theme.spacing()\r\n    },\r\n    group: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      flexWrap: \"wrap\",\r\n      padding: theme.spacing()\r\n    },\r\n    value: {\r\n      width: 300,\r\n      marginTop: theme.spacing(),\r\n      marginLeft: theme.spacing(2),\r\n      marginRight: theme.spacing(2)\r\n    }\r\n  });\r\n\r\ntype Props = HealthProps & WithStyles<typeof styles>;\r\n\r\nconst Health: React.FC<Props> = ({ classes, gameObjectId }) => (\r\n  <div className={classes.root}>\r\n    <Typography className={classes.header} variant=\"h6\">\r\n      <Trans>Fitness</Trans>\r\n    </Typography>\r\n    <Divider className={classes.divider} />\r\n    <div className={classes.group}>\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"HitPoints\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"Stamina\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"Calories\"\r\n        max={4000000}\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"Breath\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"Bladder\"\r\n      />\r\n    </div>\r\n    <Typography className={classes.header} variant=\"h6\">\r\n      <Trans>Mind</Trans>\r\n    </Typography>\r\n    <Divider className={classes.divider} />\r\n    <div className={classes.group}>\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"Stress\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"Decor\"\r\n      />\r\n    </div>\r\n    <Typography className={classes.header} variant=\"h6\">\r\n      <Trans>Disease</Trans>\r\n    </Typography>\r\n    <Divider className={classes.divider} />\r\n    <div className={classes.group}>\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"ImmuneLevel\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"Toxicity\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"FoodPoisoning\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"ColdBrain\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"HeatRash\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"SlimeLung\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"Sunburn\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"PutridOdour\"\r\n      />\r\n      <Value\r\n        className={classes.value}\r\n        gameObjectId={gameObjectId}\r\n        modifier=\"Spores\"\r\n      />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default withStyles(styles)(Health);\r\n","import * as React from \"react\";\r\nimport { MinionModifiersBehavior } from \"oni-save-parser\";\r\nimport { find, findIndex, merge } from \"lodash-es\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Slider from \"@material-ui/lab/Slider\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nconst ModifierBehaviorEditor = AbstractBehaviorEditor.ofType(\r\n  MinionModifiersBehavior\r\n);\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    valueLabel: {\r\n      marginBottom: theme.spacing()\r\n    }\r\n  });\r\n\r\nexport interface ValueProps {\r\n  className?: string;\r\n  gameObjectId: number;\r\n  modifier: string;\r\n  max?: number;\r\n}\r\n\r\ntype Props = ValueProps & WithStyles<typeof styles>;\r\n\r\nconst Value: React.FC<Props> = ({\r\n  className,\r\n  classes,\r\n  gameObjectId,\r\n  modifier,\r\n  max\r\n}) => (\r\n  <ModifierBehaviorEditor gameObjectId={gameObjectId}>\r\n    {({ extraData: { amounts }, onExtraDataModify }) => {\r\n      const amount = find(amounts, x => x.name === modifier);\r\n      const value = (amount && amount.value.value) || 0;\r\n      function setAmount(value: number) {\r\n        const i = findIndex(amounts, x => x.name === modifier);\r\n        if (i === -1) {\r\n          return;\r\n        }\r\n        onExtraDataModify({\r\n          amounts: merge([], amounts, {\r\n            [i]: { name: modifier, value: { value } }\r\n          })\r\n        });\r\n      }\r\n      return (\r\n        <div className={className}>\r\n          <Typography className={classes.valueLabel} id={`${modifier}-label`}>\r\n            <Trans i18nKey={`oni:todo-trans.modifiers.${modifier}`}>\r\n              {modifier}\r\n            </Trans>\r\n            {\": \"}\r\n            {String(value)}\r\n          </Typography>\r\n          <Slider\r\n            aria-labeledby={`${modifier}-label`}\r\n            value={value}\r\n            min={0}\r\n            max={max || 100}\r\n            onChange={(_, value) => setAmount(value as number)}\r\n          />\r\n        </div>\r\n      );\r\n    }}\r\n  </ModifierBehaviorEditor>\r\n);\r\n\r\nexport default withStyles(styles)(Value);\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      width: \"100%\",\r\n      height: \"100%\"\r\n    },\r\n    text: {\r\n      marginLeft: \"auto\",\r\n      marginRight: \"auto\",\r\n      marginTop: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = WithTranslation & WithStyles<typeof styles>;\r\n\r\nconst DuplicantNotFound: React.FC<Props> = ({ t, classes }) => (\r\n  <PageContainer title={t(\"duplicant.conditions.missing_titlecase\")} back>\r\n    <div className={classes.root}>\r\n      <Typography className={classes.text} variant=\"h5\">\r\n        {t(\"duplicant.conditions.missing_titlecase\")}\r\n      </Typography>\r\n    </div>\r\n  </PageContainer>\r\n);\r\n\r\nexport default withStyles(styles)(withTranslation()(DuplicantNotFound));\r\n","import GeysersPage from \"./GeysersPage\";\r\nexport default GeysersPage;\r\n","import * as React from \"react\";\r\nimport { GeyserTypeNames } from \"oni-save-parser\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport AbstractGameObjectList from \"@/services/oni-save/components/AbstractGameObjectList\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\nimport RedirectIfNoSave from \"@/components/RedirectIfNoSave\";\r\nimport GeyserListItem from \"./components/GeyserListItem\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      flexWrap: \"wrap\",\r\n      margin: theme.spacing()\r\n    },\r\n    item: {\r\n      margin: theme.spacing(0.5)\r\n    }\r\n  });\r\n\r\ntype Props = WithStyles<typeof styles> & WithTranslation;\r\n\r\nconst GeysersPage: React.FC<Props> = ({ classes, t }) => (\r\n  <PageContainer title={t(\"geyser.noun_titlecase_plural\")}>\r\n    <RedirectIfNoSave />\r\n    <AbstractGameObjectList\r\n      gameObjectType={GeyserTypeNames.map(x => `GeyserGeneric_${x}`)}\r\n    >\r\n      {({ gameObjectIds }) => (\r\n        <div className={classes.root}>\r\n          {gameObjectIds.map(gameObjectId => (\r\n            <GeyserListItem\r\n              key={gameObjectId}\r\n              className={classes.item}\r\n              gameObjectId={gameObjectId}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </AbstractGameObjectList>\r\n  </PageContainer>\r\n);\r\n\r\nexport default withStyles(styles)(withTranslation()(GeysersPage));\r\n","import * as React from \"react\";\r\nimport { GeyserType } from \"oni-save-parser\";\r\nimport classnames from \"classnames\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Slider from \"@material-ui/lab/Slider\";\r\n\r\nimport AbstractGeyserEditor from \"@/services/oni-save/components/AbstractGeyserEditor\";\r\n\r\nimport { keysOfType } from \"@/utils\";\r\n\r\nexport interface GeyserListItemProps {\r\n  gameObjectId: number;\r\n  className?: string;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: theme.spacing(45),\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      padding: theme.spacing(2)\r\n    },\r\n    titleBar: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      marginBottom: theme.spacing()\r\n    },\r\n    titleControls: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      marginLeft: \"auto\"\r\n    },\r\n    sliderSection: {\r\n      marginTop: theme.spacing()\r\n    },\r\n    valueLabel: {\r\n      marginBottom: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = GeyserListItemProps & WithStyles<typeof styles>;\r\n\r\nconst GeyserListItem: React.FC<Props> = ({\r\n  classes,\r\n  className,\r\n  gameObjectId\r\n}) => (\r\n  <AbstractGeyserEditor gameObjectId={gameObjectId}>\r\n    {({ geyserType, emitRate, onChangeEmitRate, onChangeGeyserType }) => (\r\n      <Paper className={classnames(className, classes.root)}>\r\n        <div className={classes.titleBar}>\r\n          <Typography variant=\"h6\">{geyserType}</Typography>\r\n          <div className={classes.titleControls} />\r\n        </div>\r\n        <Divider />\r\n        <Select\r\n          value={geyserType || \"\"}\r\n          onChange={e => onChangeGeyserType(e.target.value as string)}\r\n        >\r\n          {keysOfType(GeyserType).map(typeName => (\r\n            <MenuItem key={typeName} value={typeName}>\r\n              {typeName}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n        <div className={classes.sliderSection}>\r\n          <Typography className={classes.valueLabel} id=\"rate-label\">\r\n            Rate\r\n          </Typography>\r\n          <Slider\r\n            aria-labelledby=\"rate-label\"\r\n            value={emitRate || 0}\r\n            min={0}\r\n            max={1}\r\n            onChange={(_, value) => onChangeEmitRate(value as number)}\r\n          />\r\n        </div>\r\n      </Paper>\r\n    )}\r\n  </AbstractGeyserEditor>\r\n);\r\n\r\nexport default withStyles(styles)(GeyserListItem);\r\n","import AbstractGeyserEditor from \"./AbstractGeyserEditor\";\r\nexport default AbstractGeyserEditor;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AbstractGeyserEditorProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./state-props\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch-props\";\r\n\r\ntype Props = AbstractGeyserEditorProps & StateProps & DispatchProps;\r\n\r\nconst AbstractGeyserEditor: React.FC<Props> = ({\r\n  emitRate,\r\n  geyserType,\r\n  onChangeEmitRate,\r\n  onChangeGeyserType,\r\n  children\r\n}) => (\r\n  <>\r\n    {React.Children.only(\r\n      children({ emitRate, geyserType, onChangeEmitRate, onChangeGeyserType })\r\n    )}\r\n  </>\r\n);\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(AbstractGeyserEditor);\r\n","import createCachedSelector from \"re-reselect\";\r\nimport { getBehavior, GeyserBehavior, GeyserType } from \"oni-save-parser\";\r\n\r\nimport { AbstractGeyserEditorProps } from \"./props\";\r\nimport { gameObjectsByIdSelector } from \"../../selectors/game-objects\";\r\nimport { AppState } from \"@/state\";\r\n\r\nconst geyserConfigSelector = createCachedSelector(\r\n  gameObjectsByIdSelector,\r\n  (_: AppState, props: AbstractGeyserEditorProps) => props.gameObjectId,\r\n  (gameObjectsById, gameObjectId) => {\r\n    if (!gameObjectsById || !gameObjectsById[gameObjectId]) {\r\n      return null;\r\n    }\r\n    const gameObject = gameObjectsById[gameObjectId];\r\n\r\n    const geyserBehavior = getBehavior(gameObject, GeyserBehavior);\r\n    if (!geyserBehavior || !geyserBehavior.templateData.configuration) {\r\n      return null;\r\n    }\r\n    return geyserBehavior.templateData.configuration;\r\n  }\r\n)((_: AppState, props: AbstractGeyserEditorProps) => props.gameObjectId);\r\n\r\nexport default function mapStateToProps(\r\n  state: AppState,\r\n  props: AbstractGeyserEditorProps\r\n) {\r\n  const config = geyserConfigSelector(state, props);\r\n  return {\r\n    geyserType: config ? GeyserType[config.typeId.hash] : null,\r\n    emitRate: config ? config.rateRoll : null\r\n  };\r\n}\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\n","import { Dispatch } from \"redux\";\r\n\r\nimport {\r\n  modifyBehavior,\r\n  BehaviorDataTarget\r\n} from \"../../actions/modify-behavior\";\r\nimport { changeGeyserType } from \"../../actions/change-geyser-type\";\r\n\r\nimport { AbstractGeyserEditorProps } from \"./props\";\r\nimport { GeyserBehavior } from \"oni-save-parser\";\r\n\r\nexport default function mapDispatchToProps(\r\n  dispatch: Dispatch,\r\n  props: AbstractGeyserEditorProps\r\n) {\r\n  return {\r\n    onChangeEmitRate: (value: number) =>\r\n      dispatch(\r\n        modifyBehavior(\r\n          props.gameObjectId,\r\n          GeyserBehavior,\r\n          BehaviorDataTarget.Template,\r\n          {\r\n            configuration: {\r\n              rateRoll: value\r\n            }\r\n          },\r\n          true\r\n        )\r\n      ),\r\n    onChangeGeyserType: (type: string) =>\r\n      dispatch(changeGeyserType(props.gameObjectId, type))\r\n  };\r\n}\r\nexport type DispatchProps = ReturnType<typeof mapDispatchToProps>;\r\n","import PlanetsPage from \"./PlanetsPage\";\r\nexport default PlanetsPage;","import React from \"react\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\nimport RedirectIfNoSave from \"@/components/RedirectIfNoSave\";\r\n\r\nimport PlanetList from \"./components/PlanetList\";\r\n\r\nconst PlanetsPage: React.FC = () => (\r\n  <PageContainer title=\"Planets\">\r\n    <RedirectIfNoSave />\r\n    <PlanetList />\r\n  </PageContainer>\r\n);\r\n\r\nexport default PlanetsPage;\r\n","import * as React from \"react\";\r\nimport classnames from \"classnames\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport AbstractPlanetList from \"@/services/oni-save/components/AbstractPlanetList\";\r\n\r\nimport PlanetListItem from \"./PlanetListItem\";\r\n\r\nexport interface PlanetListProps {\r\n  className?: string;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      flexWrap: \"wrap\",\r\n      margin: theme.spacing()\r\n    },\r\n    item: {\r\n      margin: theme.spacing(0.5)\r\n    }\r\n  });\r\n\r\ntype Props = PlanetListProps & WithStyles<typeof styles>;\r\n\r\nconst PlanetList: React.FC<Props> = ({ className, classes }) => (\r\n  <AbstractPlanetList>\r\n    {({ planetIds }) => (\r\n      <div className={classnames(className, classes.root)}>\r\n        {planetIds.map(id => (\r\n          <PlanetListItem key={id} className={classes.item} planetId={id} />\r\n        ))}\r\n      </div>\r\n    )}\r\n  </AbstractPlanetList>\r\n);\r\n\r\nexport default withStyles(styles)(PlanetList);\r\n","import AbstractPlanetList from \"./AbstractPlanetList\";\r\nexport default AbstractPlanetList;\r\nexport * from \"./props\";\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AbstractPlanetListProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./state-props\";\r\n\r\ntype Props = AbstractPlanetListProps & StateProps;\r\n\r\nconst AbstractPlanetList: React.FC<Props> = ({ planetIds, children }) => (\r\n  <>{children({ planetIds })}</>\r\n);\r\n\r\nexport default connect(mapStateToProps)(AbstractPlanetList);\r\n","import { createSelector } from \"reselect\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\n\r\nimport { spaceManagerSelector } from \"../../selectors/space-manager\";\r\n\r\nconst planetIdsSelector = createSelector(\r\n  spaceManagerSelector,\r\n  spaceManager => {\r\n    if (!spaceManager) {\r\n      return [];\r\n    }\r\n\r\n    return spaceManager.destinations.map(x => x.id);\r\n  }\r\n);\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  planetIds: planetIdsSelector\r\n});\r\n\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import PlanetListItem from \"./PlanetListItem\";\r\nexport default PlanetListItem;\r\n","import * as React from \"react\";\r\nimport classnames from \"classnames\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport AbstractPlanet from \"@/services/oni-save/components/AbstractPlanet\";\r\n\r\nimport RecoverableElement from \"./components/RecoverableElement\";\r\n\r\nexport interface PlanetListItemProps {\r\n  planetId: number;\r\n  className?: string;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: theme.spacing(45),\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      padding: theme.spacing(2)\r\n    },\r\n    titleBar: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      marginBottom: theme.spacing()\r\n    },\r\n    titleControls: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      marginLeft: \"auto\"\r\n    },\r\n    divider: {\r\n      marginBottom: theme.spacing()\r\n    },\r\n    contentLayout: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\"\r\n    },\r\n    planetContainer: {\r\n      width: 100,\r\n      height: 100\r\n    },\r\n    planetImg: {\r\n      marginLeft: theme.spacing(),\r\n      marginRight: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = PlanetListItemProps & WithStyles<typeof styles>;\r\n\r\nconst PlanetListItem: React.FC<Props> = ({ classes, className, planetId }) => (\r\n  <AbstractPlanet planetId={planetId}>\r\n    {({ planet }) => {\r\n      if (!planet) {\r\n        return <Typography>No Data</Typography>;\r\n      }\r\n      const { type } = planet;\r\n      return (\r\n        <Paper className={classnames(className, classes.root)}>\r\n          <div className={classes.titleBar}>\r\n            <Typography variant=\"h6\">{type}</Typography>\r\n            <div className={classes.titleControls} />\r\n          </div>\r\n          <Divider className={classes.divider} />\r\n          <div className={classes.contentLayout}>\r\n            <div className={classes.planetImg}>\r\n              <svg\r\n                viewBox=\"0 0 70 70\"\r\n                width={70}\r\n                height={70}\r\n                className={classes.planetImg}\r\n              >\r\n                <circle cx={35} cy={35} r={35} fill=\"red\" />\r\n              </svg>\r\n            </div>\r\n            <div>\r\n              {planet.recoverableElements.map(([hash, chance]) => (\r\n                <RecoverableElement hash={hash} chance={chance} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </Paper>\r\n      );\r\n    }}\r\n  </AbstractPlanet>\r\n);\r\n\r\nexport default withStyles(styles)(PlanetListItem);\r\n","import AbstractPlanet from \"./AbstractPlanet\";\r\nexport default AbstractPlanet;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AbstractPlanetProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./state-props\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch-props\";\r\n\r\ntype Props = AbstractPlanetProps & StateProps & DispatchProps;\r\n\r\nconst AbstractPlanet: React.FC<Props> = ({\r\n  planet,\r\n  onPlanetModify,\r\n  children\r\n}) => <>{children({ planet, onPlanetModify })}</>;\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(AbstractPlanet);\r\n","import createCachedSelector from \"re-reselect\";\r\nimport { find } from \"lodash-es\";\r\n\r\nimport { AppState, createStructuredSelector } from \"@/state\";\r\n\r\nimport { spaceManagerSelector } from \"../../selectors/space-manager\";\r\n\r\nimport { AbstractPlanetProps } from \"./props\";\r\n\r\nconst planetIdSelector = (_: AppState, props: AbstractPlanetProps) =>\r\n  props.planetId;\r\n\r\nconst planetSelector = createCachedSelector(\r\n  spaceManagerSelector,\r\n  planetIdSelector,\r\n  (spaceManager, planetId) => {\r\n    if (!spaceManager) {\r\n      return null;\r\n    }\r\n\r\n    const planet = find(spaceManager.destinations, x => x.id === planetId);\r\n    return planet || null;\r\n  }\r\n)(planetIdSelector);\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  planet: planetSelector\r\n});\r\n\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import { Dispatch } from \"redux\";\r\nimport { SpaceDestination } from \"oni-save-parser\";\r\n\r\nimport { modifyPlanet } from \"../../actions/modify-planet\";\r\n\r\nimport { AbstractPlanetProps } from \"./props\";\r\n\r\nexport default function mapDispatchToProps(\r\n  dispatch: Dispatch,\r\n  props: AbstractPlanetProps\r\n) {\r\n  return {\r\n    onPlanetModify(planet: Partial<SpaceDestination>) {\r\n      dispatch(modifyPlanet(props.planetId, planet));\r\n    }\r\n  };\r\n}\r\nexport type DispatchProps = ReturnType<typeof mapDispatchToProps>;\r\n","import { AnyAction } from \"redux\";\r\nimport { SpaceDestination } from \"oni-save-parser\";\r\n\r\nexport const ACTION_ONISAVE_MODIFY_PLANET = \"oni-save/modify-planet\";\r\nexport const modifyPlanet = (\r\n  planetId: number,\r\n  planet: Partial<SpaceDestination>\r\n) => ({\r\n  type: ACTION_ONISAVE_MODIFY_PLANET as typeof ACTION_ONISAVE_MODIFY_PLANET,\r\n  payload: { planetId, planet }\r\n});\r\nexport type ModifyPlanetAction = ReturnType<typeof modifyPlanet>;\r\nexport function isModifyPlanetAction(\r\n  action: AnyAction\r\n): action is ModifyPlanetAction {\r\n  return action.type === ACTION_ONISAVE_MODIFY_PLANET;\r\n}\r\n","import * as React from \"react\";\r\nimport { SimHashes } from \"oni-save-parser\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport interface RecoverableElementProps {\r\n  hash: number;\r\n  chance: number;\r\n}\r\n\r\nexport const RecoverableElement: React.FC<RecoverableElementProps> = ({\r\n  hash,\r\n  chance\r\n}) => (\r\n  <div>\r\n    <Typography>\r\n      {SimHashes[hash]} ({Math.round(chance * 100)}% mass)\r\n    </Typography>\r\n  </div>\r\n);\r\n\r\nexport default RecoverableElement;\r\n","import MaterialsPage from \"./MaterialsPage\";\r\nexport default MaterialsPage;\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\n\r\nimport RedirectIfNoSave from \"@/components/RedirectIfNoSave\";\r\nimport MaterialsTable from \"./components/MaterialsTable\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      padding: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = WithStyles<typeof styles> & WithTranslation;\r\n\r\nconst MaterialsPage: React.FC<Props> = ({ classes, t }) => {\r\n  return (\r\n    <PageContainer title={t(\"material.noun_titlecase\")}>\r\n      <RedirectIfNoSave />\r\n      <MaterialsTable className={classes.root} />\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(withTranslation()(MaterialsPage));\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\n\r\nimport AbstractMaterialList from \"@/services/oni-save/components/AbstractMaterialList\";\r\n\r\nimport DeleteLooseButton from \"./DeleteLooseButton\";\r\n\r\nexport interface MaterialsPageProps {\r\n  className?: string;\r\n}\r\n\r\ntype Props = MaterialsPageProps & WithTranslation;\r\n\r\nconst MaterialsTable: React.FC<Props> = ({ className, t }) => {\r\n  function formatWeight(weight: number) {\r\n    if (Math.abs(weight) < 1000) {\r\n      const g = Number(weight.toFixed(2));\r\n      return t(\"material.gram\", { count: g });\r\n    }\r\n\r\n    const kg = Number((weight / 1000.0).toFixed(2));\r\n    return t(\"material.kilogram\", { count: kg });\r\n  }\r\n\r\n  return (\r\n    <AbstractMaterialList>\r\n      {({ materials, onDeleteLooseMaterial }) => (\r\n        <Table className={className}>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>{t(\"material.noun_titlecase\")}</TableCell>\r\n              <TableCell>\r\n                {t(\"material_loose.noun_titlecase\")}\r\n                <DeleteLooseButton\r\n                  materialName={t(\"material.all_titlecase\")}\r\n                  onDelete={onDeleteLooseMaterial}\r\n                />\r\n              </TableCell>\r\n              <TableCell>{t(\"material_storage.noun_titlecase\")}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {materials.map(\r\n              ({ name, looseGrams, looseCount, storedGrams, storedCount }) => (\r\n                <TableRow key={name}>\r\n                  <TableCell>{name}</TableCell>\r\n                  <TableCell>\r\n                    {looseGrams > 0 && (\r\n                      <>\r\n                        {formatWeight(looseGrams)}\r\n                        <br />\r\n                        {t(\"material_loose.clump_count\", { count: looseCount })}\r\n                      </>\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {storedGrams > 0 && (\r\n                      <>\r\n                        {formatWeight(storedGrams)}\r\n                        <br />\r\n                        {t(\"material_storage.container_count\", {\r\n                          count: storedCount\r\n                        })}\r\n                      </>\r\n                    )}\r\n                  </TableCell>\r\n                </TableRow>\r\n              )\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      )}\r\n    </AbstractMaterialList>\r\n  );\r\n};\r\n\r\nexport default withTranslation()(MaterialsTable);\r\n","import AbstractMaterialList from \"./AbstractMaterialList\";\r\nexport default AbstractMaterialList;\r\nexport * from \"./props\";\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { MaterialListProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./state-props\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch-props\";\r\n\r\ntype Props = MaterialListProps & StateProps & DispatchProps;\r\n\r\nconst AbstractMaterialList: React.FC<Props> = ({\r\n  materials,\r\n  onDeleteLooseMaterial,\r\n  children\r\n}) => (\r\n  <>{React.Children.only(children({ materials, onDeleteLooseMaterial }))}</>\r\n);\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(AbstractMaterialList);\r\n","import {\r\n  SimHashNames,\r\n  getBehavior,\r\n  PrimaryElementBehavior,\r\n  GameObject,\r\n  StorageBehavior,\r\n  GameObjectGroup\r\n} from \"oni-save-parser\";\r\nimport { createSelector } from \"reselect\";\r\nimport { values, orderBy, flatMap } from \"lodash-es\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport { gameObjectGroupsSelector } from \"../../selectors/game-objects\";\r\n\r\nimport { MaterialListItem } from \"./props\";\r\n\r\n// TODO: Seeds, clothing, other sweepables\r\nconst MaterialGameObjectTypes = [...SimHashNames];\r\n\r\nconst materialsSelector = createSelector(\r\n  gameObjectGroupsSelector,\r\n  groups => {\r\n    const rowsByMaterial: Record<string, MaterialListItem> = {};\r\n\r\n    if (groups) {\r\n      for (const group of groups) {\r\n        countMaterialGroup(group, rowsByMaterial);\r\n      }\r\n    }\r\n\r\n    const rows = values(rowsByMaterial);\r\n    return orderBy(rows, [\"name\"]);\r\n  }\r\n);\r\n\r\nfunction countMaterialGroup(\r\n  group: GameObjectGroup,\r\n  rowsByMaterial: Record<string, MaterialListItem>\r\n) {\r\n  const loose = isMaterialGameObject(group.name);\r\n  if (loose) {\r\n    countLooseMaterialGroup(group, rowsByMaterial);\r\n  } else {\r\n    countStorageGroup(group, rowsByMaterial);\r\n  }\r\n}\r\n\r\nfunction countLooseMaterialGroup(\r\n  group: GameObjectGroup,\r\n  rowsByMaterial: Record<string, MaterialListItem>\r\n) {\r\n  for (const gameObject of group.gameObjects) {\r\n    addMaterialObject(group.name, gameObject, true, rowsByMaterial);\r\n  }\r\n}\r\n\r\nfunction countStorageGroup(\r\n  group: GameObjectGroup,\r\n  rowsByMaterial: Record<string, MaterialListItem>\r\n) {\r\n  const storedObjects = flatMap(group.gameObjects, getStoredObjects);\r\n  for (const storedObject of storedObjects) {\r\n    const { type, gameObject } = storedObject;\r\n\r\n    if (!isMaterialGameObject(type)) {\r\n      continue;\r\n    }\r\n\r\n    addMaterialObject(type, gameObject, false, rowsByMaterial);\r\n  }\r\n}\r\n\r\nfunction getStoredObjects(\r\n  gameObject: GameObject\r\n): { type: string; gameObject: GameObject }[] {\r\n  const storage = getBehavior(gameObject, StorageBehavior);\r\n  if (!storage) {\r\n    return [];\r\n  }\r\n\r\n  return storage.extraData.map(({ name, ...gameObject }) => ({\r\n    type: name,\r\n    gameObject\r\n  }));\r\n}\r\n\r\nfunction getMaterialRow(\r\n  name: string,\r\n  rowsByMaterial: Record<string, MaterialListItem>\r\n) {\r\n  if (!rowsByMaterial[name]) {\r\n    rowsByMaterial[name] = {\r\n      name,\r\n      looseCount: 0,\r\n      looseGrams: 0,\r\n      storedCount: 0,\r\n      storedGrams: 0\r\n    };\r\n  }\r\n  return rowsByMaterial[name];\r\n}\r\n\r\nfunction isMaterialGameObject(type: string): boolean {\r\n  return MaterialGameObjectTypes.indexOf(type) !== -1;\r\n}\r\n\r\nfunction addMaterialObject(\r\n  name: string,\r\n  gameObject: GameObject,\r\n  loose: boolean,\r\n  rowsByMaterial: Record<string, MaterialListItem>\r\n) {\r\n  const elementBehavior = getBehavior(gameObject, PrimaryElementBehavior);\r\n  if (!elementBehavior) {\r\n    return;\r\n  }\r\n\r\n  const { Units } = elementBehavior.templateData;\r\n\r\n  // Use custom provided name, as many objects (food, clothing) have the same primary element.\r\n  const row = getMaterialRow(name, rowsByMaterial);\r\n\r\n  if (loose) {\r\n    row.looseCount++;\r\n    row.looseGrams += Units;\r\n  } else {\r\n    row.storedCount++;\r\n    row.storedGrams += Units;\r\n  }\r\n}\r\n\r\nexport default function mapStateToProps(state: AppState) {\r\n  return {\r\n    materials: materialsSelector(state)\r\n  };\r\n}\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\n","import { deleteLooseMaterial } from \"../../actions/delete-loose-material\";\r\n\r\nconst mapDispatchToProps = {\r\n  onDeleteLooseMaterial: deleteLooseMaterial\r\n};\r\nexport default mapDispatchToProps;\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\n","import * as React from \"react\";\r\n\r\nimport { withTranslation, WithTranslation } from \"react-i18next\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\nimport ConfirmationDialog from \"@/components/ConfirmationDialog\";\r\n\r\nexport interface DeleteLooseButtonProps {\r\n  materialName: string;\r\n  onDelete(): void;\r\n}\r\n\r\ntype Props = DeleteLooseButtonProps & WithTranslation;\r\nconst DeleteLooseButton: React.FC<Props> = ({ materialName, onDelete, t }) => (\r\n  <ConfirmationDialog\r\n    title={t(\"material_loose.verbs.delete_name\", { name: materialName })}\r\n    message={t(\"material_loose.prompts.delete\")}\r\n    onConfirm={onDelete}\r\n  >\r\n    {({ onClick }) => (\r\n      <IconButton onClick={onClick}>\r\n        <DeleteIcon />\r\n      </IconButton>\r\n    )}\r\n  </ConfirmationDialog>\r\n);\r\nexport default withTranslation()(DeleteLooseButton);\r\n","import * as React from \"react\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport interface ConfirmationDialogProps {\r\n  title: string;\r\n  message: string;\r\n  onConfirm(): void;\r\n  onCancel?(): void;\r\n  children(props: ConfirmationDialogRenderProps): React.ReactChild;\r\n}\r\nexport interface ConfirmationDialogRenderProps {\r\n  onClick(): void;\r\n}\r\n\r\ntype Props = ConfirmationDialogProps;\r\nconst ConfirmationDialog: React.FC<Props> = ({\r\n  title,\r\n  message,\r\n  onConfirm,\r\n  onCancel,\r\n  children\r\n}) => {\r\n  const [isOpen, setOpen] = React.useState(false);\r\n\r\n  const onCancelClick = React.useCallback(() => {\r\n    setOpen(false);\r\n    if (onCancel) {\r\n      onCancel();\r\n    }\r\n  }, [onCancel]);\r\n\r\n  const onConfirmClick = React.useCallback(() => {\r\n    setOpen(false);\r\n    onConfirm();\r\n  }, [onConfirm]);\r\n\r\n  return (\r\n    <>\r\n      {children({ onClick: () => setOpen(true) })}\r\n      <Dialog open={isOpen}>\r\n        {isOpen && (\r\n          <>\r\n            <DialogTitle>{title}</DialogTitle>\r\n            <DialogContent>\r\n              <Typography>{message}</Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={onCancelClick}>\r\n                <Trans i18nKey=\"dialog.verbs.cancel_titlecase\" />\r\n              </Button>\r\n              <Button onClick={onConfirmClick}>\r\n                <Trans i18nKey=\"dialog.verbs.confirm_titlecase\" />\r\n              </Button>\r\n            </DialogActions>\r\n          </>\r\n        )}\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\nexport default ConfirmationDialog;\r\n","import RawEditorPage from \"./RawEditorPage\";\r\nexport default RawEditorPage;\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\nimport RedirectIfNoSave from \"@/components/RedirectIfNoSave\";\r\nimport ControlledMonaco from \"@/components/ControlledMonaco\";\r\n\r\nimport AbstractRawEditor from \"@/services/oni-save/components/AbstractRawEditor\";\r\n\r\nimport PathSelector from \"./components/PathSelector\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      height: \"100%\"\r\n    },\r\n    selectorContainer: {\r\n      width: \"100%\",\r\n      padding: theme.spacing()\r\n    },\r\n    editorContainer: {\r\n      flexGrow: 1,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      minHeight: 0\r\n    },\r\n    buttonContainer: {\r\n      display: \"flex\",\r\n      width: \"100%\",\r\n      flexDirection: \"row\"\r\n    }\r\n  });\r\n\r\ntype Props = WithStyles<typeof styles>;\r\nconst RawEditorPage: React.FC<Props> = ({ classes }) => {\r\n  const [path, setPath] = React.useState([\"header\"]);\r\n  return (\r\n    <React.Fragment>\r\n      <RedirectIfNoSave />\r\n      <AbstractRawEditor path={path}>\r\n        {({ value, valid, hasChanges, onChange, onReset, onApply }) => (\r\n          <PageContainer title=\"Raw Editor\" back>\r\n            <div className={classes.root}>\r\n              <div className={classes.selectorContainer}>\r\n                <PathSelector path={path} onChange={setPath} />\r\n              </div>\r\n              {value && (\r\n                <>\r\n                  <div className={classes.editorContainer}>\r\n                    <ControlledMonaco\r\n                      width=\"100%\"\r\n                      height=\"100%\"\r\n                      language=\"json\"\r\n                      theme=\"vs-dark\"\r\n                      value={value}\r\n                      onChange={onChange}\r\n                    />\r\n                  </div>\r\n                  <div className={classes.buttonContainer}>\r\n                    <button onClick={onReset}>Reset</button>\r\n                    <button disabled={!valid || !hasChanges} onClick={onApply}>\r\n                      Apply\r\n                    </button>\r\n                    {!valid && (\r\n                      <Typography component=\"span\">\r\n                        Cannot apply changes - JSON contains an error.\r\n                      </Typography>\r\n                    )}\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </PageContainer>\r\n        )}\r\n      </AbstractRawEditor>\r\n    </React.Fragment>\r\n  );\r\n};\r\nexport default withStyles(styles)(RawEditorPage);\r\n","import React from \"react\";\r\nimport MonacoEditor from \"react-monaco-editor\";\r\n\r\nexport default class ControlledMonaco extends React.Component<\r\n  PropsOfComponent<MonacoEditor>\r\n> {\r\n  private _editor: any = null;\r\n  private _monaco: any = null;\r\n\r\n  componentDidUpdate() {\r\n    this._updateEditor();\r\n  }\r\n\r\n  render() {\r\n    const { onChange, editorDidMount, ...props } = this.props;\r\n    return (\r\n      <MonacoEditor\r\n        {...props}\r\n        editorDidMount={this._editorDidMount}\r\n        onChange={(value, e) => {\r\n          if (onChange) {\r\n            onChange(value, e);\r\n          }\r\n          this._updateEditor();\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  private _editorDidMount = (editor: any, monaco: any) => {\r\n    this._editor = editor;\r\n    this._monaco = monaco;\r\n    this._updateEditor();\r\n    if (this.props.editorDidMount) {\r\n      this.props.editorDidMount(editor, monaco);\r\n    }\r\n  };\r\n\r\n  private _updateEditor = () => {\r\n    if (this.props.value !== this._editor.getValue()) {\r\n      this._editor.setValue(this.props.value);\r\n    }\r\n  };\r\n}\r\n","import AbstractRawEditor from \"./AbstractRawEditor\";\r\nexport default AbstractRawEditor;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AbstractRawEditorProps } from \"./props\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./state-props\";\r\nimport mapDispatchToProps, { DispatchProps } from \"./dispatch-props\";\r\n\r\ntype Props = AbstractRawEditorProps & StateProps & DispatchProps;\r\ninterface State {\r\n  transientValue: string | null;\r\n  valid: boolean;\r\n}\r\nclass AbstractRawEditor extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      transientValue: null,\r\n      valid: true\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { value, children } = this.props;\r\n    const { transientValue, valid } = this.state;\r\n    let strValue: string | null;\r\n    if (!value) {\r\n      strValue = null;\r\n    } else if (objectDepth(value, 5) >= 5) {\r\n      strValue = null;\r\n    } else {\r\n      strValue = transientValue || JSON.stringify(value, null, 2);\r\n    }\r\n    return children({\r\n      value: strValue,\r\n      valid: valid,\r\n      hasChanges: transientValue !== null,\r\n      onChange: this._onChange,\r\n      onApply: this._onApply,\r\n      onReset: this._onReset\r\n    });\r\n  }\r\n\r\n  private _onChange = (value: string) => {\r\n    let isValid = true;\r\n    try {\r\n      JSON.parse(value);\r\n    } catch {\r\n      isValid = false;\r\n    }\r\n\r\n    this.setState({\r\n      transientValue: value,\r\n      valid: isValid\r\n    });\r\n  };\r\n\r\n  private _onApply = () => {\r\n    const { path, value: objValue, onModifySave } = this.props;\r\n    const { transientValue } = this.state;\r\n    if (!transientValue) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const parsed = JSON.parse(transientValue);\r\n      this.setState({\r\n        valid: true,\r\n        transientValue: null\r\n      });\r\n      onModifySave(path, parsed);\r\n    } catch {\r\n      this.setState({\r\n        valid: false\r\n      });\r\n    }\r\n  };\r\n\r\n  private _onReset = () => {\r\n    this.setState({\r\n      transientValue: null\r\n    });\r\n  };\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(AbstractRawEditor);\r\n\r\nfunction objectDepth(obj: any, limit: number) {\r\n  if (!obj || typeof obj !== \"object\") {\r\n    return 0;\r\n  }\r\n\r\n  let depth = 0;\r\n  for (const key of Object.keys(obj)) {\r\n    const keyDepth = objectDepth(obj[key], limit) + 1;\r\n    depth = Math.max(depth, keyDepth);\r\n    if (depth >= limit) {\r\n      break;\r\n    }\r\n  }\r\n  return depth;\r\n}\r\n","import createCachedSelector from \"re-reselect\";\r\nimport { get } from \"lodash-es\";\r\n\r\nimport { AppState, createStructuredSelector } from \"@/state\";\r\n\r\nimport { saveGameSelector } from \"../../selectors/save-game\";\r\n\r\nimport { AbstractRawEditorProps } from \"./props\";\r\n\r\nconst pathSelector = (_: AppState, props: AbstractRawEditorProps) => props.path;\r\n\r\nconst valueSelector = createCachedSelector(\r\n  saveGameSelector,\r\n  pathSelector,\r\n  (saveGame, path) => {\r\n    if (!saveGame) {\r\n      return null;\r\n    }\r\n    return get(saveGame, path);\r\n  }\r\n)((_: AppState, props: AbstractRawEditorProps) => props.path.join(\".\"));\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  value: valueSelector\r\n});\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import { modifyRaw } from \"../../actions/modify-raw\";\r\n\r\nconst mapDispatchToProps = {\r\n  onModifySave: modifyRaw\r\n};\r\n\r\nexport type DispatchProps = typeof mapDispatchToProps;\r\nexport default mapDispatchToProps;\r\n","import PathSelector from \"./component\";\r\nimport connectPathSelector from \"./connector\";\r\nimport withPathSelectorLogic from \"./logic\";\r\n\r\nexport default connectPathSelector(withPathSelectorLogic(PathSelector));\r\n","import * as React from \"react\";\r\n\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Breadcrumbs from \"@material-ui/core/Breadcrumbs\";\r\nimport Link from \"@material-ui/core/Link\";\r\n\r\nimport { WithPathSelectorLogic } from \"./logic\";\r\n\r\ntype Props = WithPathSelectorLogic;\r\nconst PathSelector: React.FC<Props> = ({ pathMenu, nextItemMenu }) => (\r\n  <Breadcrumbs>\r\n    {pathMenu.map(({ label, onClick }) => (\r\n      <Link key={label} color=\"inherit\" onClick={onClick}>\r\n        {label}\r\n      </Link>\r\n    ))}\r\n    {nextItemMenu.length > 0 && (\r\n      <Select onChange={e => nextItemMenu[Number(e.target.value)].onClick()}>\r\n        {nextItemMenu.map(({ label }, i) => (\r\n          <MenuItem key={i} value={i}>\r\n            {label}\r\n          </MenuItem>\r\n        ))}\r\n      </Select>\r\n    )}\r\n  </Breadcrumbs>\r\n);\r\n\r\nexport default PathSelector;\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\n\r\nimport { saveGameSelector } from \"@/services/oni-save/selectors/save-game\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  saveGame: saveGameSelector\r\n});\r\n\r\nexport default connect(mapStateToProps);\r\n","import * as React from \"react\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\nimport { get, last } from \"lodash-es\";\r\n\r\nimport { getPathSettings } from \"./path-settings\";\r\n\r\nexport interface PathSelectorLogicInputProps {\r\n  saveGame: SaveGame | null;\r\n  path: string[];\r\n  onChange(path: string[]): void;\r\n}\r\n\r\nexport interface PathMenuItemProps {\r\n  label: string;\r\n  onClick(): void;\r\n}\r\n\r\nexport interface WithPathSelectorLogic {\r\n  pathMenu: PathMenuItemProps[];\r\n  nextItemMenu: PathMenuItemProps[];\r\n}\r\n\r\nexport default function withPathSelectorLogic(\r\n  WrappedComponent: React.ComponentType<WithPathSelectorLogic>\r\n): React.ComponentType<PathSelectorLogicInputProps> {\r\n  return (props: PathSelectorLogicInputProps) => {\r\n    const { saveGame, path, onChange } = props;\r\n    return (\r\n      // Ideally we would only pass a subset of props, removing saveGame/path/onChange\r\n      //  However, typescript rejects the typings, presumably because T might include its\r\n      //  own saveGame/path/onChange.\r\n      <WrappedComponent\r\n        pathMenu={saveGame ? generatePathMenu(saveGame, path, onChange) : []}\r\n        nextItemMenu={\r\n          saveGame ? generateNextMenu(saveGame, path, onChange) : []\r\n        }\r\n      />\r\n    );\r\n  };\r\n}\r\n\r\nfunction generatePathMenu(\r\n  saveGame: SaveGame,\r\n  path: string[],\r\n  onSelectPath: (path: string[]) => void\r\n): PathMenuItemProps[] {\r\n  const pathMenuItems: PathMenuItemProps[] = [\r\n    {\r\n      label: \"SaveGame\",\r\n      onClick: onSelectPath.bind(null, [])\r\n    }\r\n  ];\r\n\r\n  for (let i = 0; i < path.length; i++) {\r\n    const subPath = path.slice(0, i + 1);\r\n    pathMenuItems.push({\r\n      label: getPathName(saveGame, subPath),\r\n      onClick: onSelectPath.bind(null, subPath)\r\n    });\r\n  }\r\n\r\n  return pathMenuItems;\r\n}\r\n\r\nfunction generateNextMenu(\r\n  saveGame: SaveGame,\r\n  path: string[],\r\n  onSelectPath: (path: string[]) => void\r\n): PathMenuItemProps[] {\r\n  const pathMenuItems: PathMenuItemProps[] = [];\r\n\r\n  const target = path.length > 0 ? get(saveGame, path) : saveGame;\r\n\r\n  if (!target || typeof target !== \"object\") {\r\n    return [];\r\n  }\r\n\r\n  for (const key of Object.keys(target)) {\r\n    const value = target[key];\r\n    if (!value || typeof value !== \"object\") {\r\n      continue;\r\n    }\r\n    pathMenuItems.push({\r\n      label: getPathName(saveGame, [...path, key]),\r\n      onClick: onSelectPath.bind(null, [...path, key])\r\n    });\r\n  }\r\n\r\n  return pathMenuItems;\r\n}\r\n\r\nfunction getPathName(saveGame: SaveGame, path: string[]) {\r\n  const settings = getPathSettings(path);\r\n  if (!settings || !settings.getLabel) {\r\n    return last(path)!;\r\n  }\r\n  return settings.getLabel(get(saveGame, path));\r\n}\r\n","import { find } from \"lodash-es\";\r\nimport {\r\n  GameObjectGroup,\r\n  GameObject,\r\n  getBehavior,\r\n  KPrefabIDBehavior,\r\n  GameObjectBehavior\r\n} from \"oni-save-parser\";\r\n\r\nexport interface PathSettings {\r\n  getLabel?(data: any): string;\r\n}\r\n\r\ninterface PathSettingMatcher extends PathSettings {\r\n  path: string[];\r\n}\r\n\r\nconst settings: PathSettingMatcher[] = [\r\n  {\r\n    path: [\"gameObjects\", \"*\"],\r\n    getLabel(data: GameObjectGroup) {\r\n      return data.name;\r\n    }\r\n  },\r\n  {\r\n    path: [\"gameObjects\", \"*\", \"gameObjects\", \"*\"],\r\n    getLabel(data: GameObject) {\r\n      const idBehavior = getBehavior(data, KPrefabIDBehavior);\r\n      if (!idBehavior) {\r\n        return \"Unknown\";\r\n      }\r\n      return String(idBehavior.templateData.InstanceID);\r\n    }\r\n  },\r\n  {\r\n    path: [\"gameObjects\", \"*\", \"gameObjects\", \"*\", \"behaviors\", \"*\"],\r\n    getLabel(data: GameObjectBehavior) {\r\n      return data.name;\r\n    }\r\n  }\r\n];\r\n\r\nexport function getPathSettings(path: string[]): PathSettings | null {\r\n  const match = find(settings, x => matchPath(path, x.path));\r\n  return match || null;\r\n}\r\n\r\nfunction matchPath(path: string[], pattern: string[]): boolean {\r\n  if (path.length !== pattern.length) {\r\n    return false;\r\n  }\r\n\r\n  for (let i = 0; i < path.length; i++) {\r\n    const segment = path[i];\r\n    const match = pattern[i];\r\n    if (match !== \"*\" && segment !== match) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n","import SettingsPage from \"./SettingsPage\";\r\nexport default SettingsPage;\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\n\r\nimport Language from \"./components/Language\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      padding: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = WithStyles<typeof styles>;\r\n\r\nconst SettingsPage: React.FC<Props> = ({ classes }) => (\r\n  <PageContainer title=\"Settings\" back>\r\n    <div className={classes.root}>\r\n      <div>\r\n        <Typography>Language</Typography>\r\n        <Language />\r\n      </div>\r\n    </div>\r\n  </PageContainer>\r\n);\r\nexport default withStyles(styles)(SettingsPage);\r\n","import Language from \"./component\";\r\nimport connectLanguage from \"./connector\";\r\nexport default connectLanguage(Language);\r\n","import * as React from \"react\";\r\nimport { entries } from \"lodash-es\";\r\n\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nconst languages: Record<string, string> = {\r\n  en: \"English\",\r\n  zh: \"Chinese\",\r\n  ru: \"Russian\"\r\n};\r\n\r\nexport interface LanguageProps {\r\n  currentLanguage: string;\r\n  onChangeLanguage(language: string): void;\r\n}\r\nconst Language: React.FC<LanguageProps> = ({\r\n  currentLanguage,\r\n  onChangeLanguage\r\n}) => {\r\n  const onChange = React.useCallback(\r\n    (e: React.ChangeEvent<{ value: unknown }>) => {\r\n      onChangeLanguage(e.target.value as string);\r\n    },\r\n    [onChangeLanguage]\r\n  );\r\n\r\n  return (\r\n    <Select value={currentLanguage} onChange={onChange}>\r\n      {entries(languages).map(([code, title]) => (\r\n        <MenuItem key={code} value={code}>\r\n          {title}\r\n        </MenuItem>\r\n      ))}\r\n    </Select>\r\n  );\r\n};\r\n\r\nexport default Language;\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { currentLanguageSelector } from \"@/services/i18n/selectors/language\";\r\nimport { setLanguage } from \"@/services/i18n/actions/set-language\";\r\nimport { createStructuredSelector } from \"@/state\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  currentLanguage: currentLanguageSelector\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  onChangeLanguage: setLanguage\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n);\r\n","import AbstractBehaviorEditor from \"./AbstractBehaviorEditor\";\r\nexport default AbstractBehaviorEditor;\r\n","import { OniSaveState } from \"../state\";\r\n\r\nimport { createServiceSelector } from \"./utils\";\r\n\r\nexport const saveGameSelector = createServiceSelector(\r\n  (state: OniSaveState) => state.saveGame\r\n);\r\n\r\nexport const isMockSelector = createServiceSelector(\r\n  (state: OniSaveState) => state.isMock\r\n);\r\n\r\nexport const hasSaveSelector = createServiceSelector(\r\n  (state: OniSaveState) => state.saveGame != null\r\n);\r\n\r\nexport const isSaveModifiedSelector = createServiceSelector(\r\n  (state: OniSaveState) => state.isModified\r\n);\r\n","import { createSelector } from \"reselect\";\r\nimport { GameObject } from \"oni-save-parser\";\r\nimport { flatMap, keyBy } from \"lodash-es\";\r\n\r\nimport { isNotNull } from \"@/utils\";\r\n\r\nimport { OniSaveState } from \"../state\";\r\n\r\nimport { saveGameSelector } from \"./save-game\";\r\nimport { createServiceSelector } from \"./utils\";\r\nimport { getGameObjectId } from \"../utils\";\r\n\r\nexport const gameObjectGroupsSelector = createServiceSelector(\r\n  (state: OniSaveState) => {\r\n    const saveGame = saveGameSelector.local(state);\r\n    return saveGame ? saveGame.gameObjects : null;\r\n  }\r\n);\r\n\r\nexport const gameObjectTypesByIdSelector = createServiceSelector(\r\n  createSelector(\r\n    gameObjectGroupsSelector.local,\r\n    groups => {\r\n      let gameObjectTypesById: Record<number, string> = {};\r\n      if (groups) {\r\n        for (const group of groups) {\r\n          const gameObjectIds = group.gameObjects\r\n            .map(getGameObjectId)\r\n            .filter(isNotNull);\r\n          for (const id of gameObjectIds) {\r\n            gameObjectTypesById[id] = group.name;\r\n          }\r\n        }\r\n      }\r\n      return gameObjectTypesById;\r\n    }\r\n  )\r\n);\r\n\r\nexport const gameObjectsByIdSelector = createServiceSelector(\r\n  createSelector(\r\n    gameObjectGroupsSelector.local,\r\n    groups => {\r\n      let gameObjectsById: Record<number, GameObject> = {};\r\n      if (groups) {\r\n        const gameObjects = flatMap(groups, group => group.gameObjects);\r\n        // Object keys are always strings, but we type it as number to ensure we\r\n        //  do not try to pass non-numeric values.\r\n        gameObjectsById = keyBy(gameObjects, getGameObjectId) as Record<\r\n          number,\r\n          GameObject\r\n        >;\r\n      }\r\n      return gameObjectsById;\r\n    }\r\n  )\r\n);\r\n","import * as React from \"react\";\r\n\r\nimport { createStyles, withStyles, WithStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\n\r\nimport Sidebar from \"@/components/Sidebar\";\r\nimport Appbar from \"@/components/Appbar\";\r\n\r\nconst SIDEBAR_WIDTH = 200;\r\n\r\nconst styles = createStyles({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    width: \"100%\",\r\n    height: \"100%\"\r\n  },\r\n  sidebar: {\r\n    width: SIDEBAR_WIDTH\r\n  },\r\n  appRoot: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    width: `calc(100% - ${SIDEBAR_WIDTH}px)`,\r\n    height: \"100%\",\r\n    marginLeft: SIDEBAR_WIDTH\r\n  },\r\n  content: {\r\n    minHeight: 0,\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    overflow: \"auto\"\r\n  }\r\n});\r\n\r\nexport interface PageContainerProps {\r\n  title: string;\r\n  back?: boolean;\r\n}\r\n\r\ntype Props = PageContainerProps & WithStyles<typeof styles>;\r\n\r\nconst PageContainer: React.FC<Props> = ({ classes, title, back, children }) => (\r\n  <div className={classes.root}>\r\n    <Drawer variant=\"permanent\" anchor=\"left\">\r\n      <Sidebar className={classes.sidebar} />\r\n    </Drawer>\r\n    <div className={classes.appRoot}>\r\n      <Appbar title={title} back={back} />\r\n      <div className={classes.content}>{children}</div>\r\n    </div>\r\n  </div>\r\n);\r\nexport default withStyles(styles)(PageContainer);\r\n","import {\r\n  SaveGame,\r\n  GameObject,\r\n  BehaviorName,\r\n  GameObjectBehavior,\r\n  GameObjectGroup,\r\n  getBehavior\r\n} from \"oni-save-parser\";\r\nimport { findIndex } from \"lodash-es\";\r\n\r\nimport { getGameObjectId } from \"../utils\";\r\nimport { OniSaveState } from \"../state\";\r\n\r\nexport class ModifySaveError extends Error {\r\n  constructor(message: string) {\r\n    super(message);\r\n  }\r\n}\r\n\r\nexport function tryModifySaveGame(\r\n  state: OniSaveState,\r\n  modifier: (saveGame: SaveGame) => SaveGame\r\n): OniSaveState {\r\n  let { saveGame } = state;\r\n  if (saveGame) {\r\n    try {\r\n      saveGame = modifier(saveGame);\r\n      state = {\r\n        ...state,\r\n        saveGame,\r\n        isModified: true\r\n      };\r\n    } catch (e) {\r\n      if (!(e instanceof ModifySaveError)) {\r\n        throw e;\r\n      }\r\n    }\r\n  }\r\n  return state;\r\n}\r\n\r\nexport function addGameObject(\r\n  saveGame: SaveGame,\r\n  gameObjectType: string,\r\n  gameObject: GameObject\r\n): SaveGame {\r\n  let groupIndex = findIndex(\r\n    saveGame.gameObjects,\r\n    x => x.name === gameObjectType\r\n  );\r\n  if (groupIndex === -1) {\r\n    const group: GameObjectGroup = {\r\n      name: gameObjectType,\r\n      gameObjects: [gameObject]\r\n    };\r\n    return {\r\n      ...saveGame,\r\n      gameObjects: [...saveGame.gameObjects, group]\r\n    };\r\n  }\r\n\r\n  const gameObjects = [...saveGame.gameObjects];\r\n  gameObjects[groupIndex] = {\r\n    ...gameObjects[groupIndex],\r\n    gameObjects: [...gameObjects[groupIndex].gameObjects, gameObject]\r\n  };\r\n\r\n  return {\r\n    ...saveGame,\r\n    gameObjects\r\n  };\r\n}\r\n\r\nexport function removeGameObject(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number\r\n): SaveGame {\r\n  const [groupIndex, gameObjectIndex] = getGameObjectLocationById(\r\n    saveGame,\r\n    gameObjectId\r\n  );\r\n\r\n  // We need to use basic spread here instead of merge(), as merge treats\r\n  //  empty array the same as empty object and will use the source value.\r\n  // We want to directly set an empty array if we remove the last object.\r\n  let newSaveGame = {\r\n    ...saveGame,\r\n    gameObjects: replace(saveGame.gameObjects, groupIndex, {\r\n      ...saveGame.gameObjects[groupIndex],\r\n      gameObjects: drop(\r\n        saveGame.gameObjects[groupIndex].gameObjects,\r\n        gameObjectIndex\r\n      )\r\n    })\r\n  };\r\n\r\n  return newSaveGame;\r\n}\r\n\r\nexport function requireGameObject(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number,\r\n  gameObjectType?: string\r\n): GameObject {\r\n  const [groupIndex, gameObjectIndex] = getGameObjectLocationById(\r\n    saveGame,\r\n    gameObjectId\r\n  );\r\n  if (\r\n    gameObjectType &&\r\n    saveGame.gameObjects[groupIndex].name !== gameObjectType\r\n  ) {\r\n    throw new ModifySaveError(\r\n      `Expected GameObject ${gameObjectId} to be type ${gameObjectType}.`\r\n    );\r\n  }\r\n  return saveGame.gameObjects[groupIndex].gameObjects[gameObjectIndex];\r\n}\r\n\r\nexport function requireBehavior<T extends GameObjectBehavior>(\r\n  gameObject: GameObject,\r\n  behaviorName: BehaviorName<T>\r\n): T {\r\n  const behavior = getBehavior(gameObject, behaviorName);\r\n  if (!behavior) {\r\n    throw new ModifySaveError(\r\n      `Expected GameObject to have behavior ${behaviorName}.`\r\n    );\r\n  }\r\n  return behavior;\r\n}\r\n\r\nexport function replaceGameObject(\r\n  saveGame: SaveGame,\r\n  gameObject: GameObject\r\n): SaveGame {\r\n  const gameObjectId = getGameObjectId(gameObject);\r\n  if (!gameObjectId) {\r\n    throw new ModifySaveError(`GameObject ${gameObjectId} has no id.`);\r\n  }\r\n\r\n  const [groupIndex, gameObjectIndex] = getGameObjectLocationById(\r\n    saveGame,\r\n    gameObjectId\r\n  );\r\n\r\n  let newSaveGame = {\r\n    ...saveGame,\r\n    gameObjects: replace(saveGame.gameObjects, groupIndex, {\r\n      ...saveGame.gameObjects[groupIndex],\r\n      gameObjects: replace(\r\n        saveGame.gameObjects[groupIndex].gameObjects,\r\n        gameObjectIndex,\r\n        gameObject\r\n      )\r\n    })\r\n  };\r\n\r\n  return newSaveGame;\r\n}\r\n\r\nexport type DataModifier<T> = Partial<T> | ((data: T) => T);\r\nexport function changeStateBehaviorData<\r\n  T extends GameObjectBehavior,\r\n  K extends \"templateData\" | \"extraData\"\r\n>(\r\n  gameObject: GameObject,\r\n  behaviorName: BehaviorName<T>,\r\n  dataKey: K,\r\n  modifier: DataModifier<T[K]>\r\n): GameObject {\r\n  const behaviorIndex = findIndex(\r\n    gameObject.behaviors,\r\n    x => x.name === behaviorName\r\n  );\r\n  if (behaviorIndex === -1) {\r\n    throw new ModifySaveError(\r\n      `GameObject does not have behavior \"${behaviorName}\".`\r\n    );\r\n  }\r\n\r\n  const behavior = gameObject.behaviors[behaviorIndex];\r\n  const newData = applyModifier(behavior[dataKey], modifier);\r\n\r\n  return {\r\n    ...gameObject,\r\n    behaviors: replace(gameObject.behaviors, behaviorIndex, {\r\n      ...gameObject.behaviors[behaviorIndex],\r\n      [dataKey]: newData\r\n    })\r\n  };\r\n}\r\n\r\nexport function set(obj: any, path: string[], value: any): any {\r\n  if (path.length === 0) {\r\n    return value;\r\n  }\r\n\r\n  obj = { ...obj };\r\n  let target = obj;\r\n  for (const key of path.slice(0, -1)) {\r\n    const prop = { ...target[key] };\r\n    target[key] = prop;\r\n    target = prop;\r\n  }\r\n  target[path[path.length - 1]] = value;\r\n\r\n  return obj;\r\n}\r\n\r\nexport function setArrayDict<TKey, TValue>(\r\n  arrayDict: [TKey, TValue][],\r\n  key: TKey,\r\n  value: TValue\r\n): [TKey, TValue][] {\r\n  const index = findIndex(arrayDict, x => x[0] === key);\r\n  if (index === -1) {\r\n    throw new Error(\"Key not found.\");\r\n  }\r\n\r\n  return replace<[TKey, TValue]>(arrayDict, index, [key, value]);\r\n}\r\n\r\nfunction applyModifier<T>(data: T, modifier: DataModifier<T>): T {\r\n  let newData: T;\r\n  if (typeof modifier === \"function\") {\r\n    newData = modifier(data);\r\n  } else {\r\n    newData = {\r\n      ...data,\r\n      ...modifier\r\n    };\r\n  }\r\n  return newData;\r\n}\r\n\r\nfunction getGameObjectLocationById(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number\r\n): [number, number] {\r\n  const { gameObjects: gameObjectGroups } = saveGame;\r\n  let gameObjectIndex = -1;\r\n  for (let groupIndex = 0; groupIndex < gameObjectGroups.length; groupIndex++) {\r\n    const group = gameObjectGroups[groupIndex];\r\n    gameObjectIndex = getGameObjectIndexById(group, gameObjectId);\r\n    if (gameObjectIndex !== -1) {\r\n      return [groupIndex, gameObjectIndex];\r\n    }\r\n  }\r\n\r\n  throw new ModifySaveError(\r\n    `GameObject ${gameObjectId} does not exist in the save.`\r\n  );\r\n}\r\n\r\nfunction getGameObjectIndexById(group: GameObjectGroup, gameObjectId: number) {\r\n  const { gameObjects } = group;\r\n  for (\r\n    let gameObjectIndex = 0;\r\n    gameObjectIndex < gameObjects.length;\r\n    gameObjectIndex++\r\n  ) {\r\n    const gameObject = gameObjects[gameObjectIndex];\r\n    if (getGameObjectId(gameObject) === gameObjectId) {\r\n      return gameObjectIndex;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\nfunction drop<T>(array: T[], index: number): T[] {\r\n  return [...array.slice(0, index), ...array.slice(index + 1)];\r\n}\r\n\r\nfunction replace<T>(array: T[], index: number, value: T): T[] {\r\n  return [...array.slice(0, index), value, ...array.slice(index + 1)];\r\n}\r\n","import { forEach } from \"lodash-es\";\r\n\r\nexport function attachProps<\r\n  TTarget,\r\n  TSubComponents extends Record<string, any>\r\n>(component: TTarget, subComponents: TSubComponents): TTarget & TSubComponents {\r\n  const c = component as any; //TTarget & TSubComponents;\r\n  forEach(subComponents, (component, key) => {\r\n    c[key] = component;\r\n  });\r\n  return c;\r\n}\r\n\r\nexport function isNotNull<T>(x: T | null | undefined): x is T {\r\n  return x != null;\r\n}\r\n\r\nexport function maybeArray(x: string | string[]): string[] {\r\n  if (Array.isArray(x)) {\r\n    return x;\r\n  }\r\n  return [x];\r\n}\r\n\r\nexport function keysOfType<T>(type: T): (keyof T)[] {\r\n  return Object.keys(type) as any;\r\n}\r\n","import RedirectIfNoSave from \"./component\";\r\nimport connectRedirectIfNoSave from \"./connector\";\r\n\r\nexport default connectRedirectIfNoSave(RedirectIfNoSave);\r\n","import { AppState } from \"@/state\";\r\n\r\nimport { OniSaveState } from \"../state\";\r\n\r\nexport interface OniSaveServiceSelector<T> {\r\n  (state: AppState): T;\r\n  local(state: OniSaveState): T;\r\n}\r\n\r\nexport function createServiceSelector<T>(\r\n  selector: (state: OniSaveState) => T\r\n): OniSaveServiceSelector<T> {\r\n  const rootSelector = (state: AppState) => selector(state.services.oniSave);\r\n  rootSelector.local = selector;\r\n  return rootSelector;\r\n}\r\n","import { SaveGame } from \"oni-save-parser\";\r\nimport { LoadingStatus } from \"../state\";\r\nimport { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_BEGIN = \"oni-save/receive:begin\";\r\nexport const receiveOniSaveBegin = (\r\n  operation: LoadingStatus.Loading | LoadingStatus.Saving,\r\n  clearExisting?: boolean\r\n) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_BEGIN as typeof ACTION_RECEIVE_ONISAVE_BEGIN,\r\n  payload: { clearExisting },\r\n  meta: { operation }\r\n});\r\nexport type ReceiveOniSaveBeginAction = ReturnType<typeof receiveOniSaveBegin>;\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_ERROR = \"oni-save/receive:error\";\r\nexport const receiveOniSaveError = (\r\n  error: Error,\r\n  operation: LoadingStatus.Loading | LoadingStatus.Saving\r\n) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_ERROR as typeof ACTION_RECEIVE_ONISAVE_ERROR,\r\n  payload: error,\r\n  meta: { operation }\r\n});\r\nexport type ReceiveOniSaveErrorAction = ReturnType<typeof receiveOniSaveError>;\r\n\r\nexport const ACTION_RECEIVE_ONISAVE_SUCCESS = \"oni-save/receive:success\";\r\nexport const receiveOniSaveSuccess = (\r\n  oniSave: SaveGame,\r\n  operation: LoadingStatus.Loading | LoadingStatus.Saving\r\n) => ({\r\n  type: ACTION_RECEIVE_ONISAVE_SUCCESS as typeof ACTION_RECEIVE_ONISAVE_SUCCESS,\r\n  payload: oniSave,\r\n  meta: { operation }\r\n});\r\nexport type ReceiveOniSaveSuccessAction = ReturnType<\r\n  typeof receiveOniSaveSuccess\r\n>;\r\n\r\nexport type ReceiveOniSaveAction =\r\n  | ReceiveOniSaveBeginAction\r\n  | ReceiveOniSaveErrorAction\r\n  | ReceiveOniSaveSuccessAction;\r\n\r\nconst types = [\r\n  ACTION_RECEIVE_ONISAVE_BEGIN,\r\n  ACTION_RECEIVE_ONISAVE_ERROR,\r\n  ACTION_RECEIVE_ONISAVE_SUCCESS\r\n];\r\nexport function isReceiveOniSaveAction(\r\n  action: AnyAction\r\n): action is ReceiveOniSaveAction {\r\n  return types.indexOf(action.type) !== -1;\r\n}\r\n","import { AppState } from \"@/state\";\r\n\r\nexport const loadingStatusSelector = (state: AppState) =>\r\n  state.services.oniSave.loadingStatus;\r\n\r\nexport const loadingStatusMessageSelector = (state: AppState) =>\r\n  state.services.oniSave.loadingProgressMessage;\r\n\r\nexport const loadingErrorSelector = (state: AppState) =>\r\n  state.services.oniSave.loadError;\r\n\r\nexport const loadingErrorMessageSelector = (state: AppState) => {\r\n  const error = loadingErrorSelector(state);\r\n  if (error) {\r\n    return error.message;\r\n  }\r\n  return null;\r\n};\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_ONISAVE_IMPORT_BEHAVIORS = \"oni-save/import-behaviors\";\r\nexport const importBehaviors = (gameObjectId: number, file: File) => ({\r\n  type: ACTION_ONISAVE_IMPORT_BEHAVIORS as typeof ACTION_ONISAVE_IMPORT_BEHAVIORS,\r\n  payload: { gameObjectId, file }\r\n});\r\nexport type ImportBehaviorsAction = ReturnType<typeof importBehaviors>;\r\n\r\nexport const ACTION_ONISAVE_IMPORT_WARN_CHECKSUM =\r\n  \"oni-save/import/warn-checksum\";\r\nexport const importWarnChecksum = () => ({\r\n  type: ACTION_ONISAVE_IMPORT_WARN_CHECKSUM as typeof ACTION_ONISAVE_IMPORT_WARN_CHECKSUM\r\n});\r\nexport type ImportWarnChecksumAction = ReturnType<typeof importWarnChecksum>;\r\nexport function isImportWarnChecksumAction(\r\n  action: AnyAction\r\n): action is ImportWarnChecksumAction {\r\n  return action.type === ACTION_ONISAVE_IMPORT_WARN_CHECKSUM;\r\n}\r\n\r\nexport const ACTION_ONISAVE_IMPORT_CONFIRM = \"oni-save/import/confirm\";\r\nexport const importConfirm = (doImport: boolean) => ({\r\n  type: ACTION_ONISAVE_IMPORT_CONFIRM as typeof ACTION_ONISAVE_IMPORT_CONFIRM,\r\n  payload: doImport\r\n});\r\nexport type ImportConfirmAction = ReturnType<typeof importConfirm>;\r\nexport function isImportConfirmAction(\r\n  action: AnyAction\r\n): action is ImportWarnChecksumAction {\r\n  return action.type === ACTION_ONISAVE_IMPORT_CONFIRM;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport enum BehaviorDataTarget {\r\n  Template = \"templateData\",\r\n  Extra = \"extraData\"\r\n}\r\n\r\nexport const ACTION_ONISAVE_MODIFY_BEHAVIOR = \"oni-save/modify-behavior\";\r\nexport const modifyBehavior = (\r\n  gameObjectId: number,\r\n  behaviorId: string,\r\n  target: BehaviorDataTarget,\r\n  value: any,\r\n  merge: boolean = false\r\n) => ({\r\n  type: ACTION_ONISAVE_MODIFY_BEHAVIOR as typeof ACTION_ONISAVE_MODIFY_BEHAVIOR,\r\n  payload: { gameObjectId, behaviorId, target, value, merge }\r\n});\r\nexport type ModifyBehaviorAction = ReturnType<typeof modifyBehavior>;\r\n\r\nexport function isModifyBehaviorAction(\r\n  action: AnyAction\r\n): action is ModifyBehaviorAction {\r\n  return action.type === ACTION_ONISAVE_MODIFY_BEHAVIOR;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_ONISAVE_PARSE_PROGRESS = \"onisave/parse-progress\";\r\n\r\nexport const parseProgress = (message: string) => ({\r\n  type: ACTION_ONISAVE_PARSE_PROGRESS as typeof ACTION_ONISAVE_PARSE_PROGRESS,\r\n  payload: { message }\r\n});\r\n\r\nexport type ParseProgressAction = ReturnType<typeof parseProgress>;\r\n\r\nexport function isParseProgressAction(\r\n  action: AnyAction\r\n): action is ParseProgressAction {\r\n  return action.type === ACTION_ONISAVE_PARSE_PROGRESS;\r\n}\r\n","import platform from \"platform\";\r\n\r\nconst OS_WINDOWS = /windows/i;\r\nconst OS_MAC = /Mac|iOS|(OS\\ X)/;\r\nconst OS_LINUX = /linux/i;\r\n\r\nexport type OSType = \"windows\" | \"mac\" | \"linux\" | \"unknown\";\r\n\r\nconst osPlatform = (platform.os && platform.os.family) || \"unknown\";\r\nexport const OSType: OSType = OS_WINDOWS.test(osPlatform)\r\n  ? \"windows\"\r\n  : OS_MAC.test(osPlatform)\r\n    ? \"mac\"\r\n    : OS_LINUX.test(osPlatform)\r\n      ? \"linux\"\r\n      : \"unknown\";\r\n\r\nexport const isProd: boolean = process.env.NODE_ENV === \"production\";\r\n","import { createHashHistory } from \"history\";\r\n\r\nconst history = createHashHistory({\r\n  // Only needed for browserHistory\r\n  // basename: __webpack_public_path__\r\n});\r\nexport default history;\r\n","import i18n from \"i18next\";\r\nimport { initReactI18next } from \"react-i18next\";\r\n\r\nimport { isProd } from \"@/runtime-env\";\r\n\r\n// TODO: Use backends to save on file space\r\n//  Deferring until I get a chance to focus on splitting the bundles.\r\n// import Backend from \"i18next-xhr-backend\";\r\n\r\ni18n.use(initReactI18next).init({\r\n  fallbackLng: \"en\",\r\n\r\n  ns: [\"common\", \"oni\"],\r\n  defaultNS: \"common\",\r\n\r\n  resources: {\r\n    en: {\r\n      common: require(\"@/translations/en/common.json\"),\r\n      oni: require(\"@/translations/en/oni.json\")\r\n    },\r\n    zh: {\r\n      common: require(\"@/translations/zh/common.json\"),\r\n      oni: require(\"@/translations/zh/oni.json\")\r\n    },\r\n    ru: {\r\n      common: require(\"@/translations/ru/common.json\"),\r\n    }\r\n  },\r\n\r\n  debug: !isProd,\r\n\r\n  interpolation: {\r\n    escapeValue: false // not needed for react!!\r\n  },\r\n\r\n  react: {\r\n    wait: true\r\n  }\r\n});\r\n\r\nexport default i18n;\r\n","export const ACTION_ONISAVE_LOAD = \"oni-save/load\";\r\nexport const loadOniSave = (file: File) => ({\r\n  type: ACTION_ONISAVE_LOAD as typeof ACTION_ONISAVE_LOAD,\r\n  payload: file\r\n});\r\nexport type LoadOniSaveAction = ReturnType<typeof loadOniSave>;\r\n","import {\r\n  compose,\r\n  createStore as createReduxStore,\r\n  applyMiddleware\r\n} from \"redux\";\r\n\r\nimport createSagaMiddleware from \"redux-saga\";\r\n\r\nimport { routerMiddleware } from \"connected-react-router\";\r\n\r\nimport history from \"@/history\";\r\nimport { defaultAppState } from \"@/state\";\r\n\r\nimport reducer from \"./reducer\";\r\nimport saga from \"./saga\";\r\n\r\nimport { loadPersistedState, savePersistedState } from \"./persist\";\r\n\r\nimport {\r\n  actionSanitizer,\r\n  stateSanitizer,\r\n  actionsBlacklist\r\n} from \"./devtool-sanitizer\";\r\n\r\nfunction createStore() {\r\n  const composeEnhancers =\r\n    (window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ &&\r\n      window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n        actionSanitizer,\r\n        stateSanitizer,\r\n        actionsBlacklist\r\n      })) ||\r\n    compose;\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n\r\n  const initialState = loadPersistedState(defaultAppState);\r\n\r\n  const store = createReduxStore(\r\n    reducer,\r\n    initialState,\r\n    composeEnhancers(applyMiddleware(sagaMiddleware, routerMiddleware(history)))\r\n  );\r\n\r\n  sagaMiddleware.run(saga);\r\n\r\n  store.subscribe(() => savePersistedState(store.getState()));\r\n\r\n  return store;\r\n}\r\n\r\nconst store = createStore();\r\nexport default store;\r\n","export interface I18NState {\r\n  language: string;\r\n}\r\n\r\nexport const defaultI18NState: Readonly<I18NState> = {\r\n  language: \"en\"\r\n};\r\nObject.freeze(defaultI18NState);\r\n","export const ACTION_SET_LANGUAGE = \"app/set-language\";\r\nexport const setLanguage = (language: string) => ({\r\n  type: ACTION_SET_LANGUAGE as typeof ACTION_SET_LANGUAGE,\r\n  payload: language\r\n});\r\nexport type SetLanguageAction = ReturnType<typeof setLanguage>;\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_ONISAVE_CHANGE_GEYSER_TYPE = \"oni-save/change-geyser-type\";\r\n\r\n/**\r\n * Changes the game object type of the given game object id.\r\n *\r\n * This is a dangerous operation, and intended only for swapping geysers.\r\n */\r\nexport const changeGeyserType = (gameObjectId: number, geyserType: string) => ({\r\n  type: ACTION_ONISAVE_CHANGE_GEYSER_TYPE as typeof ACTION_ONISAVE_CHANGE_GEYSER_TYPE,\r\n  payload: { gameObjectId, geyserType }\r\n});\r\nexport type ChangeGeyserTypeAction = ReturnType<typeof changeGeyserType>;\r\nexport function isChangeGeyserTypeAction(\r\n  action: AnyAction\r\n): action is ChangeGeyserTypeAction {\r\n  return action.type === ACTION_ONISAVE_CHANGE_GEYSER_TYPE;\r\n}\r\n","import {\r\n  SaveGame,\r\n  getBehavior,\r\n  KPrefabIDBehavior,\r\n  GameObject\r\n} from \"oni-save-parser\";\r\nimport { find } from \"lodash-es\";\r\n\r\n// We cannot use a selector for this, as it is called with draft objects from immer.\r\nexport function getGameObjectById(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number\r\n): GameObject | null {\r\n  for (const group of saveGame.gameObjects) {\r\n    for (const gameObject of group.gameObjects) {\r\n      const id = getGameObjectId(gameObject);\r\n      if (id === gameObjectId) {\r\n        return gameObject;\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function getGameObjectId(gameObject: GameObject): number | null {\r\n  const idBehavior = getBehavior(gameObject, KPrefabIDBehavior);\r\n  if (!idBehavior) {\r\n    return null;\r\n  }\r\n\r\n  return idBehavior.templateData.InstanceID;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_ONISAVE_CLONE_DUPLICANT = \"oni-save/clone-duplicant\";\r\nexport const cloneDuplicant = (gameObjectId: number) => ({\r\n  type: ACTION_ONISAVE_CLONE_DUPLICANT as typeof ACTION_ONISAVE_CLONE_DUPLICANT,\r\n  payload: { gameObjectId }\r\n});\r\nexport type CloneDuplicantAction = ReturnType<typeof cloneDuplicant>;\r\n\r\nexport function isCloneDuplicantAction(\r\n  action: AnyAction\r\n): action is CloneDuplicantAction {\r\n  return action.type === ACTION_ONISAVE_CLONE_DUPLICANT;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_ONISAVE_COPY_BEHAVIORS = \"oni-save/copy-behaviors\";\r\nexport const copyBehaviors = (gameObjectId: number, behaviors: string[]) => ({\r\n  type: ACTION_ONISAVE_COPY_BEHAVIORS as typeof ACTION_ONISAVE_COPY_BEHAVIORS,\r\n  payload: { gameObjectId, behaviors }\r\n});\r\nexport type CopyBehaviorsAction = ReturnType<typeof copyBehaviors>;\r\n\r\nexport function isCopyBehaviorsAction(\r\n  action: AnyAction\r\n): action is CopyBehaviorsAction {\r\n  return action.type === ACTION_ONISAVE_COPY_BEHAVIORS;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_ONISAVE_DELETE_LOOSE_MATERIAL =\r\n  \"oni-save/delete-loose-material\";\r\nexport const deleteLooseMaterial = (materialType?: string) => ({\r\n  type: ACTION_ONISAVE_DELETE_LOOSE_MATERIAL as typeof ACTION_ONISAVE_DELETE_LOOSE_MATERIAL,\r\n  payload: { materialType }\r\n});\r\nexport type DeleteLooseMaterialAction = ReturnType<typeof deleteLooseMaterial>;\r\nexport function isDeleteLooseMaterialAction(\r\n  action: AnyAction\r\n): action is DeleteLooseMaterialAction {\r\n  return action.type === ACTION_ONISAVE_DELETE_LOOSE_MATERIAL;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_ONISAVE_LOAD_EXAMPLE = \"oni-save/load-example\";\r\nexport const loadExampleSave = () => ({\r\n  type: ACTION_ONISAVE_LOAD_EXAMPLE\r\n});\r\nexport type LoadExampleSaveAction = ReturnType<typeof loadExampleSave>;\r\nexport function isLoadExampleSaveAction(\r\n  action: AnyAction\r\n): action is LoadExampleSaveAction {\r\n  return action.type === ACTION_ONISAVE_LOAD_EXAMPLE;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport interface BehaviorMergeData {\r\n  templateData?: any;\r\n  extraData?: any;\r\n}\r\n\r\nexport const ACTION_ONISAVE_MERGE_BEHAVIORS = \"oni-save/merge-behaviors\";\r\nexport const mergeBehaviors = (\r\n  gameObjectId: number,\r\n  behaviors: Record<string, BehaviorMergeData>\r\n) => ({\r\n  type: ACTION_ONISAVE_MERGE_BEHAVIORS as typeof ACTION_ONISAVE_MERGE_BEHAVIORS,\r\n  payload: { gameObjectId, behaviors }\r\n});\r\nexport type MergeBehaviorsAction = ReturnType<typeof mergeBehaviors>;\r\n\r\nexport function isMergeBehaviorsAction(\r\n  action: AnyAction\r\n): action is MergeBehaviorsAction {\r\n  return action.type === ACTION_ONISAVE_MERGE_BEHAVIORS;\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport { GameObjectBehavior, BehaviorName } from \"oni-save-parser\";\r\n\r\nexport const ACTION_MODIFY_BEHAVIOR_PATH = \"oni-save/modify-behavior-path\";\r\n\r\nexport function modifyBehaviorPath<\r\n  T extends GameObjectBehavior,\r\n  K extends keyof T,\r\n  K2 extends keyof T[K]\r\n>(\r\n  gameObjectId: number,\r\n  behaviorName: BehaviorName<T>,\r\n  behaviorPath: [K, K2],\r\n  value: T[K][K2]\r\n): ModifyBehaviorPathAction;\r\nexport function modifyBehaviorPath<\r\n  T extends GameObjectBehavior,\r\n  K extends keyof T,\r\n  K2 extends keyof T[K],\r\n  K3 extends keyof T[K][K2]\r\n>(\r\n  gameObjectId: number,\r\n  behaviorName: BehaviorName<T>,\r\n  behaviorPath: [K, K2, K3],\r\n  value: T[K][K2][K3]\r\n): ModifyBehaviorPathAction;\r\nexport function modifyBehaviorPath(\r\n  gameObjectId: number,\r\n  behaviorName: string,\r\n  behaviorPath: string[],\r\n  value: any\r\n): ModifyBehaviorPathAction {\r\n  return {\r\n    type: ACTION_MODIFY_BEHAVIOR_PATH,\r\n    payload: {\r\n      gameObjectId,\r\n      behaviorName,\r\n      behaviorPath,\r\n      value\r\n    }\r\n  };\r\n}\r\n\r\nexport interface ModifyBehaviorPathAction {\r\n  type: typeof ACTION_MODIFY_BEHAVIOR_PATH;\r\n  payload: {\r\n    gameObjectId: number;\r\n    behaviorName: string;\r\n    behaviorPath: string[];\r\n    value: any;\r\n  };\r\n}\r\nexport function isModifyBehaviorPathAction(\r\n  action: AnyAction\r\n): action is ModifyBehaviorPathAction {\r\n  return action.type === ACTION_MODIFY_BEHAVIOR_PATH;\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport { QualityLevelSettings } from \"oni-save-parser\";\r\n\r\nexport const ACTION_ONISAVE_MODIFY_DIFFICULTY = \"oni-save/modify-difficulty\";\r\nexport const modifyDifficulty = (\r\n  difficultyType: QualityLevelSettings[0],\r\n  value: string\r\n) => ({\r\n  type: ACTION_ONISAVE_MODIFY_DIFFICULTY as typeof ACTION_ONISAVE_MODIFY_DIFFICULTY,\r\n  payload: { difficultyType, value }\r\n});\r\nexport type ModifyDifficultyAction = ReturnType<typeof modifyDifficulty>;\r\nexport function isModifyDifficultyAction(\r\n  action: AnyAction\r\n): action is ModifyDifficultyAction {\r\n  return action.type === ACTION_ONISAVE_MODIFY_DIFFICULTY;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_ONISAVE_MODIFY_RAW = \"oni-save/modify-raw\";\r\nexport const modifyRaw = (path: string[], data: any) => ({\r\n  type: ACTION_ONISAVE_MODIFY_RAW as typeof ACTION_ONISAVE_MODIFY_RAW,\r\n  payload: { path, data }\r\n});\r\nexport type ModifyRawAction = ReturnType<typeof modifyRaw>;\r\nexport function isModifyRawAction(\r\n  action: AnyAction\r\n): action is ModifyRawAction {\r\n  return action.type === ACTION_ONISAVE_MODIFY_RAW;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nexport const ACTION_ONISAVE_PASTE_BEHAVIORS = \"oni-save/paste-behaviors\";\r\nexport const pasteBehaviors = (gameObjectId: number, behaviors?: string[]) => ({\r\n  type: ACTION_ONISAVE_PASTE_BEHAVIORS as typeof ACTION_ONISAVE_PASTE_BEHAVIORS,\r\n  payload: { gameObjectId, behaviors }\r\n});\r\nexport type PasteBehaviorAction = ReturnType<typeof pasteBehaviors>;\r\n\r\nexport function isPasteBehaviorsAction(\r\n  action: AnyAction\r\n): action is PasteBehaviorAction {\r\n  return action.type === ACTION_ONISAVE_PASTE_BEHAVIORS;\r\n}\r\n","export const ACTION_ONISAVE_EXPORT_BEHAVIORS = \"oni-save/export-behaviors\";\r\nexport const exportBehaviors = (gameObjectId: number, behaviors: string[]) => ({\r\n  type: ACTION_ONISAVE_EXPORT_BEHAVIORS as typeof ACTION_ONISAVE_EXPORT_BEHAVIORS,\r\n  payload: { gameObjectId, behaviors }\r\n});\r\nexport type ExportBehaviorsAction = ReturnType<typeof exportBehaviors>;\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nimport {\r\n  RESPONSE_PROGRESS,\r\n  RESPONSE_PARSE_ERROR,\r\n  RESPONSE_PARSE_SUCCESS,\r\n  RESPONSE_WRITE_ERROR,\r\n  RESPONSE_WRITE_SUCCESS,\r\n  SaveParserResultEvent,\r\n  parseSave as parseSaveCommand,\r\n  writeSave as writeSaveCommand,\r\n  jsonToError\r\n} from \"./worker-messages\";\r\n\r\nimport SaveLoadWorker from \"worker-loader!./save-serializer.worker\";\r\n\r\nconst worker = new SaveLoadWorker();\r\n\r\nexport function parseSave(\r\n  data: ArrayBuffer,\r\n  onProgress?: (message: string) => void\r\n): Promise<SaveGame> {\r\n  const promise = new Promise<SaveGame>((accept, reject) => {\r\n    const unhook = () => {\r\n      worker.onerror = null;\r\n      worker.onmessage = null;\r\n    };\r\n\r\n    worker.onerror = error => reject(error);\r\n    worker.onmessage = (message: SaveParserResultEvent) => {\r\n      const { data } = message;\r\n      switch (data.type) {\r\n        case RESPONSE_PROGRESS:\r\n          onProgress && onProgress(data.message);\r\n          break;\r\n        case RESPONSE_PARSE_SUCCESS:\r\n          unhook();\r\n          accept(data.saveGame);\r\n          break;\r\n        case RESPONSE_PARSE_ERROR:\r\n          unhook();\r\n          reject(jsonToError(data.error));\r\n          break;\r\n      }\r\n    };\r\n  });\r\n\r\n  worker.postMessage(parseSaveCommand(data));\r\n\r\n  return promise;\r\n}\r\n\r\nexport function writeSave(\r\n  saveGame: SaveGame,\r\n  onProgress?: (message: string) => void\r\n): Promise<ArrayBuffer> {\r\n  const promise = new Promise<ArrayBuffer>((accept, reject) => {\r\n    const unhook = () => {\r\n      worker.onerror = null;\r\n      worker.onmessage = null;\r\n    };\r\n\r\n    worker.onerror = error => reject(error);\r\n    worker.onmessage = (message: SaveParserResultEvent) => {\r\n      const { data } = message;\r\n      switch (data.type) {\r\n        case RESPONSE_PROGRESS:\r\n          onProgress && onProgress(data.message);\r\n          break;\r\n        case RESPONSE_WRITE_SUCCESS:\r\n          unhook();\r\n          accept(data.data);\r\n          break;\r\n        case RESPONSE_WRITE_ERROR:\r\n          unhook();\r\n          reject(jsonToError(data.error));\r\n          break;\r\n      }\r\n    };\r\n  });\r\n\r\n  worker.postMessage(writeSaveCommand(saveGame));\r\n\r\n  return promise;\r\n}\r\n","export const ACTION_ONISAVE_SAVE = \"oni-save/save\";\r\nexport const saveOniSave = (fileName?: string) => ({\r\n  type: ACTION_ONISAVE_SAVE as typeof ACTION_ONISAVE_SAVE,\r\n  payload: fileName\r\n});\r\nexport type SaveOniSaveAction = ReturnType<typeof saveOniSave>;\r\n","import { AppState } from \"@/state\";\r\n\r\nexport const currentLanguageSelector = (state: AppState) =>\r\n  state.services.i18n.language;\r\n","import { RouteComponentProps } from \"react-router\";\r\n\r\nexport interface LinkProps extends RouteComponentProps {\r\n  to: string;\r\n  target?: string;\r\n  onClick?(e: React.MouseEvent<HTMLElement>): void;\r\n}\r\nexport function onLinkClick(\r\n  this: React.Component<LinkProps>,\r\n  event: React.MouseEvent<HTMLElement>\r\n) {\r\n  // Code copied from implementation of Link in react-router-dom\r\n  const { onClick, target, history } = this.props;\r\n\r\n  if (onClick) {\r\n    onClick(event);\r\n  }\r\n\r\n  if (\r\n    !event.defaultPrevented && // onClick prevented default\r\n    event.button === 0 && // ignore everything but left clicks\r\n    (!target || target === \"_self\") && // let browser handle \"target=_blank\" etc.\r\n    !isModifierPressed(event) // ignore clicks with modifier keys\r\n  ) {\r\n    event.preventDefault();\r\n\r\n    history.push(this.props.to);\r\n  }\r\n}\r\n\r\nfunction isModifierPressed(event: React.MouseEvent<any>) {\r\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\r\n}\r\n","import AbstractLoadButton from \"./component\";\r\nimport connectAbstractLoadButton from \"./connector\";\r\nexport default connectAbstractLoadButton(AbstractLoadButton);\r\n","import AbstractGameObjectList from \"./AbstractGameObjectList\";\r\nexport default AbstractGameObjectList;\r\n","import {\r\n  AccessorizerBehavior,\r\n  AIAttributeLevelsBehavior,\r\n  AITraitsBehavior,\r\n  MinionResumeBehavior,\r\n  BehaviorName\r\n} from \"oni-save-parser\";\r\n\r\nexport interface ExportableBehavior {\r\n  name: string;\r\n  i18nKey: string;\r\n  behavior: BehaviorName<any>;\r\n}\r\n\r\nexport const MinionExportableBehaviors: ExportableBehavior[] = [\r\n  {\r\n    name: \"Appearance\",\r\n    i18nKey: \"duplicant_appearance.noun_titlecase\",\r\n    behavior: AccessorizerBehavior\r\n  },\r\n  {\r\n    name: \"Attributes\",\r\n    i18nKey: \"duplicant_attribute.noun_titlecase_plural\",\r\n    behavior: AIAttributeLevelsBehavior\r\n  },\r\n  {\r\n    name: \"Traits\",\r\n    i18nKey: \"duplicant_trait.noun_titlecase_plural\",\r\n    behavior: AITraitsBehavior\r\n  },\r\n  {\r\n    name: \"Skills\",\r\n    i18nKey: \"duplicant_skills.noun_titlecase_plural\",\r\n    behavior: MinionResumeBehavior\r\n  }\r\n];\r\n","import * as React from \"react\";\r\nimport { BehaviorName } from \"oni-save-parser\";\r\n\r\nimport { withTranslation, WithTranslation } from \"react-i18next\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nexport interface BehaviorChoice {\r\n  name: string;\r\n  i18nKey: string;\r\n  behavior: BehaviorName<any>;\r\n}\r\n\r\nexport interface BehaviorChooserDialogProps {\r\n  title: string;\r\n  applyText: string;\r\n  open: boolean;\r\n  choices: BehaviorChoice[];\r\n  onApply(behaviors: string[]): void;\r\n  onCancel(): void;\r\n}\r\ntype Props = BehaviorChooserDialogProps & WithTranslation;\r\nconst BehaviorChooserDialog: React.FC<Props> = ({\r\n  title,\r\n  applyText,\r\n  open,\r\n  choices,\r\n  onApply,\r\n  onCancel,\r\n  t\r\n}) => {\r\n  const [selectedTargets, setSelectedTargets] = React.useState<string[]>([]);\r\n  const onCheckboxChange = React.useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      if (e.target.checked) {\r\n        // Add item\r\n        setSelectedTargets([...selectedTargets, e.target.value]);\r\n      } else {\r\n        // Remove item\r\n        setSelectedTargets(selectedTargets.filter(x => x !== e.target.value));\r\n      }\r\n    },\r\n    [selectedTargets, setSelectedTargets]\r\n  );\r\n  const onApplyClick = React.useCallback(() => {\r\n    onApply(selectedTargets);\r\n  }, [selectedTargets]);\r\n  return (\r\n    <Dialog open={open} airia-labeledby=\"behavior-chooser-dialog-title\">\r\n      {open && (\r\n        <React.Fragment>\r\n          <DialogTitle id=\"behavior-chooser-dialog-title\">{title}</DialogTitle>\r\n          <DialogContent>\r\n            {choices.map(({ name, i18nKey, behavior }) => (\r\n              <FormControlLabel\r\n                key={behavior}\r\n                control={\r\n                  <Checkbox\r\n                    checked={selectedTargets.indexOf(behavior) !== -1}\r\n                    value={behavior}\r\n                    onChange={onCheckboxChange}\r\n                    color=\"primary\"\r\n                  />\r\n                }\r\n                label={t(i18nKey, { defaultValue: name })}\r\n              />\r\n            ))}\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={onCancel}>\r\n              {t(\"dialog.verbs.cancel_titlecase\", { defaultValue: \"Cancel\" })}\r\n            </Button>\r\n            <Button onClick={onApplyClick} autoFocus>\r\n              {applyText}\r\n            </Button>\r\n          </DialogActions>\r\n        </React.Fragment>\r\n      )}\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default withTranslation()(BehaviorChooserDialog);\r\n","import * as React from \"react\";\r\nimport { AccessorizerBehavior, getAccessoryOfType } from \"oni-save-parser\";\r\n\r\nimport { createStyles, withStyles, WithStyles } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  DuplicantContainer,\r\n  Hair,\r\n  Head,\r\n  Eyes,\r\n  Body\r\n} from \"react-oni-duplicant\";\r\n\r\nimport AbstractBehaviorEditor from \"@/services/oni-save/components/AbstractBehaviorEditor\";\r\n\r\nconst AccessorizerEditor = AbstractBehaviorEditor.ofType(AccessorizerBehavior);\r\n\r\nexport interface DuplicantPortraitProps {\r\n  gameObjectId: number;\r\n  scale: number;\r\n}\r\n\r\nconst styles = createStyles({\r\n  portraitContainer: {\r\n    position: \"relative\"\r\n    // width: 80,\r\n    // height: 90\r\n  },\r\n  portrait: {\r\n    position: \"absolute\",\r\n    // left: 42,\r\n    // top: 50,\r\n    width: 0,\r\n    height: 0,\r\n    // transform: \"scale(.3)\",\r\n    transformOrigin: \"top left\"\r\n  }\r\n});\r\n\r\ntype Props = DuplicantPortraitProps & WithStyles<typeof styles>;\r\n\r\nconst DuplicantPortrait: React.FC<Props> = ({\r\n  classes,\r\n  gameObjectId,\r\n  scale\r\n}) => (\r\n  <AccessorizerEditor gameObjectId={gameObjectId}>\r\n    {({ templateData }) => {\r\n      if (!templateData) {\r\n        return <div>Error: No Data</div>;\r\n      }\r\n      return (\r\n        <div\r\n          className={classes.portraitContainer}\r\n          style={{ width: 240 * scale, height: 270 * scale }}\r\n        >\r\n          <div\r\n            className={classes.portrait}\r\n            style={{\r\n              left: 126 * scale,\r\n              top: 150 * scale,\r\n              transform: `scale(${scale})`\r\n            }}\r\n          >\r\n            <DuplicantContainer>\r\n              <Body\r\n                ordinal={ordinalFromAccessory(\r\n                  getAccessoryOfType(templateData.accessories, \"body\")!.guid\r\n                    .Guid\r\n                )}\r\n              />\r\n              <Head\r\n                ordinal={ordinalFromAccessory(\r\n                  getAccessoryOfType(templateData.accessories, \"headshape\")!\r\n                    .guid.Guid\r\n                )}\r\n              />\r\n              <Eyes\r\n                ordinal={ordinalFromAccessory(\r\n                  getAccessoryOfType(templateData.accessories, \"eyes\")!.guid\r\n                    .Guid\r\n                )}\r\n              />\r\n              <Hair\r\n                ordinal={ordinalFromAccessory(\r\n                  getAccessoryOfType(templateData.accessories, \"hair\")!.guid\r\n                    .Guid\r\n                )}\r\n              />\r\n            </DuplicantContainer>\r\n          </div>\r\n        </div>\r\n      );\r\n    }}\r\n  </AccessorizerEditor>\r\n);\r\nexport default withStyles(styles)(DuplicantPortrait);\r\n\r\nfunction ordinalFromAccessory(guid: string) {\r\n  let parts = guid.split(\".\");\r\n  const name = parts[parts.length - 1];\r\n  parts = name.split(\"_\");\r\n  return Number(parts[parts.length - 1]);\r\n}\r\n","import CommitTextField from \"./component\";\r\nexport default CommitTextField;\r\n","import { createSelector } from \"reselect\";\r\nimport { find } from \"lodash-es\";\r\nimport { getBehavior, SpacecraftManagerBehavior } from \"oni-save-parser\";\r\n\r\nimport { createServiceSelector } from \"./utils\";\r\nimport { saveGameSelector } from \"./save-game\";\r\n\r\nexport const spaceManagerSelector = createServiceSelector(\r\n  createSelector(\r\n    saveGameSelector.local,\r\n    saveGame => {\r\n      if (!saveGame) {\r\n        return null;\r\n      }\r\n\r\n      const saveGameGroup = find(\r\n        saveGame.gameObjects,\r\n        x => x.name === \"SaveGame\"\r\n      );\r\n      if (!saveGameGroup) {\r\n        return null;\r\n      }\r\n\r\n      const saveGameObject = saveGameGroup.gameObjects[0];\r\n      if (!saveGameObject) {\r\n        return null;\r\n      }\r\n\r\n      const spaceBehavior = getBehavior(\r\n        saveGameObject,\r\n        SpacecraftManagerBehavior\r\n      );\r\n      if (!spaceBehavior) {\r\n        return null;\r\n      }\r\n\r\n      return spaceBehavior.templateData;\r\n    }\r\n  )\r\n);\r\n","import \"es6-promise/auto\";\r\nimport \"typeface-roboto\";\r\n\r\nimport \"@/style.css\";\r\n\r\nimport \"@/debug\";\r\n\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\n\r\nimport Root from \"./root\";\r\n\r\nconst rootEl = document.getElementById(\"root\");\r\nif (rootEl) {\r\n  ReactDOM.render(<Root />, rootEl);\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./style.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/*\\r\\nThis should be kept minimal and only provide globals\\r\\nor non-react component styles.\\r\\n\\r\\nStyles for react components should use the jss style api provided\\r\\nby material-ui\\r\\n*/\\r\\n\\r\\nhtml,\\r\\nbody,\\r\\n#root {\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n\", \"\"]);\n","import { isProd } from \"@/runtime-env\";\r\n\r\nimport store from \"@/store/store\";\r\n\r\nimport {\r\n  receiveOniSaveSuccess,\r\n  receiveOniSaveError\r\n} from \"@/services/oni-save/actions/receive-onisave\";\r\nimport { LoadingStatus } from \"@/services/oni-save/state\";\r\n\r\nif (!isProd) {\r\n  window.loadMockSave = () => {\r\n    const mockSaveGame = require(\"@/__mocks__/save-game.json\");\r\n    store.dispatch(receiveOniSaveSuccess(mockSaveGame, LoadingStatus.Loading));\r\n  };\r\n  window.loadMockError = () => {\r\n    store.dispatch(\r\n      receiveOniSaveError(\r\n        new Error(\"This is a test error\"),\r\n        LoadingStatus.Loading\r\n      )\r\n    );\r\n  };\r\n}\r\n","import { Selector } from \"react-redux\";\r\nimport { createStructuredSelector as createSS } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nexport type StructuredStateProps<\r\n  TSelectors extends Record<string, Selector<AppState, TOwnProps, any>>,\r\n  TOwnProps = {}\r\n> = { [K in keyof TSelectors]: ReturnType<TSelectors[K]> };\r\n\r\n/**\r\n * Type wrangling function to provide better type inferencing\r\n * for createStructuredSelector against our AppState.\r\n *\r\n * By inverting the type relationship from the real cSS, we\r\n * allow the selector to become the primary inferred type\r\n * and generate the state props from its return types.\r\n */\r\nexport function createStructuredSelector<\r\n  TSelectors extends Record<string, Selector<AppState, any, any>>\r\n>(\r\n  selectors: TSelectors\r\n): (state: AppState) => StructuredStateProps<TSelectors> {\r\n  return createSS(selectors as any) as any;\r\n}\r\n","import { combineReducers, AnyAction } from \"redux\";\r\n\r\nimport { connectRouter } from \"connected-react-router\";\r\n\r\nimport i18nReducer from \"@/services/i18n/reducer\";\r\nimport oniSaveReducer from \"@/services/oni-save/reducer\";\r\nimport { OniSaveState, defaultOniSaveState } from \"@/services/oni-save/state\";\r\nimport { AppState, defaultAppState } from \"@/state\";\r\n\r\nimport history from \"@/history\";\r\nconst routerReducer = connectRouter(history);\r\n\r\nconst servicesReducer = combineReducers({\r\n  i18n: i18nReducer,\r\n  // FIXME: Not sure why I need to do this, perhaps some reducer in the reduceReducered oniSaveReducer does not specify a default\r\n  oniSave: (state: OniSaveState = defaultOniSaveState, action: AnyAction) =>\r\n    oniSaveReducer(state, action)\r\n});\r\n\r\nexport default function reducer(\r\n  state: AppState = defaultAppState,\r\n  action: AnyAction\r\n): AppState {\r\n  return {\r\n    router: routerReducer(state.router, action as any),\r\n    services: servicesReducer(state.services, action)\r\n  };\r\n}\r\n","import setLanguageReducer from \"./set-language\";\r\n\r\nexport default setLanguageReducer;\r\n","import { Action } from \"redux\";\r\n\r\nimport { I18NState, defaultI18NState } from \"../state\";\r\n\r\nimport {\r\n  ACTION_SET_LANGUAGE,\r\n  SetLanguageAction\r\n} from \"../actions/set-language\";\r\n\r\nimport i18n from \"../i18n\";\r\n\r\nexport default function setLanguageReducer(\r\n  state: I18NState = defaultI18NState,\r\n  action: Action\r\n): I18NState {\r\n  if (action.type !== ACTION_SET_LANGUAGE) {\r\n    return state;\r\n  }\r\n\r\n  const lang = (action as SetLanguageAction).payload;\r\n\r\n  i18n.changeLanguage(lang);\r\n\r\n  return {\r\n    ...state,\r\n    language: lang\r\n  };\r\n}\r\n","import reduceReducers from \"reduce-reducers\";\r\n\r\nimport changeGeyserTypeReducer from \"./change-geyser-type\";\r\nimport cloneDuplicantReducer from \"./clone-duplicant\";\r\nimport copyBehaviorsReducer from \"./copy-behaviors\";\r\nimport deleteLooseMaterial from \"./delete-looe-material\";\r\nimport importWarnChecksumReducer from \"./import-warn-checksum\";\r\nimport loadExampleSaveReducer from \"./load-example\";\r\nimport mergeBehaviorsReducer from \"./merge-behaviors\";\r\nimport modifyBehaviorPathReducer from \"./modify-behavior-path\";\r\nimport modifyBehaviorReducer from \"./modify-behavior\";\r\nimport modifyDifficultyReducer from \"./modify-difficulty\";\r\nimport modifyRawReducer from \"./modify-raw\";\r\nimport parseProgressReducer from \"./parse-progress\";\r\nimport pasteBehaviorsReducer from \"./paste-behaviors\";\r\nimport receiveOniSaveReducer from \"./receive-onisave\";\r\n\r\nexport default reduceReducers(\r\n  changeGeyserTypeReducer,\r\n  cloneDuplicantReducer,\r\n  copyBehaviorsReducer,\r\n  deleteLooseMaterial,\r\n  importWarnChecksumReducer,\r\n  loadExampleSaveReducer,\r\n  mergeBehaviorsReducer,\r\n  modifyBehaviorPathReducer,\r\n  modifyBehaviorReducer,\r\n  modifyDifficultyReducer,\r\n  modifyRawReducer,\r\n  parseProgressReducer,\r\n  pasteBehaviorsReducer,\r\n  receiveOniSaveReducer\r\n);\r\n","import { AnyAction } from \"redux\";\r\nimport { HashedString, GeyserBehavior, SaveGame } from \"oni-save-parser\";\r\n\r\nimport { OniSaveState, defaultOniSaveState } from \"../state\";\r\n\r\nimport { isChangeGeyserTypeAction } from \"../actions/change-geyser-type\";\r\n\r\nimport {\r\n  addGameObject,\r\n  removeGameObject,\r\n  changeStateBehaviorData,\r\n  requireGameObject,\r\n  tryModifySaveGame\r\n} from \"./utils\";\r\n\r\nexport default function changeGeyserTypeReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isChangeGeyserTypeAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  const { gameObjectId, geyserType } = action.payload;\r\n\r\n  return tryModifySaveGame(state, saveGame =>\r\n    changeGeyserType(saveGame, gameObjectId, geyserType)\r\n  );\r\n}\r\n\r\nfunction changeGeyserType(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number,\r\n  geyserType: string\r\n): SaveGame {\r\n  let gameObject = requireGameObject(saveGame, gameObjectId);\r\n\r\n  gameObject = changeStateBehaviorData(\r\n    gameObject,\r\n    GeyserBehavior,\r\n    \"templateData\",\r\n    templateData => ({\r\n      ...templateData,\r\n      configuration: {\r\n        ...templateData.configuration!,\r\n        typeId: HashedString(geyserType)\r\n      }\r\n    })\r\n  );\r\n\r\n  saveGame = removeGameObject(saveGame, gameObjectId);\r\n  saveGame = addGameObject(saveGame, `GeyserGeneric_${geyserType}`, gameObject);\r\n\r\n  return saveGame;\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport {\r\n  KPrefabIDBehavior,\r\n  GameObject,\r\n  MinionIdentityBehavior,\r\n  GameObjectBehavior,\r\n  SaveGame,\r\n  BehaviorName\r\n} from \"oni-save-parser\";\r\n\r\nimport { defaultOniSaveState, OniSaveState } from \"../state\";\r\nimport { isCloneDuplicantAction } from \"../actions/clone-duplicant\";\r\n\r\nimport {\r\n  changeStateBehaviorData,\r\n  requireGameObject,\r\n  requireBehavior,\r\n  addGameObject,\r\n  tryModifySaveGame\r\n} from \"./utils\";\r\n\r\nexport default function cloneDuplicantReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isCloneDuplicantAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  const { gameObjectId } = action.payload;\r\n\r\n  return tryModifySaveGame(state, saveGame =>\r\n    performCloneDuplicant(saveGame, gameObjectId)\r\n  );\r\n}\r\n\r\nconst BEHAVIOR_BLACKLIST = [\"StateMachineController\", \"Navigator\"];\r\nfunction shouldCloneBehavior(behavior: GameObjectBehavior): boolean {\r\n  return BEHAVIOR_BLACKLIST.indexOf(behavior.name) === -1;\r\n}\r\n\r\n// TODO: Replace with imports from oni-save-parser next version.\r\nconst MinionAssignablesProxy: BehaviorName<MinionAssignablesProxy> =\r\n  \"MinionAssignablesProxy\";\r\ninterface MinionAssignablesProxy extends GameObjectBehavior {\r\n  target_instance_id: number;\r\n}\r\n\r\nfunction performCloneDuplicant(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number\r\n): SaveGame {\r\n  const gameObject = requireGameObject(saveGame, gameObjectId, \"Minion\");\r\n\r\n  // Look up the old duplicant's name\r\n  const oldIdentity = requireBehavior(gameObject, MinionIdentityBehavior);\r\n\r\n  let newMinion: GameObject | null = {\r\n    ...gameObject,\r\n    behaviors: gameObject.behaviors.filter(shouldCloneBehavior)\r\n  };\r\n\r\n  const newPrefabId = saveGame.settings.nextUniqueID;\r\n\r\n  newMinion = changeStateBehaviorData(\r\n    newMinion,\r\n    KPrefabIDBehavior,\r\n    \"templateData\",\r\n    {\r\n      InstanceID: newPrefabId\r\n    }\r\n  );\r\n\r\n  newMinion = changeStateBehaviorData(\r\n    newMinion,\r\n    MinionIdentityBehavior,\r\n    \"templateData\",\r\n    {\r\n      assignableProxy: {\r\n        id: -1\r\n      }\r\n    }\r\n  );\r\n\r\n  // Increment the next unique id; we used the current one.\r\n  saveGame = {\r\n    ...saveGame,\r\n    settings: {\r\n      ...saveGame.settings,\r\n      nextUniqueID: newPrefabId + 1\r\n    }\r\n  };\r\n\r\n  // Give the new duplicate a new name to differentiate it.\r\n  newMinion = changeStateBehaviorData(\r\n    newMinion,\r\n    MinionIdentityBehavior,\r\n    \"templateData\",\r\n    {\r\n      name: `Clone of ${oldIdentity.templateData.name}`\r\n    }\r\n  );\r\n\r\n  saveGame = addGameObject(saveGame, \"Minion\", newMinion);\r\n\r\n  return saveGame;\r\n}\r\n\r\nfunction createBehavior<T extends GameObjectBehavior>(\r\n  name: BehaviorName<T>,\r\n  data: Omit<T, \"name\">\r\n): T {\r\n  return {\r\n    name,\r\n    ...data\r\n  } as T;\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport { getBehavior } from \"oni-save-parser\";\r\n\r\nimport { OniSaveState, defaultOniSaveState, BehaviorCopyData } from \"../state\";\r\nimport { isCopyBehaviorsAction } from \"../actions/copy-behaviors\";\r\nimport {\r\n  gameObjectsByIdSelector,\r\n  gameObjectTypesByIdSelector\r\n} from \"../selectors/game-objects\";\r\n\r\nexport default function copyBehaviorsReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isCopyBehaviorsAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  const { gameObjectId, behaviors } = action.payload;\r\n\r\n  const gameObjects = gameObjectsByIdSelector.local(state);\r\n  if (!gameObjects || !gameObjects[gameObjectId]) {\r\n    return state;\r\n  }\r\n  const gameObject = gameObjects[gameObjectId];\r\n\r\n  const typesById = gameObjectTypesByIdSelector.local(state);\r\n  if (!typesById || !typesById[gameObjectId]) {\r\n    return state;\r\n  }\r\n  const gameObjectType = typesById[gameObjectId];\r\n\r\n  const copyBehaviors: Record<string, BehaviorCopyData> = {};\r\n  for (const behaviorName of behaviors) {\r\n    const behavior = getBehavior(gameObject, behaviorName);\r\n    if (!behavior) {\r\n      continue;\r\n    }\r\n    copyBehaviors[behaviorName] = {\r\n      templateData: behavior.templateData,\r\n      extraData: behavior.extraData\r\n    };\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    copyPasteData: {\r\n      gameObjectType,\r\n      behaviors: copyBehaviors\r\n    }\r\n  };\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { defaultOniSaveState, OniSaveState } from \"../state\";\r\nimport { isDeleteLooseMaterialAction } from \"../actions/delete-loose-material\";\r\nimport { SimHashNames, GameObjectGroup } from \"oni-save-parser\";\r\n\r\nexport default function deleteLooseMaterialReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isDeleteLooseMaterialAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  if (!state.saveGame) {\r\n    return state;\r\n  }\r\n\r\n  const { materialType } = action.payload;\r\n\r\n  let materialsToRemove = SimHashNames;\r\n  if (materialType) {\r\n    materialsToRemove = [materialType];\r\n  }\r\n\r\n  function shouldRemoveMaterial(group: GameObjectGroup) {\r\n    return materialsToRemove.indexOf(group.name);\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    saveGame: {\r\n      ...state.saveGame,\r\n      gameObjects: state.saveGame.gameObjects.filter(shouldRemoveMaterial)\r\n    }\r\n  };\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { OniSaveState, defaultOniSaveState } from \"../state\";\r\n\r\nimport {\r\n  isImportWarnChecksumAction,\r\n  isImportConfirmAction\r\n} from \"../actions/import-behaviors\";\r\n\r\nexport default function importWarnChecksumReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (isImportWarnChecksumAction(action)) {\r\n    return {\r\n      ...state,\r\n      warnInputChecksum: true\r\n    };\r\n  } else if (isImportConfirmAction(action)) {\r\n    return {\r\n      ...state,\r\n      warnInputChecksum: false\r\n    };\r\n  }\r\n\r\n  return state;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { OniSaveState, defaultOniSaveState, LoadingStatus } from \"../state\";\r\nimport { isLoadExampleSaveAction } from \"../actions/load-example\";\r\n\r\nexport default function loadExampleSaveReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isLoadExampleSaveAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  const mockSaveGame = require(\"@/__mocks__/save-game.json\");\r\n\r\n  return {\r\n    ...state,\r\n    saveGame: mockSaveGame,\r\n    loadingStatus: LoadingStatus.Ready,\r\n    isMock: true\r\n  };\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { OniSaveState, defaultOniSaveState } from \"../state\";\r\n\r\nimport {\r\n  isMergeBehaviorsAction,\r\n  BehaviorMergeData\r\n} from \"../actions/merge-behaviors\";\r\nimport {\r\n  requireGameObject,\r\n  changeStateBehaviorData,\r\n  replaceGameObject,\r\n  tryModifySaveGame\r\n} from \"./utils\";\r\n\r\nexport default function mergeBehaviorsReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isMergeBehaviorsAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  const { gameObjectId, behaviors } = action.payload;\r\n\r\n  return tryModifySaveGame(state, saveGame =>\r\n    performMergeBehaviors(saveGame, gameObjectId, behaviors)\r\n  );\r\n}\r\n\r\nfunction performMergeBehaviors(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number,\r\n  behaviors: Record<string, BehaviorMergeData>\r\n): SaveGame {\r\n  let gameObject = requireGameObject(saveGame, gameObjectId);\r\n\r\n  for (const behaviorName of Object.keys(behaviors)) {\r\n    const behavior = behaviors[behaviorName];\r\n\r\n    if (behavior.templateData) {\r\n      gameObject = changeStateBehaviorData(\r\n        gameObject,\r\n        behaviorName,\r\n        \"templateData\",\r\n        _ => behavior.templateData\r\n      );\r\n    }\r\n\r\n    if (behavior.extraData) {\r\n      gameObject = changeStateBehaviorData(\r\n        gameObject,\r\n        behaviorName,\r\n        \"extraData\",\r\n        _ => behavior.extraData\r\n      );\r\n    }\r\n  }\r\n\r\n  saveGame = replaceGameObject(saveGame, gameObject);\r\n\r\n  return saveGame;\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { OniSaveState, defaultOniSaveState } from \"../state\";\r\nimport { isModifyBehaviorPathAction } from \"../actions/modify-behavior-path\";\r\n\r\nimport {\r\n  tryModifySaveGame,\r\n  requireGameObject,\r\n  changeStateBehaviorData,\r\n  set,\r\n  replaceGameObject\r\n} from \"./utils\";\r\n\r\nexport default function modifyBehaviorPathReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isModifyBehaviorPathAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  let { gameObjectId, behaviorName, behaviorPath, value } = action.payload;\r\n\r\n  return tryModifySaveGame(state, saveGame =>\r\n    performModifyBehaviorPath(\r\n      saveGame,\r\n      gameObjectId,\r\n      behaviorName,\r\n      behaviorPath,\r\n      value\r\n    )\r\n  );\r\n}\r\n\r\nfunction performModifyBehaviorPath(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number,\r\n  behaviorName: string,\r\n  behaviorPath: string[],\r\n  value: any\r\n): SaveGame {\r\n  let gameObject = requireGameObject(saveGame, gameObjectId);\r\n\r\n  gameObject = changeStateBehaviorData(\r\n    gameObject,\r\n    behaviorName,\r\n    behaviorPath[0] as any,\r\n    data => set(data, behaviorPath.slice(1), value)\r\n  );\r\n\r\n  saveGame = replaceGameObject(saveGame, gameObject);\r\n\r\n  return saveGame;\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport { SaveGame } from \"oni-save-parser\";\r\nimport { merge } from \"lodash-es\";\r\n\r\nimport { OniSaveState, defaultOniSaveState } from \"../state\";\r\n\r\nimport {\r\n  isModifyBehaviorAction,\r\n  BehaviorDataTarget\r\n} from \"../actions/modify-behavior\";\r\n\r\nimport {\r\n  requireGameObject,\r\n  changeStateBehaviorData,\r\n  replaceGameObject,\r\n  tryModifySaveGame\r\n} from \"./utils\";\r\n\r\nexport default function modifyBehaviorReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isModifyBehaviorAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  let { gameObjectId, behaviorId, target, value, merge } = action.payload;\r\n\r\n  return tryModifySaveGame(state, saveGame =>\r\n    performModifyBehavior(\r\n      saveGame,\r\n      gameObjectId,\r\n      behaviorId,\r\n      target,\r\n      value,\r\n      merge\r\n    )\r\n  );\r\n}\r\n\r\nfunction performModifyBehavior(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number,\r\n  behaviorName: string,\r\n  target: BehaviorDataTarget,\r\n  value: any,\r\n  mergeData: boolean\r\n) {\r\n  let gameObject = requireGameObject(saveGame, gameObjectId);\r\n\r\n  function performMerge(original: any) {\r\n    return mergeData ? merge({}, original, value) : { ...original, ...value };\r\n  }\r\n\r\n  switch (target) {\r\n    case BehaviorDataTarget.Template:\r\n      gameObject = changeStateBehaviorData(\r\n        gameObject,\r\n        behaviorName,\r\n        \"templateData\",\r\n        performMerge\r\n      );\r\n      break;\r\n    case BehaviorDataTarget.Extra:\r\n      gameObject = changeStateBehaviorData(\r\n        gameObject,\r\n        behaviorName,\r\n        \"extraData\",\r\n        performMerge\r\n      );\r\n      break;\r\n  }\r\n\r\n  saveGame = replaceGameObject(saveGame, gameObject);\r\n  return saveGame;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { OniSaveState, defaultOniSaveState } from \"../state\";\r\n\r\nimport { isModifyDifficultyAction } from \"../actions/modify-difficulty\";\r\n\r\nimport { tryModifySaveGame, setArrayDict } from \"./utils\";\r\n\r\nexport default function modifyDifficultyReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isModifyDifficultyAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  const { difficultyType, value } = action.payload;\r\n\r\n  return tryModifySaveGame(state, saveGame => ({\r\n    ...saveGame,\r\n    gameData: {\r\n      ...saveGame.gameData,\r\n      customGameSettings: {\r\n        ...saveGame.gameData.customGameSettings,\r\n        CurrentQualityLevelsBySetting: setArrayDict(\r\n          saveGame.gameData.customGameSettings.CurrentQualityLevelsBySetting,\r\n          difficultyType,\r\n          value\r\n        ) as any\r\n      }\r\n    }\r\n  }));\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport { SaveGame } from \"oni-save-parser\";\r\nimport produce from \"immer\";\r\nimport { set } from \"lodash-es\";\r\n\r\nimport { OniSaveState, defaultOniSaveState } from \"../state\";\r\n\r\nimport { isModifyRawAction } from \"../actions/modify-raw\";\r\n\r\nimport { tryModifySaveGame } from \"./utils\";\r\n\r\nexport default function modifyRawReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isModifyRawAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  let { path, data } = action.payload;\r\n\r\n  return tryModifySaveGame(state, saveGame =>\r\n    performModifyRaw(saveGame, path, data)\r\n  );\r\n}\r\n\r\nfunction performModifyRaw(saveGame: SaveGame, path: string[], data: any) {\r\n  return produce(saveGame, draftSave => {\r\n    set(draftSave, path, data);\r\n  });\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { isParseProgressAction } from \"../actions/parse-progress\";\r\n\r\nimport { OniSaveState, defaultOniSaveState } from \"../state\";\r\n\r\nexport default function parseProgressReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isParseProgressAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    loadingProgressMessage: action.payload.message\r\n  };\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport { getBehavior, SaveGame, GameObject } from \"oni-save-parser\";\r\n\r\nimport { OniSaveState, defaultOniSaveState, BehaviorCopyData } from \"../state\";\r\n\r\nimport { isPasteBehaviorsAction } from \"../actions/paste-behaviors\";\r\n\r\nimport { gameObjectTypesByIdSelector } from \"../selectors/game-objects\";\r\n\r\nimport {\r\n  requireGameObject,\r\n  changeStateBehaviorData,\r\n  replaceGameObject,\r\n  tryModifySaveGame\r\n} from \"./utils\";\r\n\r\nexport default function pasteBehaviorsReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isPasteBehaviorsAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  if (!state.copyPasteData) {\r\n    return state;\r\n  }\r\n\r\n  const { gameObjectType, behaviors } = state.copyPasteData;\r\n\r\n  const { gameObjectId } = action.payload;\r\n\r\n  const typesById = gameObjectTypesByIdSelector.local(state);\r\n  if (!typesById || !typesById[gameObjectId]) {\r\n    return state;\r\n  }\r\n  if (gameObjectType !== typesById[gameObjectId]) {\r\n    return state;\r\n  }\r\n\r\n  return tryModifySaveGame(state, saveGame =>\r\n    performPasteBehaviors(saveGame, gameObjectId, behaviors)\r\n  );\r\n}\r\n\r\nfunction performPasteBehaviors(\r\n  saveGame: SaveGame,\r\n  gameObjectId: number,\r\n  behaviors: Record<string, BehaviorCopyData>\r\n): SaveGame {\r\n  let gameObject = requireGameObject(saveGame, gameObjectId);\r\n\r\n  for (const behaviorName of Object.keys(behaviors)) {\r\n    const behavior = getBehavior(gameObject, behaviorName);\r\n    if (!behavior) {\r\n      continue;\r\n    }\r\n\r\n    gameObject = copyBehavior(\r\n      gameObject,\r\n      behaviorName,\r\n      behaviors[behaviorName]\r\n    );\r\n  }\r\n\r\n  saveGame = replaceGameObject(saveGame, gameObject);\r\n  return saveGame;\r\n}\r\n\r\nfunction copyBehavior(\r\n  gameObject: GameObject,\r\n  behaviorName: string,\r\n  behavior: BehaviorCopyData\r\n): GameObject {\r\n  const { templateData, extraData } = behavior;\r\n\r\n  if (templateData) {\r\n    gameObject = changeStateBehaviorData(\r\n      gameObject,\r\n      behaviorName,\r\n      \"templateData\",\r\n      templateData\r\n    );\r\n  }\r\n\r\n  if (extraData) {\r\n    gameObject = changeStateBehaviorData(\r\n      gameObject,\r\n      behaviorName,\r\n      \"extraData\",\r\n      extraData\r\n    );\r\n  }\r\n\r\n  return gameObject;\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { LoadingStatus, OniSaveState, defaultOniSaveState } from \"../state\";\r\n\r\nimport {\r\n  ACTION_RECEIVE_ONISAVE_BEGIN,\r\n  ACTION_RECEIVE_ONISAVE_ERROR,\r\n  ACTION_RECEIVE_ONISAVE_SUCCESS,\r\n  isReceiveOniSaveAction\r\n} from \"../actions/receive-onisave\";\r\n\r\nexport default function receiveOniSaveReducer(\r\n  state: OniSaveState = defaultOniSaveState,\r\n  action: AnyAction\r\n): OniSaveState {\r\n  if (!isReceiveOniSaveAction(action)) {\r\n    return state;\r\n  }\r\n\r\n  switch (action.type) {\r\n    case ACTION_RECEIVE_ONISAVE_BEGIN:\r\n      return {\r\n        ...state,\r\n        loadError: null,\r\n        loadingStatus: action.meta.operation,\r\n        loadingProgressMessage: null,\r\n        saveGame: action.payload.clearExisting ? null : state.saveGame\r\n      };\r\n    case ACTION_RECEIVE_ONISAVE_ERROR:\r\n      state = {\r\n        ...state,\r\n        loadingStatus: LoadingStatus.Error,\r\n        loadError: action.payload\r\n      };\r\n      break;\r\n    case ACTION_RECEIVE_ONISAVE_SUCCESS:\r\n      state = {\r\n        ...state,\r\n        loadingStatus: LoadingStatus.Ready,\r\n        loadingProgressMessage: null,\r\n        loadError: null,\r\n        saveGame: action.payload,\r\n        isModified:\r\n          action.meta.operation === LoadingStatus.Saving\r\n            ? false\r\n            : state.isModified\r\n      };\r\n  }\r\n\r\n  return state;\r\n}\r\n","import oniSaveSaga from \"@/services/oni-save/saga\";\r\n\r\nexport default oniSaveSaga;\r\n","import { fork } from \"redux-saga/effects\";\r\n\r\nimport exportBehaviorsSaga from \"./export-behaviors\";\r\nimport importBehaviorsSaga from \"./import-behaviors\";\r\nimport loadOniSaveSaga from \"./load-onisave\";\r\nimport saveOniSaveSaga from \"./save-onisave\";\r\n\r\nexport default function* saga() {\r\n  yield fork(exportBehaviorsSaga);\r\n  yield fork(importBehaviorsSaga);\r\n  yield fork(loadOniSaveSaga);\r\n  yield fork(saveOniSaveSaga);\r\n}\r\n","import { takeEvery, select } from \"redux-saga/effects\";\r\nimport {\r\n  getBehavior,\r\n  MinionIdentityBehavior,\r\n  GameObject\r\n} from \"oni-save-parser\";\r\nimport objectHash from \"object-hash\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_EXPORT_BEHAVIORS,\r\n  ExportBehaviorsAction\r\n} from \"../actions/export-behaviors\";\r\n\r\nimport {\r\n  gameObjectTypesByIdSelector,\r\n  gameObjectsByIdSelector\r\n} from \"../selectors/game-objects\";\r\n\r\nexport default function* exportBehaviorsSaga() {\r\n  yield takeEvery(\r\n    ACTION_ONISAVE_EXPORT_BEHAVIORS,\r\n    handleExportBehaviorsActionSaga\r\n  );\r\n}\r\n\r\nfunction* handleExportBehaviorsActionSaga(action: ExportBehaviorsAction) {\r\n  const { gameObjectId, behaviors } = action.payload;\r\n\r\n  const typesById: ReturnType<\r\n    typeof gameObjectTypesByIdSelector\r\n  > = yield select(gameObjectTypesByIdSelector);\r\n  if (!typesById || !typesById[gameObjectId]) {\r\n    return;\r\n  }\r\n  const gameObjectType = typesById[gameObjectId];\r\n\r\n  const gameObjectsById: ReturnType<\r\n    typeof gameObjectsByIdSelector\r\n  > = yield select(gameObjectsByIdSelector);\r\n  if (!gameObjectsById || !gameObjectsById[gameObjectId]) {\r\n    return;\r\n  }\r\n\r\n  const gameObject = gameObjectsById[gameObjectId];\r\n\r\n  // TODO: Should have a config file defining valid behavior exports and file name source.\r\n  let fileName = \"export.json\";\r\n  if (gameObjectType === \"Minion\") {\r\n    const identity = getBehavior(gameObject, MinionIdentityBehavior);\r\n    if (identity) {\r\n      fileName = `${identity.templateData.name}.json`;\r\n    }\r\n  }\r\n\r\n  const exportObject = buildExportObject(gameObject, gameObjectType, behaviors);\r\n  const content = JSON.stringify(exportObject, null, 2);\r\n\r\n  const blob = new Blob([content], {\r\n    type: \"application/javascript;charset=utf-8\"\r\n  });\r\n\r\n  saveAs(blob, fileName);\r\n}\r\n\r\nfunction buildExportObject(\r\n  gameObject: GameObject,\r\n  gameObjectType: string,\r\n  targetBehaviors: string[]\r\n): any {\r\n  const exportBehaviors: Record<string, any> = {};\r\n  for (const behaviorName of targetBehaviors) {\r\n    const behavior = getBehavior(gameObject, behaviorName);\r\n    if (!behavior) {\r\n      continue;\r\n    }\r\n\r\n    const exportBehavior: any = (exportBehaviors[behaviorName] = {});\r\n    // We cannot leave any undefined props, as objectHash will include them.\r\n    if (behavior.templateData) {\r\n      exportBehavior.templateData = behavior.templateData;\r\n    }\r\n    if (behavior.extraData) {\r\n      exportBehavior.extraData = behavior.extraData;\r\n    }\r\n  }\r\n\r\n  const exportObject: any = {\r\n    gameObjectType,\r\n    behaviors: exportBehaviors\r\n  };\r\n\r\n  const hash = objectHash(exportObject, { algorithm: \"sha1\" });\r\n  exportObject.$sha1 = hash;\r\n\r\n  return exportObject;\r\n}\r\n","import { takeEvery, call, select, put, take } from \"redux-saga/effects\";\r\nimport objectHash from \"object-hash\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_IMPORT_BEHAVIORS,\r\n  ImportBehaviorsAction,\r\n  importWarnChecksum,\r\n  ACTION_ONISAVE_IMPORT_CONFIRM\r\n} from \"../actions/import-behaviors\";\r\nimport { mergeBehaviors } from \"../actions/merge-behaviors\";\r\n\r\nimport { gameObjectTypesByIdSelector } from \"../selectors/game-objects\";\r\n\r\nexport default function* importBehaviorsSaga() {\r\n  yield takeEvery(ACTION_ONISAVE_IMPORT_BEHAVIORS, handleImportBehaviorsSaga);\r\n}\r\n\r\nfunction* handleImportBehaviorsSaga(action: ImportBehaviorsAction) {\r\n  const { gameObjectId, file } = action.payload;\r\n\r\n  function onError(message: string) {\r\n    // TODO: show dialog.\r\n    console.error(message);\r\n  }\r\n\r\n  const contentStr = yield call(readFile, file);\r\n\r\n  let content: any;\r\n  try {\r\n    content = JSON.parse(contentStr);\r\n  } catch (e) {\r\n    onError(\"Invalid import data.\");\r\n    return;\r\n  }\r\n\r\n  // TODO: validate data shape\r\n\r\n  const sha1 = content.$sha1;\r\n  delete content.$sha1;\r\n  const contentSha1 = objectHash(content, { algorithm: \"sha1\" });\r\n  if (sha1 !== contentSha1) {\r\n    const shouldContinue = yield* warnImportChecksumSaga();\r\n    if (!shouldContinue) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  const { gameObjectType, behaviors } = content;\r\n\r\n  const gameObjectTypesById = yield select(gameObjectTypesByIdSelector);\r\n  if (gameObjectTypesById[gameObjectId] !== gameObjectType) {\r\n    onError(\"Import data game object type does not match.\");\r\n    return;\r\n  }\r\n\r\n  yield put(mergeBehaviors(gameObjectId, behaviors));\r\n}\r\n\r\nfunction readFile(file: File): Promise<string> {\r\n  const reader = new FileReader();\r\n  return new Promise<string>((accept, reject) => {\r\n    reader.onload = () => {\r\n      accept(reader.result as string);\r\n    };\r\n    reader.onerror = () => {\r\n      reject(reader.error);\r\n    };\r\n    reader.readAsText(file);\r\n  });\r\n}\r\n\r\nfunction* warnImportChecksumSaga() {\r\n  yield put(importWarnChecksum());\r\n  const action = yield take(ACTION_ONISAVE_IMPORT_CONFIRM);\r\n  return action.payload;\r\n}\r\n","import { eventChannel, END } from \"redux-saga\";\r\nimport { call, put, takeEvery, take } from \"redux-saga/effects\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_LOAD,\r\n  LoadOniSaveAction\r\n} from \"../actions/load-onisave\";\r\n\r\nimport {\r\n  receiveOniSaveBegin,\r\n  receiveOniSaveError,\r\n  receiveOniSaveSuccess\r\n} from \"../actions/receive-onisave\";\r\n\r\nimport { parseProgress } from \"../actions/parse-progress\";\r\n\r\nimport { parseSave } from \"../worker-instance\";\r\nimport { LoadingStatus } from \"../state\";\r\n\r\nexport default function* saveEditorSaga() {\r\n  yield takeEvery(ACTION_ONISAVE_LOAD, handleOniSaveLoad);\r\n}\r\n\r\nfunction* handleOniSaveLoad(action: LoadOniSaveAction) {\r\n  const file = action.payload;\r\n\r\n  yield put(receiveOniSaveBegin(LoadingStatus.Loading, true));\r\n\r\n  const data: ArrayBuffer = yield call(readFile, file);\r\n\r\n  const loadChannel = createLoadChannel(data);\r\n\r\n  while (true) {\r\n    const msg = yield take(loadChannel);\r\n    if (msg.type === \"progress\") {\r\n      yield put(parseProgress(msg.message));\r\n      continue;\r\n    } else if (msg.type === \"success\") {\r\n      yield put(receiveOniSaveSuccess(msg.saveGame, LoadingStatus.Loading));\r\n      return;\r\n    } else if (msg.type === \"error\") {\r\n      yield put(receiveOniSaveError(msg.error, LoadingStatus.Loading));\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nfunction createLoadChannel(data: ArrayBuffer) {\r\n  return eventChannel(emitter => {\r\n    function onProgress(message: string) {\r\n      emitter({\r\n        type: \"progress\",\r\n        message\r\n      });\r\n    }\r\n\r\n    parseSave(data, onProgress)\r\n      .then(saveGame => {\r\n        emitter({\r\n          type: \"success\",\r\n          saveGame\r\n        });\r\n        emitter(END);\r\n      })\r\n      .catch(error => {\r\n        emitter({\r\n          type: \"error\",\r\n          error\r\n        });\r\n        emitter(END);\r\n      });\r\n\r\n    //This is the cancellation func.\r\n    // TODO: We can support cancellation in oni-save-parser rather easily.\r\n    return () => {};\r\n  });\r\n}\r\n\r\nfunction readFile(file: File): Promise<ArrayBuffer> {\r\n  const reader = new FileReader();\r\n  return new Promise<ArrayBuffer>((accept, reject) => {\r\n    reader.onload = () => {\r\n      accept(reader.result as ArrayBuffer);\r\n    };\r\n    reader.onerror = () => {\r\n      reject(reader.error);\r\n    };\r\n    reader.readAsArrayBuffer(file);\r\n  });\r\n}\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nexport const RESPONSE_PROGRESS = \"progress\";\r\nexport const sendProgress = (message: string) => ({\r\n  type: RESPONSE_PROGRESS as typeof RESPONSE_PROGRESS,\r\n  message\r\n});\r\nexport type ProgressResponse = ReturnType<typeof sendProgress>;\r\n\r\nconst COMMAND_PARSE = \"parse-save\";\r\nexport const parseSave = (data: ArrayBuffer) => ({\r\n  type: COMMAND_PARSE as typeof COMMAND_PARSE,\r\n  data\r\n});\r\nexport type ParseSaveCommand = ReturnType<typeof parseSave>;\r\n\r\nexport const RESPONSE_PARSE_SUCCESS = \"parse-save:success\";\r\nexport const parseSaveSuccess = (saveGame: SaveGame) => ({\r\n  type: RESPONSE_PARSE_SUCCESS as typeof RESPONSE_PARSE_SUCCESS,\r\n  saveGame\r\n});\r\nexport type ParseSaveSuccessResponse = ReturnType<typeof parseSaveSuccess>;\r\n\r\nexport const RESPONSE_PARSE_ERROR = \"parse-save:error\";\r\nexport const parseSaveError = (error: Error) => ({\r\n  type: RESPONSE_PARSE_ERROR as typeof RESPONSE_PARSE_ERROR,\r\n  error: errorToJson(error)\r\n});\r\nexport type ParseSaveErrorResponse = ReturnType<typeof parseSaveError>;\r\n\r\nexport type ParseSaveResponse =\r\n  | ParseSaveSuccessResponse\r\n  | ParseSaveErrorResponse\r\n  | ProgressResponse;\r\n\r\nconst COMMAND_WRITE = \"write-save\";\r\nexport const writeSave = (saveGame: SaveGame) => ({\r\n  type: COMMAND_WRITE as typeof COMMAND_WRITE,\r\n  saveGame\r\n});\r\nexport type WriteSaveCommand = ReturnType<typeof writeSave>;\r\n\r\nexport const RESPONSE_WRITE_SUCCESS = \"write-save:success\";\r\nexport const writeSaveSuccess = (data: ArrayBuffer) => ({\r\n  type: RESPONSE_WRITE_SUCCESS as typeof RESPONSE_WRITE_SUCCESS,\r\n  data\r\n});\r\nexport type WriteSaveSuccessResponse = ReturnType<typeof writeSaveSuccess>;\r\n\r\nexport const RESPONSE_WRITE_ERROR = \"write-save:error\";\r\nexport const writeSaveError = (error: Error) => ({\r\n  type: RESPONSE_WRITE_ERROR as typeof RESPONSE_WRITE_ERROR,\r\n  error: errorToJson(error)\r\n});\r\nexport type WriteSaveErrorResponse = ReturnType<typeof writeSaveError>;\r\n\r\nexport type WriteSaveResult =\r\n  | WriteSaveSuccessResponse\r\n  | WriteSaveErrorResponse\r\n  | ProgressResponse;\r\n\r\nexport type SaveParserCommand = ParseSaveCommand | WriteSaveCommand;\r\nexport type SaveParserResponse = ParseSaveResponse | WriteSaveResult;\r\n\r\nexport interface SaveParserCommandEvent extends MessageEvent {\r\n  data: SaveParserCommand;\r\n}\r\n\r\nexport interface SaveParserResultEvent extends MessageEvent {\r\n  data: SaveParserResponse;\r\n}\r\n\r\nexport interface ErrorJson {\r\n  name: string;\r\n  message: string;\r\n  stack?: string;\r\n}\r\nexport function errorToJson(e: Error): ErrorJson {\r\n  return {\r\n    name: e.name,\r\n    message: e.message,\r\n    stack: e.stack\r\n  };\r\n}\r\nexport function jsonToError(obj: ErrorJson): Error {\r\n  const e = new Error(obj.message);\r\n  e.name = obj.name;\r\n  e.stack = obj.stack;\r\n  return e;\r\n}\r\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"d7d4e4fbdfd5512e1a38.worker.js\");\n};","import { eventChannel, END } from \"redux-saga\";\r\nimport { put, select, takeEvery, take } from \"redux-saga/effects\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { saveAs } from \"file-saver\";\r\n\r\nimport {\r\n  ACTION_ONISAVE_SAVE,\r\n  SaveOniSaveAction\r\n} from \"../actions/save-onisave\";\r\n\r\nimport {\r\n  receiveOniSaveBegin,\r\n  receiveOniSaveError,\r\n  receiveOniSaveSuccess\r\n} from \"../actions/receive-onisave\";\r\n\r\nimport { parseProgress } from \"../actions/parse-progress\";\r\n\r\nimport { writeSave } from \"../worker-instance\";\r\n\r\nimport { saveGameSelector } from \"../selectors/save-game\";\r\nimport { LoadingStatus } from \"../state\";\r\n\r\nexport default function* saveEditorSaga() {\r\n  yield takeEvery(ACTION_ONISAVE_SAVE, handleOniSaveWrite);\r\n}\r\n\r\nfunction* handleOniSaveWrite(action: SaveOniSaveAction) {\r\n  let saveName = action.payload;\r\n\r\n  const saveGame: SaveGame | null = yield select(saveGameSelector);\r\n  if (!saveGame) {\r\n    return;\r\n  }\r\n\r\n  if (!saveName || saveName === \"\") {\r\n    saveName = `${saveGame.header.gameInfo.baseName}.sav`;\r\n  }\r\n\r\n  yield put(receiveOniSaveBegin(LoadingStatus.Saving));\r\n\r\n  const saveChannel = createSaveChannel(saveGame);\r\n\r\n  while (true) {\r\n    const msg = yield take(saveChannel);\r\n    if (msg.type === \"progress\") {\r\n      yield put(parseProgress(msg.message));\r\n      continue;\r\n    } else if (msg.type === \"success\") {\r\n      saveAs(msg.blob, saveName);\r\n      yield put(receiveOniSaveSuccess(saveGame, LoadingStatus.Saving));\r\n      return;\r\n    } else if (msg.type === \"error\") {\r\n      yield put(\r\n        receiveOniSaveError(\r\n          {\r\n            name: msg.error.name,\r\n            message: msg.error.message,\r\n            stack: msg.error.stack\r\n          },\r\n          LoadingStatus.Saving\r\n        )\r\n      );\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\nfunction createSaveChannel(saveGame: SaveGame) {\r\n  return eventChannel(emitter => {\r\n    function onProgress(message: string) {\r\n      emitter({\r\n        type: \"progress\",\r\n        message\r\n      });\r\n    }\r\n\r\n    writeSave(saveGame, onProgress)\r\n      .then(data => {\r\n        const blob = new Blob([data]);\r\n        emitter({\r\n          type: \"success\",\r\n          blob\r\n        });\r\n        emitter(END);\r\n      })\r\n      .catch(error => {\r\n        emitter({\r\n          type: \"error\",\r\n          error\r\n        });\r\n        emitter(END);\r\n      });\r\n\r\n    //This is the cancellation func.\r\n    // TODO: We can support cancellation in oni-save-parser rather easily.\r\n    return () => {};\r\n  });\r\n}\r\n","import { AppState, createStructuredSelector } from \"@/state\";\r\n\r\nimport {\r\n  loadState as loadI18nState,\r\n  persistState as persistI18nState\r\n} from \"@/services/i18n/persist\";\r\n\r\nexport function loadPersistedState(state: AppState): AppState {\r\n  const persistedState = getStoredState();\r\n\r\n  return {\r\n    ...state,\r\n    services: {\r\n      ...state.services,\r\n      i18n: loadI18nState(state.services.i18n, persistedState.i18n || {})\r\n    }\r\n  };\r\n}\r\n\r\n// Store the last persisted state to avoid setting the item\r\n//  when no data has changed.\r\nlet lastPersistedState: any = null;\r\n\r\nconst buildPersistedState = createStructuredSelector({\r\n  i18n: persistI18nState\r\n});\r\n\r\nexport function savePersistedState(state: AppState) {\r\n  const persistedState = buildPersistedState(state);\r\n  if (lastPersistedState === persistedState) {\r\n    return;\r\n  }\r\n  setStoredState(persistedState);\r\n  lastPersistedState = persistedState;\r\n}\r\n\r\nconst PERSISTED_STATE_KEY = \"persisted-state\";\r\n\r\nfunction getStoredState(): any {\r\n  const stateJson = localStorage.getItem(PERSISTED_STATE_KEY);\r\n  if (!stateJson) {\r\n    return {};\r\n  }\r\n\r\n  try {\r\n    return JSON.parse(stateJson);\r\n  } catch {\r\n    return {};\r\n  }\r\n}\r\n\r\nfunction setStoredState(state: any) {\r\n  localStorage.setItem(PERSISTED_STATE_KEY, JSON.stringify(state));\r\n}\r\n","import { createStructuredSelector } from \"@/state\";\r\n\r\nimport { I18NState } from \"./state\";\r\nimport i18n from \"./i18n\";\r\nimport { currentLanguageSelector } from \"./selectors/language\";\r\n\r\nexport const persistState = createStructuredSelector({\r\n  language: currentLanguageSelector\r\n});\r\n\r\ntype PersistedState = ReturnType<typeof persistState>;\r\n\r\nexport function loadState(\r\n  state: I18NState,\r\n  persisted: PersistedState\r\n): I18NState {\r\n  i18n.changeLanguage(persisted.language);\r\n\r\n  return {\r\n    ...state,\r\n    ...persisted\r\n  };\r\n}\r\n","import { AnyAction } from \"redux\";\r\n\r\nimport { SaveGame } from \"oni-save-parser\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport { ACTION_RECEIVE_ONISAVE_SUCCESS } from \"@/services/oni-save/actions/receive-onisave\";\r\nimport { ACTION_ONISAVE_LOAD } from \"@/services/oni-save/actions/load-onisave\";\r\nimport { ACTION_ONISAVE_PARSE_PROGRESS } from \"@/services/oni-save/actions/parse-progress\";\r\n\r\nexport const actionsBlacklist: string[] = [\r\n  ACTION_ONISAVE_LOAD,\r\n  ACTION_ONISAVE_PARSE_PROGRESS\r\n];\r\n\r\nexport function actionSanitizer(action: AnyAction): AnyAction {\r\n  if (action.type === ACTION_RECEIVE_ONISAVE_SUCCESS) {\r\n    return {\r\n      ...action,\r\n      payload: sanitizeSave(action.payload)\r\n    };\r\n  }\r\n  return action;\r\n}\r\n\r\nexport function stateSanitizer(state: AppState): any {\r\n  return {\r\n    ...state,\r\n    services: {\r\n      ...state.services,\r\n      oniSave: {\r\n        ...state.services.oniSave,\r\n        saveGame: sanitizeSave(state.services.oniSave.saveGame)\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction sanitizeSave(save: SaveGame | null): any {\r\n  if (!save) {\r\n    return null;\r\n  }\r\n  return {\r\n    ...save,\r\n    world: {\r\n      ...save.world,\r\n      streamed: \"~snip~\"\r\n    }\r\n  };\r\n}\r\n","import * as React from \"react\";\r\nimport { hot } from \"react-hot-loader\";\r\n\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\";\r\n\r\nimport { ConnectedRouter } from \"connected-react-router\";\r\n\r\nimport history from \"@/history\";\r\nimport theme from \"@/theme\";\r\n\r\nimport StoreProvider from \"@/store/components/StoreProvider\";\r\n\r\nimport I18NProvider from \"@/services/i18n/components/I18NProvider\";\r\n\r\nimport LoadingDialog from \"@/components/LoadingDialog\";\r\nimport ImportWarningDialog from \"@/components/ImportWarningDialog\";\r\n\r\nimport Routes from \"@/routes\";\r\n\r\nconst Root: React.FC = () => (\r\n  <I18NProvider>\r\n    <StoreProvider>\r\n      <ConnectedRouter history={history}>\r\n        <MuiThemeProvider theme={theme}>\r\n          <CssBaseline />\r\n          <LoadingDialog />\r\n          <ImportWarningDialog />\r\n          <Routes />\r\n        </MuiThemeProvider>\r\n      </ConnectedRouter>\r\n    </StoreProvider>\r\n  </I18NProvider>\r\n);\r\n\r\nexport default hot(module)(Root);\r\n","import { createMuiTheme } from \"@material-ui/core/styles\";\r\n\r\n// Theme settings can be adjusted here.\r\n//  https://material-ui.com/style/color/\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\"\r\n  }\r\n});\r\n\r\nexport default theme;\r\n","import * as React from \"react\";\r\n\r\nimport { Provider } from \"react-redux\";\r\n\r\nimport store from \"../store\";\r\n\r\nconst StoreProvider: React.FC = ({ children }) => (\r\n  <Provider store={store}>{children}</Provider>\r\n);\r\nexport default StoreProvider;\r\n","import * as React from \"react\";\r\n\r\nimport { I18nextProvider } from \"react-i18next\";\r\n\r\nimport i18n from \"../i18n\";\r\n\r\nconst I18NProvider: React.FC = ({ children }) => (\r\n  <I18nextProvider i18n={i18n}>{children}</I18nextProvider>\r\n);\r\nexport default I18NProvider;\r\n","import LoadingDialog from \"./component\";\r\nimport connectLoadingDialog from \"./connector\";\r\n\r\nexport default connectLoadingDialog(LoadingDialog);\r\n","import * as React from \"react\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nexport interface LoadingDialogProps {\r\n  isLoading: boolean;\r\n  isSaving: boolean;\r\n  message: string | null;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: theme.spacing(60),\r\n      height: theme.spacing(20)\r\n    },\r\n    content: {\r\n      verticalAlign: \"middle\"\r\n    },\r\n    loadingText: {\r\n      textAlign: \"center\"\r\n    },\r\n    message: {\r\n      textAlign: \"center\"\r\n    }\r\n  });\r\n\r\ntype Props = LoadingDialogProps & WithStyles<typeof styles>;\r\n\r\nconst LoadingDialog: React.FC<Props> = ({\r\n  isLoading,\r\n  isSaving,\r\n  message,\r\n  classes\r\n}) => (\r\n  <Dialog open={isLoading || isSaving}>\r\n    <div className={classes.root}>\r\n      <div className={classes.content}>\r\n        <Typography className={classes.loadingText} variant=\"h4\">\r\n          {isLoading && (\r\n            <Trans i18nKey=\"save-file.conditions.loading\">Loading</Trans>\r\n          )}\r\n          {isSaving && (\r\n            <Trans i18nKey=\"save-file.conditions.saving\">Saving</Trans>\r\n          )}\r\n        </Typography>\r\n        <Typography className={classes.message} variant=\"body1\">\r\n          {message}\r\n        </Typography>\r\n      </div>\r\n    </div>\r\n  </Dialog>\r\n);\r\nexport default withStyles(styles)(LoadingDialog);\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector, AppState } from \"@/state\";\r\n\r\nimport {\r\n  loadingStatusSelector,\r\n  loadingStatusMessageSelector\r\n} from \"@/services/oni-save/selectors/loading-status\";\r\nimport { LoadingStatus } from \"@/services/oni-save/state\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  isLoading: (state: AppState) =>\r\n    loadingStatusSelector(state) === LoadingStatus.Loading,\r\n  isSaving: (state: AppState) =>\r\n    loadingStatusSelector(state) === LoadingStatus.Saving,\r\n  message: loadingStatusMessageSelector\r\n});\r\n\r\nexport default connect(mapStateToProps);\r\n","import ImportWarningDialog from \"./component\";\r\nimport connectImportWarningDialog from \"./connector\";\r\nexport default connectImportWarningDialog(ImportWarningDialog);\r\n","import * as React from \"react\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport { createStyles, withStyles, WithStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nexport interface ImportWarningDialogProps {\r\n  isOpen: boolean;\r\n  onConfirm(): void;\r\n  onCancel(): void;\r\n}\r\nconst styles = createStyles({\r\n  description: {\r\n    whiteSpace: \"pre-line\"\r\n  }\r\n});\r\n\r\ntype Props = ImportWarningDialogProps & WithStyles<typeof styles>;\r\nconst ImportWarningDialog: React.FC<Props> = ({\r\n  classes,\r\n  isOpen,\r\n  onConfirm,\r\n  onCancel\r\n}) => (\r\n  <Dialog open={isOpen}>\r\n    <DialogTitle>\r\n      <Trans i18nKey=\"data.conditions.modified_titlecase\">Data Modified</Trans>\r\n    </DialogTitle>\r\n    <DialogContent>\r\n      <Typography className={classes.description}>\r\n        <Trans i18nKey=\"data.prompts.modified-description\" />\r\n      </Typography>\r\n      <Typography>\r\n        <Trans i18nKey=\"dialog.queries.continue\" />\r\n      </Typography>\r\n    </DialogContent>\r\n    <DialogActions>\r\n      <Button onClick={onCancel}>\r\n        <Trans i18nKey=\"dialog.verbs.cancel_titlecase\">Cancel</Trans>\r\n      </Button>\r\n      <Button onClick={onConfirm}>\r\n        <Trans i18nKey=\"data.verbs.import_titlecase\">Import</Trans>\r\n      </Button>\r\n    </DialogActions>\r\n  </Dialog>\r\n);\r\n\r\nexport default withStyles(styles)(ImportWarningDialog);\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\n\r\nimport { warnInputChecksumSelector } from \"@/services/oni-save/selectors/ui-state\";\r\nimport { importConfirm } from \"@/services/oni-save/actions/import-behaviors\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  isOpen: warnInputChecksumSelector\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  onConfirm: () => importConfirm(true),\r\n  onCancel: () => importConfirm(false)\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n);\r\n","import { OniSaveState } from \"../state\";\r\n\r\nimport { createServiceSelector } from \"./utils\";\r\n\r\nexport const warnInputChecksumSelector = createServiceSelector(\r\n  (state: OniSaveState) => state.warnInputChecksum\r\n);\r\n","import * as React from \"react\";\r\n\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\n\r\nimport OverviewPage from \"@/pages/OverviewPage\";\r\nimport DuplicantsPage from \"@/pages/DuplicantsPage\";\r\nimport DuplicantEditorPage from \"@/pages/DuplicantEditorPage\";\r\nimport GeysersPage from \"@/pages/GeysersPage\";\r\nimport PlanetsPage from \"@/pages/PlanetsPage\";\r\nimport MaterialsPage from \"@/pages/MaterialsPage\";\r\nimport RawEditorPage from \"@/pages/RawEditorPage\";\r\nimport SettingsPage from \"@/pages/SettingsPage\";\r\n\r\nconst Routes: React.FC = () => (\r\n  <Switch>\r\n    <Route path=\"/\" exact component={OverviewPage} />\r\n    <Route path=\"/duplicants\" exact component={DuplicantsPage} />\r\n    <Route\r\n      path=\"/duplicants/:gameObjectId\"\r\n      exact\r\n      component={DuplicantEditorPage}\r\n    />\r\n    <Route path=\"/geysers\" exact component={GeysersPage} />\r\n    <Route path=\"/planets\" exact component={PlanetsPage} />\r\n    <Route path=\"/materials\" exact component={MaterialsPage} />\r\n    <Route path=\"/raw\" exact component={RawEditorPage} />\r\n    <Route path=\"/settings\" exact component={SettingsPage} />\r\n    <Redirect to=\"/\" />\r\n  </Switch>\r\n);\r\nexport default Routes;\r\n","import OverviewPage from \"./component\";\r\nimport connectOverviewPage from \"./connector\";\r\n\r\nexport default connectOverviewPage(OverviewPage);\r\n","import * as React from \"react\";\r\n\r\nimport { LoadingStatus } from \"@/services/oni-save/state\";\r\n\r\nimport NoSave from \"./components/NoSave\";\r\nimport SaveOverview from \"./components/SaveOverview\";\r\nimport SaveError from \"./components/SaveError\";\r\n\r\nexport interface OverviewPageProps {\r\n  loadingStatus: LoadingStatus;\r\n}\r\n\r\ntype Props = OverviewPageProps;\r\nconst OverviewPage: React.FC<Props> = ({ loadingStatus }) => {\r\n  switch (loadingStatus) {\r\n    default:\r\n      return <NoSave />;\r\n    case LoadingStatus.Error:\r\n      return <SaveError />;\r\n    case LoadingStatus.Saving:\r\n    case LoadingStatus.Ready:\r\n      return <SaveOverview />;\r\n  }\r\n};\r\n\r\nexport default OverviewPage;\r\n","import * as React from \"react\";\r\n\r\nimport { Trans, WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { OSType } from \"@/runtime-env\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\nimport LoadButton from \"@/components/LoadButton\";\r\nimport LoadExampleButton from \"@/components/LoadExampleButton\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      padding: theme.spacing(2)\r\n    }\r\n  });\r\n\r\nconst SaveFilePaths: Record<OSType, string | null> = {\r\n  windows: \"Documents/Klei/OxygenNotIncluded/save_files\",\r\n  mac: null,\r\n  linux: \"~/.config/unity3d/Klei/Oxygen Not Included/save_files\",\r\n  unknown: null\r\n};\r\nconst saveFilePath = SaveFilePaths[OSType];\r\n\r\ntype Props = WithStyles<typeof styles> & WithTranslation;\r\n\r\nconst NoSave: React.FC<Props> = ({ classes, t }) => (\r\n  <PageContainer title={t(\"overview-page.no-save.title\")}>\r\n    <div className={classes.root}>\r\n      <div>\r\n        <Typography variant=\"h5\">\r\n          <Trans i18nKey=\"overview-page.no-save.prompt\">\r\n            Load a save using the controls on the upper left.\r\n          </Trans>\r\n        </Typography>\r\n      </div>\r\n      {SaveFilePaths[OSType] && (\r\n        <Typography component=\"div\" variant=\"body1\">\r\n          <Trans i18nKey=\"overview-page.no-save.save-location\">\r\n            Save files can be found at <code>{{ path: saveFilePath }}</code>\r\n          </Trans>\r\n        </Typography>\r\n      )}\r\n      <LoadButton />\r\n      <Typography component=\"div\">\r\n        Have no save file? Want to preview the editor?\r\n      </Typography>\r\n      <LoadExampleButton />\r\n    </div>\r\n  </PageContainer>\r\n);\r\nexport default withStyles(styles)(withTranslation()(NoSave));\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport Nav from \"./Nav\";\r\nimport GithubButton from \"./GithubButton\";\r\n\r\nexport interface SidebarProps {\r\n  className?: string;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    toolbar: {\r\n      ...theme.mixins.toolbar,\r\n      display: \"flex\",\r\n      paddingLeft: theme.spacing(3),\r\n      alignItems: \"center\"\r\n    },\r\n    ghButton: {\r\n      marginLeft: \"auto\",\r\n      marginRight: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = SidebarProps & WithStyles<typeof styles>;\r\n\r\nconst Sidebar: React.FC<Props> = ({ className, classes }) => (\r\n  <div className={className}>\r\n    <div className={classes.toolbar}>\r\n      <Typography variant=\"h6\" color=\"textSecondary\">\r\n        Duplicity\r\n      </Typography>\r\n      <GithubButton className={classes.ghButton} />\r\n    </div>\r\n    <Divider />\r\n    <Nav />\r\n  </div>\r\n);\r\nexport default withStyles(styles)(Sidebar);\r\n","import Nav from \"./component\";\r\nimport connectNav from \"./connector\";\r\n\r\nexport default connectNav(Nav);\r\n","import * as React from \"react\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\n\r\nimport ListItemLink from \"@/components/ListItemLink\";\r\n\r\nimport NavItems from \"./nav-links\";\r\n\r\nexport interface NavProps {\r\n  hasSave: boolean;\r\n}\r\n\r\nexport type Props = NavProps;\r\nconst Nav: React.FC<Props> = ({ hasSave }) => (\r\n  <List component=\"nav\">\r\n    {NavItems.map(({ name, path, i18nKey, saveRequired }) => (\r\n      <ListItemLink\r\n        key={name}\r\n        to={path}\r\n        button\r\n        autoselect\r\n        disabled={saveRequired ? !hasSave : false}\r\n      >\r\n        <ListItemText>\r\n          <Trans i18nKey={i18nKey}>{name}</Trans>\r\n        </ListItemText>\r\n      </ListItemLink>\r\n    ))}\r\n  </List>\r\n);\r\n\r\nexport default Nav;\r\n","import * as React from \"react\";\r\n\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\n\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\n\r\nimport { onLinkClick } from \"./utils\";\r\n\r\nexport interface ListItemLinkProps {\r\n  to: string;\r\n  autoselect?: boolean;\r\n  button?: boolean;\r\n  disabled?: boolean;\r\n}\r\n\r\ntype Props = ListItemLinkProps & RouteComponentProps;\r\nclass ListItemLink extends React.Component<Props> {\r\n  private _onClick = onLinkClick.bind(this);\r\n\r\n  render() {\r\n    const {\r\n      history,\r\n      location,\r\n      to,\r\n      autoselect,\r\n      button,\r\n      disabled,\r\n      children\r\n    } = this.props;\r\n    return (\r\n      <ListItem\r\n        selected={autoselect && pathStartsWith(location.pathname, to)}\r\n        component=\"a\"\r\n        button={button as any} // typings are weird here.  `button` works fine, `button={true}` does not.\r\n        href={history.createHref({ pathname: to })}\r\n        disabled={disabled}\r\n        onClick={this._onClick}\r\n      >\r\n        {children}\r\n      </ListItem>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(ListItemLink);\r\n\r\nfunction pathStartsWith(path: string, startsWith: string): boolean {\r\n  if (path === startsWith) {\r\n    return true;\r\n  }\r\n\r\n  return path.substr(0, startsWith.length + 1) === `${startsWith}/`;\r\n}\r\n","export interface NavItem {\r\n  name: string;\r\n  path: string;\r\n  i18nKey: string;\r\n  saveRequired?: boolean;\r\n}\r\n\r\nconst NavItems: NavItem[] = [\r\n  {\r\n    name: \"Overview\",\r\n    path: \"/\",\r\n    i18nKey: \"overview-page.title\"\r\n  },\r\n  {\r\n    name: \"Duplicants\",\r\n    path: \"/duplicants\",\r\n    i18nKey: \"duplicant.noun_titlecase_plural\",\r\n    saveRequired: true\r\n  },\r\n  {\r\n    name: \"Geysers\",\r\n    path: \"/geysers\",\r\n    i18nKey: \"geyser.noun_titlecase_plural\",\r\n    saveRequired: true\r\n  },\r\n  {\r\n    name: \"Materials\",\r\n    path: \"/materials\",\r\n    i18nKey: \"material.noun_titlecase_plural\",\r\n    saveRequired: true\r\n  },\r\n  {\r\n    name: \"Raw Editor\",\r\n    path: \"/raw\",\r\n    i18nKey: \"raw-editor-page.title\",\r\n    saveRequired: true\r\n  }\r\n];\r\n\r\nexport default NavItems;\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\n\r\nimport { hasSaveSelector } from \"@/services/oni-save/selectors/save-game\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  hasSave: hasSaveSelector\r\n});\r\n\r\nexport default connect(mapStateToProps);\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faGithub } from \"@fortawesome/free-brands-svg-icons\";\r\n\r\nexport interface GithubButtonProps {\r\n  className?: string;\r\n}\r\ntype Props = GithubButtonProps & WithTranslation;\r\nconst GithubButton: React.FC<Props> = ({ className, t }) => (\r\n  <IconButton\r\n    className={className}\r\n    component=\"a\"\r\n    href=\"https://github.com/RoboPhred/oni-duplicity\"\r\n    target=\"_blank\"\r\n    title={t(\"view-github\")}\r\n  >\r\n    <FontAwesomeIcon icon={faGithub} />\r\n  </IconButton>\r\n);\r\n\r\nexport default withTranslation()(GithubButton);\r\n","import * as React from \"react\";\r\n\r\nimport MaterialAppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport {\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles,\r\n  Theme\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport SettingsButton from \"./SettingsButton\";\r\nimport SaveIconButton from \"./SaveIconButton\";\r\nimport LoadIconButton from \"./LoadIconButton\";\r\nimport BackButton from \"./BackButton\";\r\nimport ModifiedChip from \"./ModifiedChip\";\r\nimport ExampleChip from \"./ExampleChip\";\r\n\r\nexport interface AppbarProps {\r\n  title: string;\r\n  back?: boolean;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    title: {\r\n      flexGrow: 1\r\n    },\r\n    chip: {\r\n      marginRight: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = AppbarProps & WithStyles<typeof styles>;\r\n\r\nconst Appbar: React.FC<Props> = ({ classes, title, back }) => (\r\n  <MaterialAppBar position=\"static\">\r\n    <Toolbar>\r\n      {back && <BackButton />}\r\n      <Typography className={classes.title} variant=\"h6\" color=\"inherit\">\r\n        {title}\r\n      </Typography>\r\n      <ModifiedChip className={classes.chip} />\r\n      <ExampleChip className={classes.chip} />\r\n      <SaveIconButton />\r\n      <LoadIconButton />\r\n      <SettingsButton />\r\n    </Toolbar>\r\n  </MaterialAppBar>\r\n);\r\nexport default withStyles(styles)(Appbar);\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { push } from \"connected-react-router\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\n\r\nconst mapDispatchToProps = {\r\n  onClick: () => push(\"/settings\")\r\n};\r\ntype DispatchProps = typeof mapDispatchToProps;\r\n\r\ntype Props = DispatchProps;\r\nconst SettingsButton: React.FC<Props> = ({ onClick }) => (\r\n  <IconButton color=\"inherit\" onClick={onClick}>\r\n    <SettingsIcon />\r\n  </IconButton>\r\n);\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(SettingsButton);\r\n","import SaveIconButton from \"./component\";\r\nimport connectSaveIconButton from \"./connector\";\r\n\r\nexport default connectSaveIconButton(SaveIconButton);\r\n","import * as React from \"react\";\r\n\r\nimport { withTranslation, WithTranslation } from \"react-i18next\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\n\r\nexport interface SaveIconButtonProps {\r\n  disabled: boolean;\r\n  onSave(): void;\r\n}\r\n\r\ntype Props = SaveIconButtonProps & WithTranslation;\r\nconst SaveIconButton: React.SFC<Props> = ({ disabled, onSave, t }) => (\r\n  <IconButton\r\n    title={t(\"save-file.verbs.save_titlecase\")}\r\n    disabled={disabled}\r\n    onClick={onSave}\r\n  >\r\n    <SaveIcon />\r\n  </IconButton>\r\n);\r\n\r\nexport default withTranslation()(SaveIconButton);\r\n","import { createSelector } from \"reselect\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\n\r\nimport { LoadingStatus } from \"@/services/oni-save/state\";\r\nimport { isMockSelector } from \"@/services/oni-save/selectors/save-game\";\r\nimport { loadingStatusSelector } from \"@/services/oni-save/selectors/loading-status\";\r\n\r\nimport { saveOniSave } from \"@/services/oni-save/actions/save-onisave\";\r\n\r\nconst disabledSelector = createSelector(\r\n  loadingStatusSelector,\r\n  isMockSelector,\r\n  (loadStatus, isMock) => {\r\n    if (loadStatus !== LoadingStatus.Ready) {\r\n      return true;\r\n    }\r\n    if (isMock) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n);\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  disabled: disabledSelector\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  onSave: () => saveOniSave()\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n);\r\n","import LoadIconButton from \"./component\";\r\nexport default LoadIconButton;\r\n","import * as React from \"react\";\r\n\r\nimport { withTranslation, WithTranslation } from \"react-i18next\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\n\r\nimport AbstractLoadButton from \"@/components/AbstractLoadButton\";\r\n\r\ntype Props = WithTranslation;\r\nconst LoadIconButton: React.FC<Props> = ({ t }) => (\r\n  <AbstractLoadButton>\r\n    {({ disabled, onClick }) => (\r\n      <IconButton\r\n        title={t(\"save-file.verbs.load_titlecase\")}\r\n        disabled={disabled}\r\n        onClick={onClick}\r\n      >\r\n        <FolderIcon />\r\n      </IconButton>\r\n    )}\r\n  </AbstractLoadButton>\r\n);\r\n\r\nexport default withTranslation()(LoadIconButton);\r\n","import * as React from \"react\";\r\n\r\nexport interface AbstractLoadButtonProps {\r\n  disabled: boolean;\r\n  onLoadSave(file: File): void;\r\n  children(props: AbstractLoadButtonRenderProps): React.ReactChild;\r\n}\r\nexport interface AbstractLoadButtonRenderProps {\r\n  disabled: boolean;\r\n  onClick(): void;\r\n}\r\n\r\ntype Props = AbstractLoadButtonProps;\r\nconst AbstractLoadButton: React.FC<Props> = ({\r\n  disabled,\r\n  onLoadSave,\r\n  children\r\n}) => {\r\n  const inputRef = React.useRef<HTMLInputElement | null>(null);\r\n\r\n  const onClick = React.useCallback(() => {\r\n    if (inputRef.current) {\r\n      inputRef.current.click();\r\n    }\r\n  }, [inputRef]);\r\n\r\n  const onFileChange = React.useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const files = e.target.files;\r\n      if (!files || files.length === 0) {\r\n        return;\r\n      }\r\n      const file = files[0];\r\n\r\n      onLoadSave(file);\r\n    },\r\n    [onLoadSave]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {children({ disabled, onClick })}\r\n      <input\r\n        ref={inputRef}\r\n        style={{ display: \"none\" }}\r\n        type=\"file\"\r\n        accept=\".sav\"\r\n        onChange={onFileChange}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AbstractLoadButton;\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\n\r\nimport { LoadingStatus } from \"@/services/oni-save/state\";\r\nimport { loadingStatusSelector } from \"@/services/oni-save/selectors/loading-status\";\r\n\r\nimport { loadOniSave } from \"@/services/oni-save/actions/load-onisave\";\r\n\r\nfunction isBusy(status: LoadingStatus) {\r\n  switch (status) {\r\n    case LoadingStatus.Loading:\r\n    case LoadingStatus.Saving:\r\n      return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  disabled: (state: AppState) => isBusy(loadingStatusSelector(state))\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  onLoadSave: loadOniSave\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n);\r\n","import BackButton from \"./component\";\r\nimport connectBackButton from \"./connector\";\r\n\r\nexport default connectBackButton(BackButton);\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\n\r\nexport interface BackButtonProps {\r\n  className?: string;\r\n  onClick(): void;\r\n}\r\n\r\ntype Props = BackButtonProps;\r\nconst BackButton: React.FC<Props> = ({ className, onClick }) => (\r\n  <IconButton\r\n    className={className}\r\n    color=\"inherit\"\r\n    aria-label=\"Back\"\r\n    onClick={onClick}\r\n  >\r\n    <ArrowBackIcon />\r\n  </IconButton>\r\n);\r\n\r\nexport default BackButton;\r\n","import { connect } from \"react-redux\";\r\nimport { goBack } from \"connected-react-router\";\r\n\r\nconst mapDispatchToProps = {\r\n  onClick: goBack\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n);\r\n","import ModifiedChip from \"./component\";\r\nimport connectModifiedChip from \"./connector\";\r\n\r\nexport default connectModifiedChip(ModifiedChip);\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport Chip from \"@material-ui/core/Chip\";\r\n\r\nexport interface ModifiedChipProps {\r\n  className?: string;\r\n  isModified: boolean;\r\n}\r\n\r\ntype Props = ModifiedChipProps & WithTranslation;\r\nconst ModifiedChip: React.FC<Props> = ({ className, isModified, t }) => (\r\n  <div className={className}>\r\n    {isModified && (\r\n      <Chip\r\n        color=\"secondary\"\r\n        label={t(\"save-file.conditions.modified\", {\r\n          defaultValue: \"Modified\"\r\n        })}\r\n        title={t(\"save-file.conditions.modified_description\")}\r\n      />\r\n    )}\r\n  </div>\r\n);\r\n\r\nexport default withTranslation()(ModifiedChip);\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\nimport { isSaveModifiedSelector } from \"@/services/oni-save/selectors/save-game\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  isModified: isSaveModifiedSelector\r\n});\r\n\r\nexport default connect(mapStateToProps);\r\n","import ExampleChip from \"./component\";\r\nimport connectExampleChip from \"./connector\";\r\n\r\nexport default connectExampleChip(ExampleChip);\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport Chip from \"@material-ui/core/Chip\";\r\n\r\nexport interface ExampleChipChipProps {\r\n  isExample: boolean;\r\n  className?: string;\r\n}\r\n\r\ntype Props = ExampleChipChipProps & WithTranslation;\r\nconst ExampleChip: React.FC<Props> = ({ className, isExample, t }) => (\r\n  <div className={className}>\r\n    {isExample && (\r\n      <Chip\r\n        color=\"secondary\"\r\n        label={t(\"save-file.conditions.example\", {\r\n          defaultValue: \"Example\"\r\n        })}\r\n        title={t(\"save-file.conditions.example_description\")}\r\n      />\r\n    )}\r\n  </div>\r\n);\r\n\r\nexport default withTranslation()(ExampleChip);\r\n","import { connect } from \"react-redux\";\r\nimport { createStructuredSelector } from \"@/state\";\r\nimport { isMockSelector } from \"@/services/oni-save/selectors/save-game\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  isExample: isMockSelector\r\n});\r\n\r\nexport default connect(mapStateToProps);\r\n","import LoadButton from \"./component\";\r\n\r\nexport default LoadButton;\r\n","import * as React from \"react\";\r\n\r\nimport { Trans } from \"react-i18next\";\r\n\r\nimport AbstractLoadButton from \"@/components/AbstractLoadButton\";\r\n\r\nconst LoadButton: React.FC = () => (\r\n  <AbstractLoadButton>\r\n    {({ disabled, onClick }) => (\r\n      <button disabled={disabled} onClick={onClick}>\r\n        <Trans i18nKey=\"save-file.verbs.load_titlecase\">Load</Trans>\r\n      </button>\r\n    )}\r\n  </AbstractLoadButton>\r\n);\r\n\r\nexport default LoadButton;\r\n","import LoadExampleButton from \"./component\";\r\nimport connectLoadExampleButton from \"./connector\";\r\n\r\nexport default connectLoadExampleButton(LoadExampleButton);\r\n","import * as React from \"react\";\r\n\r\nexport interface LoadExampleButtonProps {\r\n  onLoadExampleSave(): void;\r\n}\r\ntype Props = LoadExampleButtonProps;\r\nconst LoadExampleButton: React.FC<Props> = ({ onLoadExampleSave }) => (\r\n  <button onClick={onLoadExampleSave}>Load Example</button>\r\n);\r\n\r\nexport default LoadExampleButton;\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { loadExampleSave } from \"@/services/oni-save/actions/load-example\";\r\n\r\nconst mapDispatchToProps = {\r\n  onLoadExampleSave: loadExampleSave\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n);\r\n","import SaveOverview from \"./SaveOverview\";\r\nexport default SaveOverview;\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\n\r\nimport Difficulty from \"./components/Difficulty\";\r\n\r\nimport mapStateToProps, { StateProps } from \"./state-props\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      padding: theme.spacing()\r\n    },\r\n    difficulty: {\r\n      marginTop: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = StateProps & WithStyles<typeof styles>;\r\n\r\nconst SaveOverview: React.FC<Props> = ({ classes, saveName, cycleCount }) => (\r\n  <PageContainer title=\"Overview\">\r\n    <div className={classes.root}>\r\n      <Typography variant=\"h4\">{saveName}</Typography>\r\n      <Divider />\r\n      <Typography>{cycleCount} cycles.</Typography>\r\n      <Difficulty className={classes.difficulty} />\r\n    </div>\r\n  </PageContainer>\r\n);\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(SaveOverview));\r\n","import * as React from \"react\";\r\nimport { QualityLevelSettingValues } from \"oni-save-parser\";\r\n\r\nimport { createStyles, withStyles, WithStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nimport AbstractDifficulty from \"@/services/oni-save/components/AbstractDifficulty\";\r\nimport { keysOfType } from \"@/utils\";\r\n\r\nconst styles = createStyles({\r\n  table: {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"minmax(min-content, 200px) auto\"\r\n  }\r\n});\r\n\r\nexport interface DifficultyProps {\r\n  className?: string;\r\n}\r\n\r\ntype Props = DifficultyProps & WithStyles<typeof styles>;\r\n\r\nconst Difficulty: React.FC<Props> = ({ className, classes }) => (\r\n  <AbstractDifficulty>\r\n    {({ difficulty, onModifyDifficulty }) => (\r\n      <div className={className}>\r\n        <Typography variant=\"h6\">Difficulty</Typography>\r\n        <Divider />\r\n        <div className={classes.table}>\r\n          {keysOfType(difficulty).map(name => (\r\n            <React.Fragment key={name}>\r\n              <Typography>{name}</Typography>\r\n              <Select\r\n                value={difficulty[name]}\r\n                onChange={e =>\r\n                  onModifyDifficulty(name, e.target.value as string)\r\n                }\r\n              >\r\n                {QualityLevelSettingValues[name].map(value => (\r\n                  <MenuItem key={value} value={value}>\r\n                    {value}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    )}\r\n  </AbstractDifficulty>\r\n);\r\n\r\nexport default withStyles(styles)(Difficulty);\r\n","import { createSelector } from \"reselect\";\r\nimport { find } from \"lodash-es\";\r\nimport { QualityLevelSettingValues } from \"oni-save-parser\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\nimport { keysOfType } from \"@/utils\";\r\n\r\nimport { saveGameSelector } from \"../selectors/save-game\";\r\nimport { modifyDifficulty } from \"../actions/modify-difficulty\";\r\n\r\nimport { connectRenderComponent } from \"./connectRenderComponent\";\r\n\r\nconst gameSettingsSelector = createSelector(\r\n  saveGameSelector,\r\n  saveGame => {\r\n    if (!saveGame) {\r\n      return null;\r\n    }\r\n    return saveGame.gameData.customGameSettings;\r\n  }\r\n);\r\n\r\nconst difficultySelector = createSelector(\r\n  gameSettingsSelector,\r\n  gameSettings => {\r\n    const difficulty: Record<\r\n      keyof typeof QualityLevelSettingValues,\r\n      string\r\n    > = {} as any;\r\n    if (gameSettings) {\r\n      for (const setting of keysOfType(QualityLevelSettingValues)) {\r\n        const [_, value] = find(\r\n          gameSettings.CurrentQualityLevelsBySetting,\r\n          x => x[0] === setting\r\n        ) || [null, null];\r\n        if (value) {\r\n          difficulty[setting] = value;\r\n        }\r\n      }\r\n    }\r\n\r\n    return difficulty;\r\n  }\r\n);\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  difficulty: difficultySelector\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  onModifyDifficulty: modifyDifficulty\r\n};\r\n\r\nexport default connectRenderComponent(mapStateToProps, mapDispatchToProps);\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n  connect,\r\n  MapStateToPropsParam,\r\n  MapDispatchToPropsNonObject,\r\n  Options,\r\n  ResolveThunks,\r\n  DispatchProp,\r\n  MergeProps,\r\n  MapDispatchToPropsParam\r\n} from \"react-redux\";\r\n\r\nexport type ConnectedRenderComponentProps<\r\n  TInjectProps,\r\n  TOwnProps\r\n> = TOwnProps & { children(props: TInjectProps): React.ReactChild };\r\n\r\nexport type ConnectedRenderComponent<\r\n  TInjectProps,\r\n  TOwnProps\r\n> = React.ComponentType<ConnectedRenderComponentProps<TInjectProps, TOwnProps>>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  no_dispatch = {},\r\n  TOwnProps = {},\r\n  State = {}\r\n>(\r\n  mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>\r\n): ConnectedRenderComponent<TStateProps & DispatchProp, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  no_state = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {}\r\n>(\r\n  mapStateToProps: null | undefined,\r\n  mapDispatchToProps: MapDispatchToPropsNonObject<TDispatchProps, TOwnProps>\r\n): ConnectedRenderComponent<TDispatchProps, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  no_state = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {}\r\n>(\r\n  mapStateToProps: null | undefined,\r\n  mapDispatchToProps: TDispatchProps\r\n): ConnectedRenderComponent<ResolveThunks<TDispatchProps>, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {},\r\n  State = {}\r\n>(\r\n  mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\r\n  mapDispatchToProps: MapDispatchToPropsNonObject<TDispatchProps, TOwnProps>\r\n): ConnectedRenderComponent<TStateProps & TDispatchProps, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {},\r\n  State = {}\r\n>(\r\n  mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\r\n  mapDispatchToProps: TDispatchProps\r\n): ConnectedRenderComponent<\r\n  TStateProps & ResolveThunks<TDispatchProps>,\r\n  TOwnProps\r\n>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  no_dispatch = {},\r\n  TOwnProps = {},\r\n  TMergedProps = {},\r\n  State = {}\r\n>(\r\n  mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\r\n  mapDispatchToProps: null | undefined,\r\n  mergeProps: MergeProps<TStateProps, undefined, TOwnProps, TMergedProps>\r\n): ConnectedRenderComponent<TMergedProps, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  no_state = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {},\r\n  TMergedProps = {}\r\n>(\r\n  mapStateToProps: null | undefined,\r\n  mapDispatchToProps: MapDispatchToPropsParam<TDispatchProps, TOwnProps>,\r\n  mergeProps: MergeProps<undefined, TDispatchProps, TOwnProps, TMergedProps>\r\n): ConnectedRenderComponent<TMergedProps, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  no_state = {},\r\n  no_dispatch = {},\r\n  TOwnProps = {},\r\n  TMergedProps = {}\r\n>(\r\n  mapStateToProps: null | undefined,\r\n  mapDispatchToProps: null | undefined,\r\n  mergeProps: MergeProps<undefined, undefined, TOwnProps, TMergedProps>\r\n): ConnectedRenderComponent<TMergedProps, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {},\r\n  TMergedProps = {},\r\n  State = {}\r\n>(\r\n  mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\r\n  mapDispatchToProps: MapDispatchToPropsParam<TDispatchProps, TOwnProps>,\r\n  mergeProps: MergeProps<TStateProps, TDispatchProps, TOwnProps, TMergedProps>,\r\n  options?: Options<State, TStateProps, TOwnProps, TMergedProps>\r\n): ConnectedRenderComponent<TMergedProps, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  no_dispatch = {},\r\n  TOwnProps = {},\r\n  State = {}\r\n>(\r\n  mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\r\n  mapDispatchToProps: null | undefined,\r\n  mergeProps: null | undefined,\r\n  options: Options<State, TStateProps, TOwnProps>\r\n): ConnectedRenderComponent<DispatchProp & TStateProps, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {}\r\n>(\r\n  mapStateToProps: null | undefined,\r\n  mapDispatchToProps: MapDispatchToPropsNonObject<TDispatchProps, TOwnProps>,\r\n  mergeProps: null | undefined,\r\n  options: Options<{}, TStateProps, TOwnProps>\r\n): ConnectedRenderComponent<TDispatchProps, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {}\r\n>(\r\n  mapStateToProps: null | undefined,\r\n  mapDispatchToProps: TDispatchProps,\r\n  mergeProps: null | undefined,\r\n  options: Options<{}, TStateProps, TOwnProps>\r\n): ConnectedRenderComponent<ResolveThunks<TDispatchProps>, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {},\r\n  State = {}\r\n>(\r\n  mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\r\n  mapDispatchToProps: MapDispatchToPropsNonObject<TDispatchProps, TOwnProps>,\r\n  mergeProps: null | undefined,\r\n  options: Options<State, TStateProps, TOwnProps>\r\n): ConnectedRenderComponent<TStateProps & TDispatchProps, TOwnProps>;\r\n\r\nexport function connectRenderComponent<\r\n  TStateProps = {},\r\n  TDispatchProps = {},\r\n  TOwnProps = {},\r\n  State = {}\r\n>(\r\n  mapStateToProps: MapStateToPropsParam<TStateProps, TOwnProps, State>,\r\n  mapDispatchToProps: TDispatchProps,\r\n  mergeProps: null | undefined,\r\n  options: Options<State, TStateProps, TOwnProps>\r\n): ConnectedRenderComponent<\r\n  TStateProps & ResolveThunks<TDispatchProps>,\r\n  TOwnProps\r\n>;\r\n\r\nexport function connectRenderComponent(\r\n  mapStateToProps: any,\r\n  mapDispatchToProps?: any\r\n): React.ComponentType<any> {\r\n  const ConnectedRenderComponent: React.FC = (\r\n    props: ConnectedRenderComponentProps<any, any>\r\n  ) => <>{props.children(...props)}</>;\r\n  return connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(ConnectedRenderComponent);\r\n}\r\n","import { createStructuredSelector, createSelector } from \"reselect\";\r\n\r\nimport { AppState } from \"@/state\";\r\n\r\nimport { saveGameSelector } from \"@/services/oni-save/selectors/save-game\";\r\n\r\nexport interface StateProps {\r\n  saveName: string;\r\n  cycleCount: number;\r\n}\r\n\r\nconst mapDispatchToProps = createStructuredSelector<AppState, StateProps>({\r\n  saveName: createSelector(\r\n    saveGameSelector,\r\n    game => (game && game.header.gameInfo.baseName) || \"\"\r\n  ),\r\n  cycleCount: createSelector(\r\n    saveGameSelector,\r\n    game => (game && game.header.gameInfo.numberOfCycles) || 0\r\n  )\r\n});\r\nexport default mapDispatchToProps;\r\n","import SaveError from \"./component\";\r\nimport connectSaveError from \"./connector\";\r\n\r\nexport default connectSaveError(SaveError);\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\n\r\nexport interface SaveErrorProps {\r\n  errorMessage: string | null;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      padding: theme.spacing()\r\n    },\r\n    errorMessage: {\r\n      marginTop: theme.spacing()\r\n    }\r\n  });\r\n\r\ntype Props = SaveErrorProps & WithStyles<typeof styles>;\r\nconst SaveError: React.FC<Props> = ({ errorMessage, classes }) => (\r\n  <PageContainer title=\"Failed to Load\">\r\n    <div className={classes.root}>\r\n      <Typography variant=\"h5\">Error loading save</Typography>\r\n      <Divider />\r\n      <Typography className={classes.errorMessage}>{errorMessage}</Typography>\r\n    </div>\r\n  </PageContainer>\r\n);\r\n\r\nexport default withStyles(styles)(SaveError);\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\nimport { loadingErrorMessageSelector } from \"@/services/oni-save/selectors/loading-status\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  errorMessage: loadingErrorMessageSelector\r\n});\r\n\r\nexport default connect(mapStateToProps);\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\nimport { loadingStatusSelector } from \"@/services/oni-save/selectors/loading-status\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  loadingStatus: loadingStatusSelector\r\n});\r\n\r\nexport default connect(mapStateToProps);\r\n","import DuplicantsPage from \"./DuplicantsPage\";\r\nexport default DuplicantsPage;\r\n","import * as React from \"react\";\r\n\r\nimport { WithTranslation, withTranslation } from \"react-i18next\";\r\n\r\nimport { createStyles, withStyles, WithStyles } from \"@material-ui/core/styles\";\r\n\r\nimport PageContainer from \"@/components/PageContainer\";\r\nimport RedirectIfNoSave from \"@/components/RedirectIfNoSave\";\r\n\r\nimport DuplicantList from \"./components/DuplicantList\";\r\n\r\nconst styles = createStyles({\r\n  duplicantList: {\r\n    overflow: \"auto\"\r\n  }\r\n});\r\n\r\ntype Props = WithStyles<typeof styles> & WithTranslation;\r\n\r\nconst DuplicantsPage: React.FC<Props> = ({ classes, t }) => (\r\n  <PageContainer title={t(\"duplicant.noun_titlecase_plural\")}>\r\n    <RedirectIfNoSave />\r\n    <DuplicantList className={classes.duplicantList} />\r\n  </PageContainer>\r\n);\r\nexport default withTranslation()(withStyles(styles)(DuplicantsPage));\r\n","import * as React from \"react\";\r\n\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport interface RedirectIfNoSaveProps {\r\n  hasSave: boolean;\r\n}\r\n\r\ntype Props = RedirectIfNoSaveProps;\r\nconst RedirectIfNoSave: React.FC<Props> = ({ hasSave }) => {\r\n  if (!hasSave) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport default RedirectIfNoSave;\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\n\r\nimport { hasSaveSelector } from \"@/services/oni-save/selectors/save-game\";\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  hasSave: hasSaveSelector\r\n});\r\n\r\nexport default connect(mapStateToProps);\r\n","import * as React from \"react\";\r\nimport classnames from \"classnames\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport AbstractGameObjectList from \"@/services/oni-save/components/AbstractGameObjectList\";\r\n\r\nimport DuplicantListItem from \"./DuplicantListItem\";\r\n\r\nexport interface DuplicantListProps {\r\n  className?: string;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      flexWrap: \"wrap\",\r\n      margin: theme.spacing()\r\n    },\r\n    item: {\r\n      margin: theme.spacing(0.5)\r\n    }\r\n  });\r\n\r\ntype Props = DuplicantListProps & WithStyles<typeof styles>;\r\n\r\nconst DuplicantList: React.FC<Props> = ({ className, classes }) => (\r\n  <AbstractGameObjectList gameObjectType=\"Minion\">\r\n    {({ gameObjectIds }) => (\r\n      <div className={classnames(className, classes.root)}>\r\n        {gameObjectIds.map(id => (\r\n          <DuplicantListItem\r\n            key={id}\r\n            className={classes.item}\r\n            gameObjectId={id}\r\n          />\r\n        ))}\r\n      </div>\r\n    )}\r\n  </AbstractGameObjectList>\r\n);\r\n\r\nexport default withStyles(styles)(DuplicantList);\r\n","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AbstractGameObjectListProps } from \"./props\";\r\nimport mapStateToProps, { StateProps } from \"./state-props\";\r\n\r\ntype Props = AbstractGameObjectListProps & StateProps;\r\nclass AbstractGameObjectList extends React.Component<Props> {\r\n  render() {\r\n    const { gameObjectIds, children } = this.props;\r\n    return React.Children.only(children({ gameObjectIds }));\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(AbstractGameObjectList);\r\n","import createCachedSelector from \"re-reselect\";\r\nimport { getBehavior, KPrefabIDBehavior, GameObject } from \"oni-save-parser\";\r\n\r\nimport { createStructuredSelector } from \"@/state\";\r\nimport { isNotNull, maybeArray } from \"@/utils\";\r\n\r\nimport { gameObjectGroupsSelector } from \"../../selectors/game-objects\";\r\n\r\nimport { AbstractGameObjectListProps } from \"./props\";\r\n\r\nconst gameObjectTypeSelector = (_: any, props: AbstractGameObjectListProps) =>\r\n  props.gameObjectType;\r\n\r\nconst gameObjectIdsSelector = createCachedSelector(\r\n  gameObjectTypeSelector,\r\n  gameObjectGroupsSelector,\r\n  (typeProp, gameObjectsGroups) => {\r\n    if (!gameObjectsGroups) {\r\n      return [];\r\n    }\r\n\r\n    const types = maybeArray(typeProp);\r\n\r\n    const gameObjects: GameObject[] = [];\r\n    for (const group of gameObjectsGroups) {\r\n      if (types.indexOf(group.name) !== -1) {\r\n        gameObjects.push(...group.gameObjects);\r\n      }\r\n    }\r\n\r\n    return gameObjects\r\n      .map(x => getBehavior(x, KPrefabIDBehavior))\r\n      .filter(isNotNull)\r\n      .map(x => x.templateData.InstanceID)\r\n      .sort();\r\n  }\r\n)((_: any, props: AbstractGameObjectListProps) =>\r\n  maybeArray(props.gameObjectType).join(\",\")\r\n);\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  gameObjectIds: gameObjectIdsSelector\r\n});\r\n\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\nexport default mapStateToProps;\r\n","import DuplicantListItem from \"./DuplicantListItem\";\r\nexport default DuplicantListItem;\r\n","import * as React from \"react\";\r\n\r\nimport classnames from \"classnames\";\r\n\r\nimport {\r\n  Theme,\r\n  createStyles,\r\n  withStyles,\r\n  WithStyles\r\n} from \"@material-ui/core/styles\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport DuplicantMenu from \"@/components/DuplicantMenu\";\r\nimport DuplicantPortrait from \"@/components/DuplicantPortrait\";\r\n\r\nimport DuplicantName from \"./components/DuplicantName\";\r\n// import DuplicantPortrait from \"./components/DuplicantPortrait\";\r\nimport DuplicantTraits from \"./components/DuplicantTraits\";\r\nimport DuplicantAttributes from \"./components/DuplicantAttributes\";\r\nimport EditButton from \"./components/EditButton\";\r\n\r\nexport interface DuplicantListItemProps {\r\n  className?: string;\r\n  gameObjectId: number;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: theme.spacing(45),\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      padding: theme.spacing(2)\r\n    },\r\n    titleBar: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      marginBottom: theme.spacing()\r\n    },\r\n    titleControls: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      marginLeft: \"auto\"\r\n    },\r\n    content: {\r\n      display: \"flex\",\r\n      flexDirection: \"row\",\r\n      marginTop: theme.spacing()\r\n    },\r\n    portraitColumn: {\r\n      marginRight: theme.spacing(2)\r\n    },\r\n    attributes: {\r\n      marginLeft: \"auto\"\r\n    },\r\n    editButton: {\r\n      marginLeft: \"auto\"\r\n    }\r\n  });\r\n\r\ntype Props = DuplicantListItemProps & WithStyles<typeof styles>;\r\n\r\nconst DuplicantListItem: React.FC<Props> = ({\r\n  className,\r\n  classes,\r\n  gameObjectId\r\n}) => (\r\n  <Paper className={classnames(classes.root, className)}>\r\n    <div className={classes.titleBar}>\r\n      <DuplicantName gameObjectId={gameObjectId} />\r\n      <div className={classes.titleControls}>\r\n        <EditButton\r\n          className={classes.editButton}\r\n          gameObjectId={gameObjectId}\r\n        />\r\n        <DuplicantMenu gameObjectId={gameObjectId} />\r\n      </div>\r\n    </div>\r\n    <Divider />\r\n    <div className={classes.content}>\r\n      <div className={classes.portraitColumn}>\r\n        <DuplicantPortrait gameObjectId={gameObjectId} scale={0.3} />\r\n        <DuplicantTraits gameObjectId={gameObjectId} />\r\n      </div>\r\n      <DuplicantAttributes\r\n        className={classes.attributes}\r\n        gameObjectId={gameObjectId}\r\n      />\r\n    </div>\r\n  </Paper>\r\n);\r\n\r\nexport default withStyles(styles)(DuplicantListItem);\r\n","import DuplicantMenu from \"./component\";\r\nexport default DuplicantMenu;\r\n","import * as React from \"react\";\r\n\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n\r\nimport CopyMenuItem from \"./components/CopyMenuItem\";\r\nimport ImportMenuItem from \"./components/ImportMenuItem\";\r\nimport ExportMenuItem from \"./components/ExportMenuItem\";\r\nimport PasteMenuItem from \"./components/PasteMenuItem\";\r\nimport CloneMenuItem from \"./components/CloneMenuItem\";\r\n\r\nexport interface DuplicantMenuProps {\r\n  gameObjectId: number;\r\n}\r\n\r\ntype Props = DuplicantMenuProps;\r\nconst DuplicantMenu: React.FC<Props> = ({ gameObjectId }) => {\r\n  const [anchorEl, setAnchorEl] = React.useState<HTMLElement | null>(null);\r\n\r\n  const onOpen = React.useCallback((e: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(e.currentTarget);\r\n  }, []);\r\n\r\n  const onClose = React.useCallback(() => {\r\n    setAnchorEl(null);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        aria-owns={anchorEl ? \"duplicant-menu\" : undefined}\r\n        aria-haspopup=\"true\"\r\n        onClick={onOpen}\r\n      >\r\n        <MoreVertIcon />\r\n      </IconButton>\r\n      <Menu\r\n        id=\"duplicant-menu\"\r\n        anchorEl={anchorEl}\r\n        open={Boolean(anchorEl)}\r\n        onClose={onClose}\r\n      >\r\n        <CopyMenuItem gameObjectId={gameObjectId} onClose={onClose} />\r\n        <PasteMenuItem gameObjectId={gameObjectId} onClose={onClose} />\r\n        <Divider />\r\n        <ImportMenuItem gameObjectId={gameObjectId} onClose={onClose} />\r\n        <ExportMenuItem gameObjectId={gameObjectId} onClose={onClose} />\r\n        <Divider />\r\n        <CloneMenuItem gameObjectId={gameObjectId} onClick={onClose} />\r\n      </Menu>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DuplicantMenu;\r\n","import CopyMenuItem from \"./component\";\r\nimport connectCopyMenuItem from \"./connector\";\r\n\r\nexport default connectCopyMenuItem(CopyMenuItem);\r\n","import * as React from \"react\";\r\n\r\nimport { withTranslation, WithTranslation } from \"react-i18next\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nimport { MinionExportableBehaviors } from \"@/exportable-behaviors\";\r\n\r\nimport BehaviorChooserDialog from \"@/components/BehaviorChooserDialog\";\r\n\r\nexport interface CopyMenuItemProps {\r\n  onCopyBehaviors(behaviors: string[]): void;\r\n  onClose(): void;\r\n}\r\n\r\ntype Props = CopyMenuItemProps & WithTranslation;\r\nconst CopyMenuItem: React.FC<Props> = ({ onCopyBehaviors, onClose, t }) => {\r\n  const [isDialogOpen, setDialogOpen] = React.useState(false);\r\n\r\n  const onClick = React.useCallback(() => {\r\n    setDialogOpen(true);\r\n  }, [setDialogOpen]);\r\n\r\n  const onDialogApply = React.useCallback(\r\n    (behaviors: string[]) => {\r\n      onCopyBehaviors(behaviors);\r\n      onClose();\r\n    },\r\n    [onCopyBehaviors, onClose]\r\n  );\r\n\r\n  const copyText = t(\"data.verbs.copy_titlecase\");\r\n\r\n  return (\r\n    <MenuItem onClick={onClick}>\r\n      {copyText}\r\n      <BehaviorChooserDialog\r\n        open={isDialogOpen}\r\n        title={copyText}\r\n        applyText={copyText}\r\n        choices={MinionExportableBehaviors}\r\n        onApply={onDialogApply}\r\n        onCancel={onClose}\r\n      />\r\n    </MenuItem>\r\n  );\r\n};\r\n\r\nexport default withTranslation()(CopyMenuItem);\r\n","import { Dispatch } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AppState } from \"@/state\";\r\nimport { copyBehaviors } from \"@/services/oni-save/actions/copy-behaviors\";\r\n\r\nexport interface CopyMenuItemInputProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst mapDispatchToProps = function(\r\n  dispatch: Dispatch,\r\n  props: CopyMenuItemInputProps\r\n) {\r\n  return {\r\n    onCopyBehaviors: (behaviors: string[]) =>\r\n      dispatch(copyBehaviors(props.gameObjectId, behaviors))\r\n  };\r\n};\r\ntype DispatchProps = ReturnType<typeof mapDispatchToProps>;\r\n\r\nexport default connect<{}, DispatchProps, CopyMenuItemInputProps, AppState>(\r\n  null,\r\n  mapDispatchToProps\r\n);\r\n","import ImportMenuItem from \"./component\";\r\nimport connectImportMenuItem from \"./connector\";\r\n\r\nexport default connectImportMenuItem(ImportMenuItem);\r\n","import * as React from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nexport interface ImportMenuItemProps {\r\n  onImportDuplicant(file: File): void;\r\n  onClose(): void;\r\n}\r\n\r\ntype Props = ImportMenuItemProps;\r\nconst ImportMenuItem: React.FC<Props> = ({ onImportDuplicant, onClose }) => {\r\n  const inputRef = React.useRef<HTMLInputElement | null>(null);\r\n\r\n  const onMenuItemClick = React.useCallback(() => {\r\n    if (inputRef.current) {\r\n      inputRef.current.click();\r\n    }\r\n  }, [inputRef]);\r\n\r\n  const onFileChange = React.useCallback(\r\n    (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const files = e.target.files;\r\n      if (!files || files.length === 0) {\r\n        return;\r\n      }\r\n\r\n      const file = files[0];\r\n\r\n      onImportDuplicant(file);\r\n      onClose();\r\n    },\r\n    [onImportDuplicant, onClose]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <MenuItem onClick={onMenuItemClick}>Import</MenuItem>\r\n      <input\r\n        ref={inputRef}\r\n        style={{ display: \"none\" }}\r\n        type=\"file\"\r\n        accept=\".json\"\r\n        onChange={onFileChange}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImportMenuItem;\r\n","import { connect } from \"react-redux\";\r\n\r\nimport { AppState } from \"@/state\";\r\nimport { importBehaviors } from \"@/services/oni-save/actions/import-behaviors\";\r\n\r\nexport interface ImportMenuItemInputProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst mapDispatchToProps = function(\r\n  dispatch: Function,\r\n  props: ImportMenuItemInputProps\r\n) {\r\n  return {\r\n    onImportDuplicant: (file: File) =>\r\n      dispatch(importBehaviors(props.gameObjectId, file))\r\n  };\r\n};\r\ntype DispatchProps = ReturnType<typeof mapDispatchToProps>;\r\n\r\nexport default connect<{}, DispatchProps, ImportMenuItemInputProps, AppState>(\r\n  null,\r\n  mapDispatchToProps\r\n);\r\n","import ExportMenuItem from \"./component\";\r\nimport connectExportMenuItem from \"./connector\";\r\n\r\nexport default connectExportMenuItem(ExportMenuItem);\r\n","import * as React from \"react\";\r\n\r\nimport { withTranslation, WithTranslation } from \"react-i18next\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nimport { MinionExportableBehaviors } from \"@/exportable-behaviors\";\r\n\r\nimport BehaviorChooserDialog from \"@/components/BehaviorChooserDialog\";\r\n\r\nexport interface ExportMenuItemProps {\r\n  onExportBehaviors(behaviors: string[]): void;\r\n  onClose(): void;\r\n}\r\n\r\ntype Props = ExportMenuItemProps & WithTranslation;\r\nconst ExportMenuItem: React.FC<Props> = ({ onExportBehaviors, onClose, t }) => {\r\n  const [isDialogOpen, setDialogOpen] = React.useState(false);\r\n  const onClick = React.useCallback(() => {\r\n    setDialogOpen(true);\r\n  }, [setDialogOpen]);\r\n  const onDialogApply = React.useCallback(\r\n    (behaviors: string[]) => {\r\n      onExportBehaviors(behaviors);\r\n      onClose();\r\n    },\r\n    [onExportBehaviors, onClose]\r\n  );\r\n  const exportText = t(\"data.verbs.export_titlecase\");\r\n  return (\r\n    <MenuItem onClick={onClick}>\r\n      {exportText}\r\n      <BehaviorChooserDialog\r\n        open={isDialogOpen}\r\n        title={exportText}\r\n        applyText={exportText}\r\n        choices={MinionExportableBehaviors}\r\n        onApply={onDialogApply}\r\n        onCancel={onClose}\r\n      />\r\n    </MenuItem>\r\n  );\r\n};\r\n\r\nexport default withTranslation()(ExportMenuItem);\r\n","import { Dispatch } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AppState } from \"@/state\";\r\nimport { exportBehaviors } from \"@/services/oni-save/actions/export-behaviors\";\r\n\r\nexport interface ExportMenuItemInputProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nconst mapDispatchToProps = function(\r\n  dispatch: Dispatch,\r\n  props: ExportMenuItemInputProps\r\n) {\r\n  return {\r\n    onExportBehaviors: (behaviors: string[]) =>\r\n      dispatch(exportBehaviors(props.gameObjectId, behaviors))\r\n  };\r\n};\r\ntype DispatchProps = ReturnType<typeof mapDispatchToProps>;\r\n\r\nexport default connect<{}, DispatchProps, ExportMenuItemInputProps, AppState>(\r\n  null,\r\n  mapDispatchToProps\r\n);\r\n","import PasteMenuItem from \"./component\";\r\nimport connectPasteMenuItem from \"./connector\";\r\n\r\nexport default connectPasteMenuItem(PasteMenuItem);\r\n","import * as React from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nexport interface PasteMenuItemProps {\r\n  gameObjectId: number;\r\n  disabled: boolean;\r\n  onPasteBehaviors(): void;\r\n  onClose(): void;\r\n}\r\n\r\ntype Props = PasteMenuItemProps;\r\n\r\nconst PasteMenuItem: React.FC<Props> = ({\r\n  disabled,\r\n  onPasteBehaviors,\r\n  onClose\r\n}) => {\r\n  const onClick = React.useCallback(() => {\r\n    onClose();\r\n    onPasteBehaviors();\r\n  }, [onClose, onPasteBehaviors]);\r\n  return (\r\n    <MenuItem disabled={disabled} onClick={onClick}>\r\n      Paste\r\n    </MenuItem>\r\n  );\r\n};\r\n\r\nexport default PasteMenuItem;\r\n","import { Dispatch } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AppState } from \"@/state\";\r\nimport { pasteBehaviors } from \"@/services/oni-save/actions/paste-behaviors\";\r\nimport { gameObjectTypesByIdSelector } from \"@/services/oni-save/selectors/game-objects\";\r\nimport { copyPasteGameObjectTypeSelect } from \"@/services/oni-save/selectors/copy-paste\";\r\n\r\nexport interface PasteMenuItemInputProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nfunction mapStateToProps(state: AppState, props: PasteMenuItemInputProps) {\r\n  const typesById = gameObjectTypesByIdSelector(state);\r\n  return {\r\n    disabled:\r\n      !typesById[props.gameObjectId] ||\r\n      copyPasteGameObjectTypeSelect(state) !== typesById[props.gameObjectId]\r\n  };\r\n}\r\nexport type StateProps = ReturnType<typeof mapStateToProps>;\r\n\r\nconst mapDispatchToProps = function(\r\n  dispatch: Dispatch,\r\n  props: PasteMenuItemInputProps\r\n) {\r\n  return {\r\n    onPasteBehaviors: () => dispatch(pasteBehaviors(props.gameObjectId))\r\n  };\r\n};\r\ntype DispatchProps = ReturnType<typeof mapDispatchToProps>;\r\n\r\nexport default connect<\r\n  StateProps,\r\n  DispatchProps,\r\n  PasteMenuItemInputProps,\r\n  AppState\r\n>(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n);\r\n","import { createServiceSelector } from \"./utils\";\r\n\r\nimport { OniSaveState } from \"../state\";\r\n\r\nexport const copyPasteDataSelector = createServiceSelector(\r\n  (state: OniSaveState) => state.copyPasteData\r\n);\r\n\r\nexport const copyPasteGameObjectTypeSelect = createServiceSelector(\r\n  (state: OniSaveState) => {\r\n    if (!state.copyPasteData) {\r\n      return null;\r\n    }\r\n    return state.copyPasteData.gameObjectType;\r\n  }\r\n);\r\n\r\nexport const copyPasteAvailableBehaviorsSelector = createServiceSelector(\r\n  (state: OniSaveState) => {\r\n    if (!state.copyPasteData) {\r\n      return null;\r\n    }\r\n    return Object.keys(state.copyPasteData.behaviors);\r\n  }\r\n);\r\n","import CloneMenuItem from \"./component\";\r\nimport connectCloneMenuItem from \"./connector\";\r\n\r\nexport default connectCloneMenuItem(CloneMenuItem);\r\n","import * as React from \"react\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nexport interface CloneMenuItemProps {\r\n  onCloneDuplicant(): void;\r\n  onClick(): void;\r\n}\r\n\r\ntype Props = CloneMenuItemProps;\r\nconst CloneMenuItem: React.FC<Props> = ({ onCloneDuplicant, onClick }) => {\r\n  const onMenuItemClick = React.useCallback(() => {\r\n    onCloneDuplicant();\r\n    onClick();\r\n  }, []);\r\n  return <MenuItem onClick={onMenuItemClick}>Clone</MenuItem>;\r\n};\r\n\r\nexport default CloneMenuItem;\r\n","import { connect } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\n\r\nimport { AppState } from \"@/state\";\r\nimport { cloneDuplicant } from \"@/services/oni-save/actions/clone-duplicant\";\r\n\r\nexport interface CloneMenuItemInputProps {\r\n  gameObjectId: number;\r\n}\r\n\r\nfunction mapDispatchToProps(\r\n  dispatch: Dispatch,\r\n  props: CloneMenuItemInputProps\r\n) {\r\n  return {\r\n    onCloneDuplicant: () => dispatch(cloneDuplicant(props.gameObjectId))\r\n  };\r\n}\r\ntype DispatchProps = ReturnType<typeof mapDispatchToProps>;\r\n\r\nexport default connect<{}, DispatchProps, CloneMenuItemInputProps, AppState>(\r\n  null,\r\n  mapDispatchToProps\r\n);\r\n","var map = {\n\t\"./hair_001/hair_001_0.png\": 755,\n\t\"./hair_001/hair_001_1.png\": 756,\n\t\"./hair_001/hair_001_2.png\": 757,\n\t\"./hair_002/hair_002_0.png\": 758,\n\t\"./hair_002/hair_002_1.png\": 759,\n\t\"./hair_002/hair_002_2.png\": 760,\n\t\"./hair_003/hair_003_0.png\": 761,\n\t\"./hair_003/hair_003_1.png\": 762,\n\t\"./hair_003/hair_003_2.png\": 763,\n\t\"./hair_004/hair_004_0.png\": 764,\n\t\"./hair_004/hair_004_1.png\": 765,\n\t\"./hair_004/hair_004_2.png\": 766,\n\t\"./hair_005/hair_005_0.png\": 767,\n\t\"./hair_005/hair_005_1.png\": 768,\n\t\"./hair_005/hair_005_2.png\": 769,\n\t\"./hair_006/hair_006_0.png\": 770,\n\t\"./hair_006/hair_006_1.png\": 771,\n\t\"./hair_006/hair_006_2.png\": 772,\n\t\"./hair_007/hair_007_0.png\": 773,\n\t\"./hair_007/hair_007_1.png\": 774,\n\t\"./hair_007/hair_007_2.png\": 775,\n\t\"./hair_008/hair_008_0.png\": 776,\n\t\"./hair_008/hair_008_1.png\": 777,\n\t\"./hair_008/hair_008_2.png\": 778,\n\t\"./hair_009/hair_009_0.png\": 779,\n\t\"./hair_009/hair_009_1.png\": 780,\n\t\"./hair_009/hair_009_2.png\": 781,\n\t\"./hair_010/hair_010_0.png\": 782,\n\t\"./hair_010/hair_010_1.png\": 783,\n\t\"./hair_010/hair_010_2.png\": 784,\n\t\"./hair_011/hair_011_0.png\": 785,\n\t\"./hair_011/hair_011_1.png\": 786,\n\t\"./hair_011/hair_011_2.png\": 787,\n\t\"./hair_012/hair_012_0.png\": 788,\n\t\"./hair_012/hair_012_1.png\": 789,\n\t\"./hair_012/hair_012_2.png\": 790,\n\t\"./hair_013/hair_013_0.png\": 791,\n\t\"./hair_013/hair_013_1.png\": 792,\n\t\"./hair_013/hair_013_2.png\": 793,\n\t\"./hair_014/hair_014_0.png\": 794,\n\t\"./hair_014/hair_014_1.png\": 795,\n\t\"./hair_014/hair_014_2.png\": 796,\n\t\"./hair_015/hair_015_0.png\": 797,\n\t\"./hair_015/hair_015_1.png\": 798,\n\t\"./hair_015/hair_015_2.png\": 799,\n\t\"./hair_016/hair_016_0.png\": 800,\n\t\"./hair_016/hair_016_1.png\": 801,\n\t\"./hair_016/hair_016_2.png\": 802,\n\t\"./hair_017/hair_017_0.png\": 803,\n\t\"./hair_017/hair_017_1.png\": 804,\n\t\"./hair_017/hair_017_2.png\": 805,\n\t\"./hair_018/hair_018_0.png\": 806,\n\t\"./hair_018/hair_018_1.png\": 807,\n\t\"./hair_018/hair_018_2.png\": 808,\n\t\"./hair_019/hair_019_0.png\": 809,\n\t\"./hair_019/hair_019_1.png\": 810,\n\t\"./hair_019/hair_019_2.png\": 811,\n\t\"./hair_020/hair_020_0.png\": 812,\n\t\"./hair_020/hair_020_1.png\": 813,\n\t\"./hair_020/hair_020_2.png\": 814,\n\t\"./hair_021/hair_021_0.png\": 815,\n\t\"./hair_021/hair_021_1.png\": 816,\n\t\"./hair_021/hair_021_2.png\": 817,\n\t\"./hair_022/hair_022_0.png\": 818,\n\t\"./hair_022/hair_022_1.png\": 819,\n\t\"./hair_022/hair_022_2.png\": 820,\n\t\"./hair_023/hair_023_0.png\": 821,\n\t\"./hair_023/hair_023_1.png\": 822,\n\t\"./hair_023/hair_023_2.png\": 823,\n\t\"./hair_024/hair_024_0.png\": 824,\n\t\"./hair_024/hair_024_1.png\": 825,\n\t\"./hair_024/hair_024_2.png\": 826,\n\t\"./hair_025/hair_025_0.png\": 827,\n\t\"./hair_025/hair_025_1.png\": 828,\n\t\"./hair_025/hair_025_2.png\": 829,\n\t\"./hair_026/hair_026_0.png\": 830,\n\t\"./hair_026/hair_026_1.png\": 831,\n\t\"./hair_026/hair_026_2.png\": 832,\n\t\"./hair_027/hair_027_0.png\": 833,\n\t\"./hair_027/hair_027_1.png\": 834,\n\t\"./hair_027/hair_027_2.png\": 835,\n\t\"./hair_028/hair_028_0.png\": 836,\n\t\"./hair_028/hair_028_1.png\": 837,\n\t\"./hair_028/hair_028_2.png\": 838,\n\t\"./hair_029/hair_029_0.png\": 839,\n\t\"./hair_029/hair_029_1.png\": 840,\n\t\"./hair_029/hair_029_2.png\": 841,\n\t\"./hair_030/hair_030_0.png\": 842,\n\t\"./hair_030/hair_030_1.png\": 843,\n\t\"./hair_030/hair_030_2.png\": 844,\n\t\"./hair_031/hair_031_0.png\": 845,\n\t\"./hair_031/hair_031_1.png\": 846,\n\t\"./hair_031/hair_031_2.png\": 847,\n\t\"./hair_032/hair_032_0.png\": 848,\n\t\"./hair_032/hair_032_1.png\": 849,\n\t\"./hair_032/hair_032_2.png\": 850,\n\t\"./hair_033/hair_033_0.png\": 851,\n\t\"./hair_033/hair_033_1.png\": 852,\n\t\"./hair_033/hair_033_2.png\": 853\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 754;","var map = {\n\t\"./headshape_001/headshape_001_0.png\": 855,\n\t\"./headshape_001/headshape_001_1.png\": 856,\n\t\"./headshape_001/headshape_001_2.png\": 857,\n\t\"./headshape_001/headshape_001_3.png\": 858,\n\t\"./headshape_002/headshape_002_0.png\": 859,\n\t\"./headshape_002/headshape_002_1.png\": 860,\n\t\"./headshape_002/headshape_002_2.png\": 861,\n\t\"./headshape_002/headshape_002_3.png\": 862,\n\t\"./headshape_003/headshape_003_0.png\": 863,\n\t\"./headshape_003/headshape_003_1.png\": 864,\n\t\"./headshape_003/headshape_003_2.png\": 865,\n\t\"./headshape_003/headshape_003_3.png\": 866,\n\t\"./headshape_004/headshape_004_0.png\": 867,\n\t\"./headshape_004/headshape_004_1.png\": 868,\n\t\"./headshape_004/headshape_004_2.png\": 869,\n\t\"./headshape_004/headshape_004_3.png\": 870\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 854;","var map = {\n\t\"./eyes_001/eyes_001_0.png\": 872,\n\t\"./eyes_001/eyes_001_1.png\": 873,\n\t\"./eyes_001/eyes_001_10.png\": 874,\n\t\"./eyes_001/eyes_001_11.png\": 875,\n\t\"./eyes_001/eyes_001_12.png\": 876,\n\t\"./eyes_001/eyes_001_13.png\": 877,\n\t\"./eyes_001/eyes_001_14.png\": 878,\n\t\"./eyes_001/eyes_001_15.png\": 879,\n\t\"./eyes_001/eyes_001_16.png\": 880,\n\t\"./eyes_001/eyes_001_17.png\": 881,\n\t\"./eyes_001/eyes_001_18.png\": 882,\n\t\"./eyes_001/eyes_001_19.png\": 883,\n\t\"./eyes_001/eyes_001_2.png\": 884,\n\t\"./eyes_001/eyes_001_20.png\": 885,\n\t\"./eyes_001/eyes_001_21.png\": 886,\n\t\"./eyes_001/eyes_001_22.png\": 887,\n\t\"./eyes_001/eyes_001_23.png\": 888,\n\t\"./eyes_001/eyes_001_24.png\": 889,\n\t\"./eyes_001/eyes_001_25.png\": 890,\n\t\"./eyes_001/eyes_001_26.png\": 891,\n\t\"./eyes_001/eyes_001_29.png\": 892,\n\t\"./eyes_001/eyes_001_3.png\": 893,\n\t\"./eyes_001/eyes_001_30.png\": 894,\n\t\"./eyes_001/eyes_001_31.png\": 895,\n\t\"./eyes_001/eyes_001_32.png\": 896,\n\t\"./eyes_001/eyes_001_33.png\": 897,\n\t\"./eyes_001/eyes_001_34.png\": 898,\n\t\"./eyes_001/eyes_001_35.png\": 899,\n\t\"./eyes_001/eyes_001_36.png\": 900,\n\t\"./eyes_001/eyes_001_37.png\": 901,\n\t\"./eyes_001/eyes_001_38.png\": 902,\n\t\"./eyes_001/eyes_001_39.png\": 903,\n\t\"./eyes_001/eyes_001_4.png\": 904,\n\t\"./eyes_001/eyes_001_5.png\": 905,\n\t\"./eyes_001/eyes_001_6.png\": 906,\n\t\"./eyes_001/eyes_001_7.png\": 907,\n\t\"./eyes_001/eyes_001_8.png\": 908,\n\t\"./eyes_001/eyes_001_9.png\": 909,\n\t\"./eyes_002/eyes_002_0.png\": 910,\n\t\"./eyes_002/eyes_002_1.png\": 911,\n\t\"./eyes_002/eyes_002_10.png\": 912,\n\t\"./eyes_002/eyes_002_11.png\": 913,\n\t\"./eyes_002/eyes_002_12.png\": 914,\n\t\"./eyes_002/eyes_002_13.png\": 915,\n\t\"./eyes_002/eyes_002_14.png\": 916,\n\t\"./eyes_002/eyes_002_15.png\": 917,\n\t\"./eyes_002/eyes_002_16.png\": 918,\n\t\"./eyes_002/eyes_002_17.png\": 919,\n\t\"./eyes_002/eyes_002_18.png\": 920,\n\t\"./eyes_002/eyes_002_19.png\": 921,\n\t\"./eyes_002/eyes_002_2.png\": 922,\n\t\"./eyes_002/eyes_002_20.png\": 923,\n\t\"./eyes_002/eyes_002_21.png\": 924,\n\t\"./eyes_002/eyes_002_22.png\": 925,\n\t\"./eyes_002/eyes_002_23.png\": 926,\n\t\"./eyes_002/eyes_002_24.png\": 927,\n\t\"./eyes_002/eyes_002_25.png\": 928,\n\t\"./eyes_002/eyes_002_26.png\": 929,\n\t\"./eyes_002/eyes_002_29.png\": 930,\n\t\"./eyes_002/eyes_002_3.png\": 931,\n\t\"./eyes_002/eyes_002_30.png\": 932,\n\t\"./eyes_002/eyes_002_31.png\": 933,\n\t\"./eyes_002/eyes_002_32.png\": 934,\n\t\"./eyes_002/eyes_002_33.png\": 935,\n\t\"./eyes_002/eyes_002_34.png\": 936,\n\t\"./eyes_002/eyes_002_35.png\": 937,\n\t\"./eyes_002/eyes_002_36.png\": 938,\n\t\"./eyes_002/eyes_002_37.png\": 939,\n\t\"./eyes_002/eyes_002_38.png\": 940,\n\t\"./eyes_002/eyes_002_39.png\": 941,\n\t\"./eyes_002/eyes_002_4.png\": 942,\n\t\"./eyes_002/eyes_002_5.png\": 943,\n\t\"./eyes_002/eyes_002_6.png\": 944,\n\t\"./eyes_002/eyes_002_7.png\": 945,\n\t\"./eyes_002/eyes_002_8.png\": 946,\n\t\"./eyes_002/eyes_002_9.png\": 947,\n\t\"./eyes_003/eyes_003_0.png\": 948,\n\t\"./eyes_003/eyes_003_1.png\": 949,\n\t\"./eyes_003/eyes_003_10.png\": 950,\n\t\"./eyes_003/eyes_003_11.png\": 951,\n\t\"./eyes_003/eyes_003_12.png\": 952,\n\t\"./eyes_003/eyes_003_13.png\": 953,\n\t\"./eyes_003/eyes_003_14.png\": 954,\n\t\"./eyes_003/eyes_003_15.png\": 955,\n\t\"./eyes_003/eyes_003_16.png\": 956,\n\t\"./eyes_003/eyes_003_17.png\": 957,\n\t\"./eyes_003/eyes_003_18.png\": 958,\n\t\"./eyes_003/eyes_003_19.png\": 959,\n\t\"./eyes_003/eyes_003_2.png\": 960,\n\t\"./eyes_003/eyes_003_20.png\": 961,\n\t\"./eyes_003/eyes_003_21.png\": 962,\n\t\"./eyes_003/eyes_003_22.png\": 963,\n\t\"./eyes_003/eyes_003_23.png\": 964,\n\t\"./eyes_003/eyes_003_24.png\": 965,\n\t\"./eyes_003/eyes_003_25.png\": 966,\n\t\"./eyes_003/eyes_003_26.png\": 967,\n\t\"./eyes_003/eyes_003_29.png\": 968,\n\t\"./eyes_003/eyes_003_3.png\": 969,\n\t\"./eyes_003/eyes_003_30.png\": 970,\n\t\"./eyes_003/eyes_003_31.png\": 971,\n\t\"./eyes_003/eyes_003_32.png\": 972,\n\t\"./eyes_003/eyes_003_33.png\": 973,\n\t\"./eyes_003/eyes_003_34.png\": 974,\n\t\"./eyes_003/eyes_003_35.png\": 975,\n\t\"./eyes_003/eyes_003_36.png\": 976,\n\t\"./eyes_003/eyes_003_37.png\": 977,\n\t\"./eyes_003/eyes_003_38.png\": 978,\n\t\"./eyes_003/eyes_003_39.png\": 979,\n\t\"./eyes_003/eyes_003_4.png\": 980,\n\t\"./eyes_003/eyes_003_5.png\": 981,\n\t\"./eyes_003/eyes_003_6.png\": 982,\n\t\"./eyes_003/eyes_003_7.png\": 983,\n\t\"./eyes_003/eyes_003_8.png\": 984,\n\t\"./eyes_003/eyes_003_9.png\": 985,\n\t\"./eyes_004/eyes_004_0.png\": 986,\n\t\"./eyes_004/eyes_004_1.png\": 987,\n\t\"./eyes_004/eyes_004_10.png\": 988,\n\t\"./eyes_004/eyes_004_11.png\": 989,\n\t\"./eyes_004/eyes_004_12.png\": 990,\n\t\"./eyes_004/eyes_004_13.png\": 991,\n\t\"./eyes_004/eyes_004_14.png\": 992,\n\t\"./eyes_004/eyes_004_15.png\": 993,\n\t\"./eyes_004/eyes_004_16.png\": 994,\n\t\"./eyes_004/eyes_004_17.png\": 995,\n\t\"./eyes_004/eyes_004_18.png\": 996,\n\t\"./eyes_004/eyes_004_19.png\": 997,\n\t\"./eyes_004/eyes_004_2.png\": 998,\n\t\"./eyes_004/eyes_004_20.png\": 999,\n\t\"./eyes_004/eyes_004_21.png\": 1000,\n\t\"./eyes_004/eyes_004_22.png\": 1001,\n\t\"./eyes_004/eyes_004_23.png\": 1002,\n\t\"./eyes_004/eyes_004_24.png\": 1003,\n\t\"./eyes_004/eyes_004_25.png\": 1004,\n\t\"./eyes_004/eyes_004_26.png\": 1005,\n\t\"./eyes_004/eyes_004_29.png\": 1006,\n\t\"./eyes_004/eyes_004_3.png\": 1007,\n\t\"./eyes_004/eyes_004_30.png\": 1008,\n\t\"./eyes_004/eyes_004_31.png\": 1009,\n\t\"./eyes_004/eyes_004_32.png\": 1010,\n\t\"./eyes_004/eyes_004_33.png\": 1011,\n\t\"./eyes_004/eyes_004_34.png\": 1012,\n\t\"./eyes_004/eyes_004_35.png\": 1013,\n\t\"./eyes_004/eyes_004_36.png\": 1014,\n\t\"./eyes_004/eyes_004_37.png\": 1015,\n\t\"./eyes_004/eyes_004_38.png\": 1016,\n\t\"./eyes_004/eyes_004_39.png\": 1017,\n\t\"./eyes_004/eyes_004_4.png\": 1018,\n\t\"./eyes_004/eyes_004_5.png\": 1019,\n\t\"./eyes_004/eyes_004_6.png\": 1020,\n\t\"./eyes_004/eyes_004_7.png\": 1021,\n\t\"./eyes_004/eyes_004_8.png\": 1022,\n\t\"./eyes_004/eyes_004_9.png\": 1023,\n\t\"./eyes_005/eyes_005_0.png\": 1024,\n\t\"./eyes_005/eyes_005_1.png\": 1025,\n\t\"./eyes_005/eyes_005_10.png\": 1026,\n\t\"./eyes_005/eyes_005_11.png\": 1027,\n\t\"./eyes_005/eyes_005_12.png\": 1028,\n\t\"./eyes_005/eyes_005_13.png\": 1029,\n\t\"./eyes_005/eyes_005_14.png\": 1030,\n\t\"./eyes_005/eyes_005_15.png\": 1031,\n\t\"./eyes_005/eyes_005_16.png\": 1032,\n\t\"./eyes_005/eyes_005_17.png\": 1033,\n\t\"./eyes_005/eyes_005_18.png\": 1034,\n\t\"./eyes_005/eyes_005_19.png\": 1035,\n\t\"./eyes_005/eyes_005_2.png\": 1036,\n\t\"./eyes_005/eyes_005_20.png\": 1037,\n\t\"./eyes_005/eyes_005_21.png\": 1038,\n\t\"./eyes_005/eyes_005_22.png\": 1039,\n\t\"./eyes_005/eyes_005_23.png\": 1040,\n\t\"./eyes_005/eyes_005_24.png\": 1041,\n\t\"./eyes_005/eyes_005_25.png\": 1042,\n\t\"./eyes_005/eyes_005_26.png\": 1043,\n\t\"./eyes_005/eyes_005_29.png\": 1044,\n\t\"./eyes_005/eyes_005_3.png\": 1045,\n\t\"./eyes_005/eyes_005_30.png\": 1046,\n\t\"./eyes_005/eyes_005_31.png\": 1047,\n\t\"./eyes_005/eyes_005_32.png\": 1048,\n\t\"./eyes_005/eyes_005_33.png\": 1049,\n\t\"./eyes_005/eyes_005_34.png\": 1050,\n\t\"./eyes_005/eyes_005_35.png\": 1051,\n\t\"./eyes_005/eyes_005_36.png\": 1052,\n\t\"./eyes_005/eyes_005_37.png\": 1053,\n\t\"./eyes_005/eyes_005_38.png\": 1054,\n\t\"./eyes_005/eyes_005_39.png\": 1055,\n\t\"./eyes_005/eyes_005_4.png\": 1056,\n\t\"./eyes_005/eyes_005_5.png\": 1057,\n\t\"./eyes_005/eyes_005_6.png\": 1058,\n\t\"./eyes_005/eyes_005_7.png\": 1059,\n\t\"./eyes_005/eyes_005_8.png\": 1060,\n\t\"./eyes_005/eyes_005_9.png\": 1061\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 871;","import { RouterState } from \"connected-react-router\";\r\n\r\nimport { I18NState, defaultI18NState } from \"@/services/i18n/state\";\r\nimport { OniSaveState, defaultOniSaveState } from \"@/services/oni-save/state\";\r\n\r\nexport * from \"./utils\";\r\n\r\nexport interface AppState {\r\n  router: RouterState;\r\n  services: {\r\n    i18n: I18NState;\r\n    oniSave: OniSaveState;\r\n  };\r\n}\r\n\r\nexport const defaultAppState: Readonly<AppState> = {\r\n  router: undefined as any,\r\n  services: {\r\n    i18n: defaultI18NState,\r\n    oniSave: defaultOniSaveState\r\n  }\r\n};\r\nObject.freeze(defaultAppState);\r\n","import { SaveGame } from \"oni-save-parser\";\r\n\r\nexport enum LoadingStatus {\r\n  Idle = \"idle\",\r\n  Loading = \"loading\",\r\n  Saving = \"saving\",\r\n  Ready = \"ready\",\r\n  Error = \"error\"\r\n}\r\n\r\nexport interface CopyPasteData {\r\n  gameObjectType: string;\r\n  behaviors: Record<string, BehaviorCopyData>;\r\n}\r\nexport interface BehaviorCopyData {\r\n  templateData?: any;\r\n  extraData?: any;\r\n}\r\n\r\nexport interface OniSaveState {\r\n  loadingStatus: LoadingStatus;\r\n  loadingProgressMessage: string | null;\r\n  loadError: Error | null;\r\n  saveGame: SaveGame | null;\r\n  isMock: boolean;\r\n  isModified: boolean;\r\n  copyPasteData: CopyPasteData | null;\r\n  warnInputChecksum: boolean;\r\n}\r\n\r\nexport const defaultOniSaveState: Readonly<OniSaveState> = {\r\n  loadingStatus: LoadingStatus.Idle,\r\n  loadingProgressMessage: null,\r\n  loadError: null,\r\n  saveGame: null,\r\n  isMock: false,\r\n  isModified: false,\r\n  copyPasteData: null,\r\n  warnInputChecksum: false\r\n};\r\nObject.freeze(defaultOniSaveState);\r\n"],"sourceRoot":""}